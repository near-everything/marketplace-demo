"use strict";exports.ids=["110"],exports.modules={3207(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(9580),t)},9580(e,t,r){var n=r(8404);Object.prototype.hasOwnProperty.call(n,"__proto__")&&!Object.prototype.hasOwnProperty.call(t,"__proto__")&&Object.defineProperty(t,"__proto__",{enumerable:!0,value:n.__proto__}),Object.keys(n).forEach(function(e){"default"===e||Object.prototype.hasOwnProperty.call(t,e)||(t[e]=n[e])})},7900(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{h:()=>createLogger});var _polyfills_esm_js__rspack_import_0=__webpack_require__(2e3);let FederationModuleManifest="federation-manifest.json",MANIFEST_EXT=".json",BROWSER_LOG_KEY="FEDERATION_DEBUG",NameTransformSymbol={AT:"@",HYPHEN:"-",SLASH:"/"},NameTransformMap={[NameTransformSymbol.AT]:"scope_",[NameTransformSymbol.HYPHEN]:"_",[NameTransformSymbol.SLASH]:"__"},EncodedNameTransformMap={[NameTransformMap[NameTransformSymbol.AT]]:NameTransformSymbol.AT,[NameTransformMap[NameTransformSymbol.HYPHEN]]:NameTransformSymbol.HYPHEN,[NameTransformMap[NameTransformSymbol.SLASH]]:NameTransformSymbol.SLASH},SEPARATOR=":",ManifestFileName="mf-manifest.json",StatsFileName="mf-stats.json",MFModuleType={},MODULE_DEVTOOL_IDENTIFIER="__MF_DEVTOOLS_MODULE_INFO__",ENCODE_NAME_PREFIX="ENCODE_NAME_PREFIX",TEMP_DIR=".federation",MFPrefetchCommon={};var ContainerPlugin=Object.freeze({__proto__:null}),ContainerReferencePlugin=Object.freeze({__proto__:null}),ModuleFederationPlugin=Object.freeze({__proto__:null}),SharePlugin=Object.freeze({__proto__:null});function isBrowserEnv(){return"undefined"!=typeof window&&void 0!==window.document}function isReactNativeEnv(){var e;return"undefined"!=typeof navigator&&(null==(e=navigator)?void 0:e.product)==="ReactNative"}function isBrowserDebug(){try{if(isBrowserEnv()&&window.localStorage)return!!localStorage.getItem(BROWSER_LOG_KEY)}catch(e){}return!1}function isDebugMode(){return"undefined"!=typeof process&&process.env&&process.env.FEDERATION_DEBUG?!!process.env.FEDERATION_DEBUG:!!("undefined"!=typeof FEDERATION_DEBUG&&FEDERATION_DEBUG)||isBrowserDebug()}let getProcessEnv=function(){return"undefined"!=typeof process&&process.env?process.env:{}},LOG_CATEGORY="[ Federation Runtime ]",parseEntry=(e,t,r=SEPARATOR)=>{let n=e.split(r),o="development"===getProcessEnv().NODE_ENV&&t,i="*",a=e=>e.startsWith("http")||e.includes(MANIFEST_EXT);if(n.length>=2){let[t,...l]=n;e.startsWith(r)&&(t=n.slice(0,2).join(r),l=[o||n.slice(2).join(r)]);let c=o||l.join(r);return a(c)?{name:t,entry:c}:{name:t,version:c||i}}if(1===n.length){let[e]=n;return o&&a(o)?{name:e,entry:o}:{name:e,version:o||i}}throw`Invalid entry value: ${e}`},composeKeyWithSeparator=function(...e){return e.length?e.reduce((e,t)=>t?e?`${e}${SEPARATOR}${t}`:t:e,""):""},encodeName=function(e,t="",r=!1){try{let n=r?".js":"";return`${t}${e.replace(RegExp(`${NameTransformSymbol.AT}`,"g"),NameTransformMap[NameTransformSymbol.AT]).replace(RegExp(`${NameTransformSymbol.HYPHEN}`,"g"),NameTransformMap[NameTransformSymbol.HYPHEN]).replace(RegExp(`${NameTransformSymbol.SLASH}`,"g"),NameTransformMap[NameTransformSymbol.SLASH])}${n}`}catch(e){throw e}},decodeName=function(e,t,r){try{let n=e;if(t){if(!n.startsWith(t))return n;n=n.replace(RegExp(t,"g"),"")}return n=n.replace(RegExp(`${NameTransformMap[NameTransformSymbol.AT]}`,"g"),EncodedNameTransformMap[NameTransformMap[NameTransformSymbol.AT]]).replace(RegExp(`${NameTransformMap[NameTransformSymbol.SLASH]}`,"g"),EncodedNameTransformMap[NameTransformMap[NameTransformSymbol.SLASH]]).replace(RegExp(`${NameTransformMap[NameTransformSymbol.HYPHEN]}`,"g"),EncodedNameTransformMap[NameTransformMap[NameTransformSymbol.HYPHEN]]),r&&(n=n.replace(".js","")),n}catch(e){throw e}},generateExposeFilename=(e,t)=>{if(!e)return"";let r=e;return"."===r&&(r="default_export"),r.startsWith("./")&&(r=r.replace("./","")),encodeName(r,"__federation_expose_",t)},generateShareFilename=(e,t)=>e?encodeName(e,"__federation_shared_",t):"",getResourceUrl=(e,t)=>{if("getPublicPath"in e){let r;return r=e.getPublicPath.startsWith("function")?Function("return "+e.getPublicPath)()():Function(e.getPublicPath)(),`${r}${t}`}return"publicPath"in e?!isBrowserEnv()&&!isReactNativeEnv()&&"ssrPublicPath"in e?`${e.ssrPublicPath}${t}`:`${e.publicPath}${t}`:(console.warn("Cannot get resource URL. If in debug mode, please ignore.",e,t),"")},assert=(e,t)=>{e||error(t)},error=e=>{throw Error(`${LOG_CATEGORY}: ${e}`)},warn=e=>{console.warn(`${LOG_CATEGORY}: ${e}`)};function safeToString(e){try{return JSON.stringify(e,null,2)}catch(e){return""}}let VERSION_PATTERN_REGEXP=/^([\d^=v<>~]|[*xX]$)/;function isRequiredVersion(e){return VERSION_PATTERN_REGEXP.test(e)}let simpleJoinRemoteEntry=(e,t)=>{if(!e)return t;let r=(e=>{if("."===e)return"";if(e.startsWith("./"))return e.replace("./","");if(e.startsWith("/")){let t=e.slice(1);return t.endsWith("/")?t.slice(0,-1):t}return e})(e);return r?r.endsWith("/")?`${r}${t}`:`${r}/${t}`:t};function inferAutoPublicPath(e){return e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/")}function generateSnapshotFromManifest(e,t={}){var r,n,o;let i,{remotes:a={},overrides:l={},version:c}=t,s=()=>"publicPath"in e.metaData?"auto"===e.metaData.publicPath&&c?inferAutoPublicPath(c):e.metaData.publicPath:e.metaData.getPublicPath,u=Object.keys(l),d={};Object.keys(a).length||(d=(null==(o=e.remotes)?void 0:o.reduce((e,t)=>{let r,n=t.federationContainerName;return r=u.includes(n)?l[n]:"version"in t?t.version:t.entry,e[n]={matchedVersion:r},e},{}))||{}),Object.keys(a).forEach(e=>d[e]={matchedVersion:u.includes(e)?l[e]:a[e]});let{remoteEntry:{path:f,name:p,type:E},types:g,buildInfo:{buildVersion:_},globalName:m,ssrRemoteEntry:h}=e.metaData,{exposes:y}=e,v={version:c||"",buildVersion:_,globalName:m,remoteEntry:simpleJoinRemoteEntry(f,p),remoteEntryType:E,remoteTypes:simpleJoinRemoteEntry(g.path,g.name),remoteTypesZip:g.zip||"",remoteTypesAPI:g.api||"",remotesInfo:d,shared:null==e?void 0:e.shared.map(e=>({assets:e.assets,sharedName:e.name,version:e.version})),modules:null==y?void 0:y.map(e=>({moduleName:e.name,modulePath:e.path,assets:e.assets}))};if(null==(r=e.metaData)?void 0:r.prefetchInterface){let t=e.metaData.prefetchInterface;v=(0,_polyfills_esm_js__rspack_import_0._)({},v,{prefetchInterface:t})}if(null==(n=e.metaData)?void 0:n.prefetchEntry){let{path:t,name:r,type:n}=e.metaData.prefetchEntry;v=(0,_polyfills_esm_js__rspack_import_0._)({},v,{prefetchEntry:simpleJoinRemoteEntry(t,r),prefetchEntryType:n})}return i="publicPath"in e.metaData?(0,_polyfills_esm_js__rspack_import_0._)({},v,{publicPath:s(),ssrPublicPath:e.metaData.ssrPublicPath}):(0,_polyfills_esm_js__rspack_import_0._)({},v,{getPublicPath:s()}),h&&(i.ssrRemoteEntry=simpleJoinRemoteEntry(h.path,h.name),i.ssrRemoteEntryType=h.type||"commonjs-module"),i}function isManifestProvider(e){return!!("remoteEntry"in e&&e.remoteEntry.includes(MANIFEST_EXT))}let PREFIX="[ Module Federation ]",Logger=class{setPrefix(e){this.prefix=e}log(...e){console.log(this.prefix,...e)}warn(...e){console.log(this.prefix,...e)}error(...e){console.log(this.prefix,...e)}success(...e){console.log(this.prefix,...e)}info(...e){console.log(this.prefix,...e)}ready(...e){console.log(this.prefix,...e)}debug(...e){isDebugMode()&&console.log(this.prefix,...e)}constructor(e){this.prefix=e}};function createLogger(e){return new Logger(e)}let logger=createLogger(PREFIX);async function safeWrapper(e,t){try{return await e()}catch(e){t||warn(e);return}}function isStaticResourcesEqual(e,t){let r=/^(https?:)?\/\//i;return e.replace(r,"").replace(/\/$/,"")===t.replace(r,"").replace(/\/$/,"")}function createScript(e){let t,r=null,n=!0,o=2e4,i=document.getElementsByTagName("script");for(let t=0;t<i.length;t++){let o=i[t],a=o.getAttribute("src");if(a&&isStaticResourcesEqual(a,e.url)){r=o,n=!1;break}}if(!r){let t,n=e.attrs;(r=document.createElement("script")).type=(null==n?void 0:n.type)==="module"?"module":"text/javascript",e.createScriptHook&&((t=e.createScriptHook(e.url,e.attrs))instanceof HTMLScriptElement?r=t:"object"==typeof t&&("script"in t&&t.script&&(r=t.script),"timeout"in t&&t.timeout&&(o=t.timeout))),r.src||(r.src=e.url),n&&!t&&Object.keys(n).forEach(e=>{r&&("async"===e||"defer"===e?r[e]=n[e]:r.getAttribute(e)||r.setAttribute(e,n[e]))})}let a=async(n,o)=>{clearTimeout(t);let i=()=>{(null==o?void 0:o.type)==="error"?(null==e?void 0:e.onErrorCallback)&&(null==e||e.onErrorCallback(o)):(null==e?void 0:e.cb)&&(null==e||e.cb())};if(r&&(r.onerror=null,r.onload=null,safeWrapper(()=>{let{needDeleteScript:t=!0}=e;t&&(null==r?void 0:r.parentNode)&&r.parentNode.removeChild(r)}),n&&"function"==typeof n)){let e=n(o);if(e instanceof Promise){let t=await e;return i(),t}return i(),e}i()};return r.onerror=a.bind(null,r.onerror),r.onload=a.bind(null,r.onload),t=setTimeout(()=>{a(null,Error(`Remote script "${e.url}" time-outed.`))},o),{script:r,needAttach:n}}function createLink(e){let t=null,r=!0,n=document.getElementsByTagName("link");for(let o=0;o<n.length;o++){let i=n[o],a=i.getAttribute("href"),l=i.getAttribute("rel");if(a&&isStaticResourcesEqual(a,e.url)&&l===e.attrs.rel){t=i,r=!1;break}}if(!t){let r;(t=document.createElement("link")).setAttribute("href",e.url);let n=e.attrs;e.createLinkHook&&(r=e.createLinkHook(e.url,n))instanceof HTMLLinkElement&&(t=r),n&&!r&&Object.keys(n).forEach(e=>{t&&!t.getAttribute(e)&&t.setAttribute(e,n[e])})}let o=(r,n)=>{let o=()=>{(null==n?void 0:n.type)==="error"?(null==e?void 0:e.onErrorCallback)&&(null==e||e.onErrorCallback(n)):(null==e?void 0:e.cb)&&(null==e||e.cb())};if(t&&(t.onerror=null,t.onload=null,safeWrapper(()=>{let{needDeleteLink:r=!0}=e;r&&(null==t?void 0:t.parentNode)&&t.parentNode.removeChild(t)}),r)){let e=r(n);return o(),e}o()};return t.onerror=o.bind(null,t.onerror),t.onload=o.bind(null,t.onload),{link:t,needAttach:r}}function loadScript(e,t){let{attrs:r={},createScriptHook:n}=t;return new Promise((t,o)=>{let{script:i,needAttach:a}=createScript({url:e,cb:t,onErrorCallback:o,attrs:(0,_polyfills_esm_js__rspack_import_0._)({fetchpriority:"high"},r),createScriptHook:n,needDeleteScript:!0});a&&document.head.appendChild(i)})}let sdkImportCache=new Map;function importNodeModule(e){if(!e)throw Error("import specifier is required");if(sdkImportCache.has(e))return sdkImportCache.get(e);let t=Function("name","return import(name)")(e).then(e=>e).catch(t=>{throw console.error(`Error importing module ${e}:`,t),sdkImportCache.delete(e),t});return sdkImportCache.set(e,t),t}let loadNodeFetch=async()=>{let e=await importNodeModule("node-fetch");return e.default||e},lazyLoaderHookFetch=async(e,t,r)=>{let n=(e,t)=>r.lifecycle.fetch.emit(e,t),o=await n(e,t||{});return o&&o instanceof Response?o:("undefined"==typeof fetch?await loadNodeFetch():fetch)(e,t||{})},createScriptNode="undefined"==typeof ENV_TARGET||"web"!==ENV_TARGET?(url,cb,attrs,loaderHook)=>{let urlObj;if(null==loaderHook?void 0:loaderHook.createScriptHook){let hookResult=loaderHook.createScriptHook(url);hookResult&&"object"==typeof hookResult&&"url"in hookResult&&(url=hookResult.url)}try{urlObj=new URL(url)}catch(e){console.error("Error constructing URL:",e),cb(Error(`Invalid URL: ${e}`));return}let getFetch=async()=>(null==loaderHook?void 0:loaderHook.fetch)?(e,t)=>lazyLoaderHookFetch(e,t,loaderHook):"undefined"==typeof fetch?loadNodeFetch():fetch,handleScriptFetch=async(f,urlObj)=>{try{var _vm_constants,_vm_constants_USE_MAIN_CONTEXT_DEFAULT_LOADER;let res=await f(urlObj.href),data=await res.text(),[path,vm]=await Promise.all([importNodeModule("path"),importNodeModule("vm")]),scriptContext={exports:{},module:{exports:{}}},urlDirname=urlObj.pathname.split("/").slice(0,-1).join("/"),filename=path.basename(urlObj.pathname),script=new vm.Script(`(function(exports, module, require, __dirname, __filename) {${data}
})`,{filename,importModuleDynamically:null!=(_vm_constants_USE_MAIN_CONTEXT_DEFAULT_LOADER=null==(_vm_constants=vm.constants)?void 0:_vm_constants.USE_MAIN_CONTEXT_DEFAULT_LOADER)?_vm_constants_USE_MAIN_CONTEXT_DEFAULT_LOADER:importNodeModule});script.runInThisContext()(scriptContext.exports,scriptContext.module,eval("require"),urlDirname,filename);let exportedInterface=scriptContext.module.exports||scriptContext.exports;if(attrs&&exportedInterface&&attrs.globalName){let container=exportedInterface[attrs.globalName]||exportedInterface;cb(void 0,container);return}cb(void 0,exportedInterface)}catch(e){cb(e instanceof Error?e:Error(`Script execution error: ${e}`))}};getFetch().then(async e=>{if((null==attrs?void 0:attrs.type)==="esm"||(null==attrs?void 0:attrs.type)==="module")return loadModule(urlObj.href,{fetch:e,vm:await importNodeModule("vm")}).then(async e=>{await e.evaluate(),cb(void 0,e.namespace)}).catch(e=>{cb(e instanceof Error?e:Error(`Script execution error: ${e}`))});handleScriptFetch(e,urlObj)}).catch(e=>{cb(e)})}:(e,t,r,n)=>{t(Error("createScriptNode is disabled in non-Node.js environment"))},loadScriptNode="undefined"==typeof ENV_TARGET||"web"!==ENV_TARGET?(e,t)=>new Promise((r,n)=>{createScriptNode(e,(e,o)=>{if(e)n(e);else{var i,a;let e=(null==t||null==(i=t.attrs)?void 0:i.globalName)||`__FEDERATION_${null==t||null==(a=t.attrs)?void 0:a.name}:custom__`;r(globalThis[e]=o)}},t.attrs,t.loaderHook)}):(e,t)=>{throw Error("loadScriptNode is disabled in non-Node.js environment")},esmModuleCache=new Map;async function loadModule(e,t){if(esmModuleCache.has(e))return esmModuleCache.get(e);let{fetch:r,vm:n}=t,o=await r(e),i=await o.text(),a=new n.SourceTextModule(i,{importModuleDynamically:async(r,n)=>loadModule(new URL(r,e).href,t)});return esmModuleCache.set(e,a),await a.link(async r=>{let n=new URL(r,e).href;return await loadModule(n,t)}),a}function normalizeOptions(e,t,r){return function(n){if(!1===n)return!1;if(void 0===n)if(e)return t;else return!1;if(!0===n)return t;if(n&&"object"==typeof n)return(0,_polyfills_esm_js__rspack_import_0._)({},t,n);throw Error(`Unexpected type for \`${r}\`, expect boolean/undefined/object, got: ${typeof n}`)}}let createModuleFederationConfig=e=>e},2e3(e,t,r){r.d(t,{_:()=>n});function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}},2813(e,t,r){r.r(t),r.d(t,{PluginRuntime:()=>ev,createPlugin:()=>c,ERROR_PATTERNS:()=>o,getNormalizedRemoteName:()=>s,CommonPluginErrors:()=>i,createPluginRuntime:()=>e$});var n=r(8460);let o={CONNECTION_REFUSED:["ECONNREFUSED"],HOST_NOT_FOUND:["ENOTFOUND","EHOSTUNREACH"],TIMEOUT:["ETIMEDOUT","ESOCKETTIMEDOUT","timeout"],CONNECTION_RESET:["ECONNRESET","EPIPE"],PERMISSION:["EACCES","EPERM","permission denied"],AUTH:["401","unauthorized","authentication failed"],RATE_LIMITED:["429","too many requests","rate limit"],SERVICE_UNAVAILABLE:["503","service unavailable"]},i={UNAUTHORIZED:{data:n.zod_exports.z.object({apiKeyProvided:n.zod_exports.z.boolean(),provider:n.zod_exports.z.string().optional(),authType:n.zod_exports.z.enum(["apiKey","oauth","token"]).optional()})},RATE_LIMITED:{data:n.zod_exports.z.object({retryAfter:n.zod_exports.z.number().int().min(1),remainingRequests:n.zod_exports.z.number().int().min(0).optional(),resetTime:n.zod_exports.z.string().datetime().optional(),limitType:n.zod_exports.z.enum(["requests","tokens","bandwidth"]).optional()})},SERVICE_UNAVAILABLE:{data:n.zod_exports.z.object({retryAfter:n.zod_exports.z.number().int().optional(),maintenanceWindow:n.zod_exports.z.boolean().default(!1),estimatedUptime:n.zod_exports.z.string().datetime().optional()})},BAD_REQUEST:{data:n.zod_exports.z.object({invalidFields:n.zod_exports.z.array(n.zod_exports.z.string()).optional(),validationErrors:n.zod_exports.z.array(n.zod_exports.z.object({field:n.zod_exports.z.string(),message:n.zod_exports.z.string(),code:n.zod_exports.z.string().optional()})).optional()})},NOT_FOUND:{data:n.zod_exports.z.object({resource:n.zod_exports.z.string().optional(),resourceId:n.zod_exports.z.string().optional()})},FORBIDDEN:{data:n.zod_exports.z.object({requiredPermissions:n.zod_exports.z.array(n.zod_exports.z.string()).optional(),action:n.zod_exports.z.string().optional()})},TIMEOUT:{data:n.zod_exports.z.object({timeoutMs:n.zod_exports.z.number().int().min(0).optional(),operation:n.zod_exports.z.string().optional(),retryable:n.zod_exports.z.boolean().default(!0)})},CONNECTION_ERROR:{data:n.zod_exports.z.object({errorCode:n.zod_exports.z.string().optional(),host:n.zod_exports.z.string().optional(),port:n.zod_exports.z.number().int().optional(),suggestion:n.zod_exports.z.string().optional()})}};var a=r(8803),l=r(8231);function c(e){let t={variables:e.variables,secrets:e.secrets};class r{id;contract=e.contract;configSchema=t;_context=null;initialize(t){return(e.initialize??(()=>a.Effect.succeed({})))(t).pipe(a.Effect.tap(e=>a.Effect.sync(()=>{this._context=e})),a.Effect.map(()=>this._context),a.Effect.mapError(e=>e))}shutdown(){let t=this;return a.Effect.gen(function*(){e.shutdown&&t._context&&(yield*e.shutdown(t._context).pipe(a.Effect.catchAll(()=>a.Effect.void)))})}createRouter(t){let r=(0,l.implement)(e.contract).$context();return e.createRouter(t,r)}}let n=r;return n.binding={contract:e.contract,variables:e.variables,secrets:e.secrets,context:{}},n}let s=e=>e.toLowerCase().replace(/^@/,"").replace(/\//g,"_");var u=r(9200),d=class extends a.Data.TaggedError("PluginRuntimeError"){},f=class extends a.Data.TaggedError("ModuleFederationError"){},p=class extends a.Data.TaggedError("ValidationError"){};let E=e=>{if(!e)return"Unknown error";if(e instanceof Error){if(e.message)return e.message;if(e.cause instanceof Error)return E(e.cause)}return e instanceof AggregateError&&e.errors?.length?e.errors.map(e=>E(e)).join("; "):"object"==typeof e&&"message"in e?String(e.message):String(e)},g=(e,t,r)=>{let n=[];n.push(`
╭─ Plugin Error ${"─".repeat(40)}`),e&&n.push(`│  Plugin: ${e}`),t&&n.push(`│  During: ${t}`),n.push(`│`),r.includes("ECONNREFUSED")?(n.push(`│  ❌ Connection refused`),n.push(`│  `),n.push(`│  A required service is not running.`),n.push(`│  → Run: docker compose up -d`)):r.includes("ENOTFOUND")?(n.push(`│  ❌ Host not found`),n.push(`│  `),n.push(`│  Check your connection URL or network settings.`)):r.includes("ETIMEDOUT")||r.includes("timeout")?(n.push(`│  ❌ Connection timeout`),n.push(`│  `),n.push(`│  The service took too long to respond.`)):r.includes("EACCES")||r.includes("permission")?(n.push(`│  ❌ Permission denied`),n.push(`│  `),n.push(`│  Check credentials or access permissions.`)):r.includes("401")||r.includes("unauthorized")?(n.push(`│  ❌ Authentication failed`),n.push(`│  `),n.push(`│  Check your API key or credentials.`)):n.push(`│  ❌ ${r}`),n.push(`╰${"─".repeat(50)}
`),console.error(n.join("\n"))},_=e=>["ETIMEDOUT","ECONNRESET","timeout","503","429"].some(t=>e.toLowerCase().includes(t.toLowerCase())),m=e=>{switch(e){case"TOO_MANY_REQUESTS":case"SERVICE_UNAVAILABLE":case"BAD_GATEWAY":case"GATEWAY_TIMEOUT":case"TIMEOUT":return!0;default:return!1}},h=(e,t,r,n)=>new d({pluginId:t,operation:n,procedureName:r,retryable:m(e.code),cause:e}),y=(e,t,r,n,o=!1)=>{if(e instanceof u.ORPCError)return h(e,t,r,n);if(e instanceof d)return e;let i=E(e);return g(t,n,i),new d({pluginId:t,operation:n,procedureName:r,retryable:o||_(i),cause:e instanceof Error?e:Error(i)})};var v="0.6.2",b="^1.10.0",O="^1.10.0",P="3.18.1",$="4.1.5",A=r(3207),T=r(7900);let N="[ Federation Runtime ]",R=(0,T.h)(N);Object.prototype.toString;let S="object"==typeof globalThis?globalThis:window,w=(()=>{try{return document.defaultView}catch(e){return S}})();function x(e,t,r){Object.defineProperty(e,t,{value:r,configurable:!1,writable:!0})}function z(e,t){return Object.hasOwnProperty.call(e,t)}z(S,"__GLOBAL_LOADING_REMOTE_ENTRY__")||x(S,"__GLOBAL_LOADING_REMOTE_ENTRY__",{});S.__GLOBAL_LOADING_REMOTE_ENTRY__;function D(e){var t,r,n,o,i,a,l,c,s,u,d,f;z(e,"__VMOK__")&&!z(e,"__FEDERATION__")&&x(e,"__FEDERATION__",e.__VMOK__),z(e,"__FEDERATION__")||(x(e,"__FEDERATION__",{__GLOBAL_PLUGIN__:[],__INSTANCES__:[],moduleInfo:{},__SHARE__:{},__MANIFEST_LOADING__:{},__PRELOADED_MAP__:new Map}),x(e,"__VMOK__",e.__FEDERATION__)),null!=(l=(t=e.__FEDERATION__).__GLOBAL_PLUGIN__)||(t.__GLOBAL_PLUGIN__=[]),null!=(c=(r=e.__FEDERATION__).__INSTANCES__)||(r.__INSTANCES__=[]),null!=(s=(n=e.__FEDERATION__).moduleInfo)||(n.moduleInfo={}),null!=(u=(o=e.__FEDERATION__).__SHARE__)||(o.__SHARE__={}),null!=(d=(i=e.__FEDERATION__).__MANIFEST_LOADING__)||(i.__MANIFEST_LOADING__={}),null!=(f=(a=e.__FEDERATION__).__PRELOADED_MAP__)||(a.__PRELOADED_MAP__=new Map)}function I(e){S.__FEDERATION__.__INSTANCES__.push(e)}D(S),D(w);let j="[0-9A-Za-z-]+",L=`(?:\\+(${j}(?:\\.${j})*))`,C="0|[1-9]\\d*",M="[0-9]+",F="\\d*[a-zA-Z-][a-zA-Z0-9-]*",U=`(?:${M}|${F})`,k=`(?:-?(${U}(?:\\.${U})*))`,H=`(?:${C}|${F})`,V=`(?:-(${H}(?:\\.${H})*))`,G=`${C}|x|X|\\*`,B=`[v=\\s]*(${G})(?:\\.(${G})(?:\\.(${G})(?:${V})?${L}?)?)?`,q=`^\\s*(${B})\\s+-\\s+(${B})\\s*$`,W=`(${M})\\.(${M})\\.(${M})`,Y=`[v=\\s]*${W}${k}?${L}?`,K="((?:<|>)?=?)",Z=`(\\s*)${K}\\s*(${Y}|${B})`,X="(?:~>?)",Q=`(\\s*)${X}\\s+`,J="(?:\\^)",ee=`(\\s*)${J}\\s+`,et=`^${J}${B}$`,er=`(${C})\\.(${C})\\.(${C})`,en=`v?${er}${V}?${L}?`,eo=`^${X}${B}$`,ei=`^${K}\\s*${B}$`,ea=`^${K}\\s*(${en})$|^$`,el=a.Effect.cached(a.Effect.sync(()=>{try{let e=(0,A.getInstance)();return e||(e=(0,A.createInstance)({name:"host",remotes:[],shared:{"every-plugin":{version:v,shareConfig:{singleton:!0,requiredVersion:`^${v}`,eager:!0,strictVersion:!1}},effect:{version:P,shareConfig:{singleton:!0,requiredVersion:"^3.18.0",eager:!0,strictVersion:!1}},zod:{version:$,shareConfig:{singleton:!0,requiredVersion:"^4.1.0",eager:!0,strictVersion:!1}},"@orpc/contract":{version:b,shareConfig:{singleton:!0,requiredVersion:"^1.8.0",eager:!0,strictVersion:!1}},"@orpc/server":{version:O,shareConfig:{singleton:!0,requiredVersion:"^1.8.0",eager:!0,strictVersion:!1}}}}),I(e)),e}catch(e){throw Error(`Failed to initialize Module Federation: ${e}`)}}));var ec=class extends a.Effect.Service()("ModuleFederationService",{effect:a.Effect.gen(function*(){let e=yield*a.Effect.flatten(el);return{registerRemote:(t,r)=>a.Effect.gen(function*(){let n;console.log(`[MF] Registering ${t}`);let o=r.endsWith("/")?`${r}mf-manifest.json`:`${r}/mf-manifest.json`,i=yield*a.Effect.tryPromise({try:async()=>(await fetch(o,{method:"HEAD"})).ok,catch:()=>!1}),l=!1;i?(n=o,l=!0,console.log(`[MF] Using MF 2.0 manifest mode for ${t}`)):(console.log(`[MF] ⚠️ Manifest not found, falling back to MF 1.5 mode for ${t}`),n=r,l=!1);let c=l?t:s(t);yield*a.Effect.try({try:()=>e.registerRemotes([{name:c,entry:n,...l&&{alias:t}}]),catch:e=>new f({pluginId:t,remoteUrl:r,cause:e instanceof Error?e:Error(String(e))})}),console.log(`[MF] ✅ Registered ${t} (${l?"MF 2.0":"MF 1.5"})`)}),loadRemoteConstructor:(t,r)=>a.Effect.gen(function*(){let n=s(t);console.log(`[MF] Loading remote ${n}`);let o=`${n}/plugin`;return yield*a.Effect.tryPromise({try:async()=>{let r=await e.loadRemote(o);if(!r)throw Error(`No container returned for ${o}`);let n="function"==typeof r?r:r.default?r.default:Object.values(r).find(e=>"function"==typeof e&&e.prototype?.constructor===e);if(!n||"function"!=typeof n){let e="object"==typeof r?`Available exports: ${Object.keys(r).join(", ")}`:`Container type: ${typeof r}`;throw Error(`No valid plugin constructor found for '${t}'.
Supported patterns:
  - export const YourPlugin = createPlugin({...})
  - export default createPlugin({...})
${e}`)}if(!n.binding){let e="object"==typeof r?`Found exports: ${Object.keys(r).join(", ")}`:`Container type: ${typeof r}`;throw Error(`Invalid plugin constructor for '${t}'. The exported value must be created with createPlugin(). Found a function but it's missing the required 'binding' property.
${e}`)}return console.log(`[MF] ✅ Loaded constructor for ${t}`),n},catch:e=>new f({pluginId:t,remoteUrl:r,cause:e instanceof Error?e:Error(String(e))})})})}})}){},es=class extends a.Effect.Service()("PluginLifecycleService",{effect:a.Effect.gen(function*(){let e=yield*a.Ref.make(new Set);return{register:t=>a.Ref.update(e,e=>new Set(e).add(t)),unregister:t=>a.Ref.update(e,e=>{let r=new Set(e);return r.delete(t),r}),shutdown:t=>a.Effect.gen(function*(){yield*a.Ref.update(e,e=>{let r=new Set(e);return r.delete(t),r}),yield*t.plugin.shutdown().pipe(a.Effect.mapError(e=>y(e,t.plugin.id,void 0,"shutdown-plugin",!1)))}),cleanup:()=>a.Effect.gen(function*(){let t=yield*a.Ref.get(e);yield*a.Effect.forEach(t,e=>e.plugin.shutdown().pipe(a.Effect.mapError(t=>y(t,e.plugin.id,void 0,"cleanup-shutdown",!1)),a.Effect.catchAll(t=>a.Effect.logError(`Failed to shutdown plugin ${e.plugin.id} during cleanup`,t,{pluginId:e.plugin.id}))),{concurrency:"unbounded"}),yield*a.Ref.set(e,new Set)}).pipe(a.Effect.catchAll(()=>a.Effect.void))}})}){},eu=r(9230);let ed=eu.z.object({secrets:eu.z.record(eu.z.string(),eu.z.unknown())}).loose();var ef=class extends a.Context.Tag("SecretsConfig")(){},ep=class extends a.Effect.Service()("SecretsService",{effect:a.Effect.gen(function*(){let e=yield*ef,t=r=>{if("string"==typeof r){let t=r;for(let[r,n]of Object.entries(e)){let e=RegExp(`{{${r}}}`,"g");t=t.replace(e,String(n))}return t}if(Array.isArray(r))return r.map(t);if(r&&"object"==typeof r){if(r.constructor===Object||void 0===r.constructor){let e={};for(let[n,o]of Object.entries(r))e[n]=t(o);return e}let e=Object.create(Object.getPrototypeOf(r));for(let[n,o]of Object.entries(r))e[n]=t(o);return e}return r};return{hydrateSecrets:e=>a.Effect.gen(function*(){let r=ed.parse(e);try{return t(r)}catch(e){return yield*a.Effect.fail(new d({operation:"hydrate-secrets",cause:e instanceof Error?e:Error(String(e)),retryable:!1}))}})}})}){};let eE=(e,t,r,n)=>a.Effect.gen(function*(){let o=e.safeParse(t);return o.success?o.data:yield*a.Effect.fail(new p({pluginId:r,stage:n,zodError:o.error}))});var eg=class extends a.Context.Tag("PluginRegistry")(){},e_=class extends a.Context.Tag("PluginMap")(){},em=class extends a.Effect.Service()("RegistryService",{effect:a.Effect.gen(function*(){let e=yield*eg,t=yield*e_;return{get:t=>a.Effect.gen(function*(){let r=e[t];return r?"module"in r?{constructor:r.module,metadata:{remoteUrl:r.remote||"",version:r.version,description:r.description}}:{constructor:null,metadata:{remoteUrl:r.remote,version:r.version,description:r.description}}:yield*a.Effect.fail(new d({pluginId:t,operation:"validate-plugin-id",cause:Error(`Plugin ${t} not found in registry`),retryable:!1}))}),getModule:e=>a.Effect.succeed(t[e]||null)}})}){},eh=class extends a.Effect.Service()("PluginLoaderService",{effect:a.Effect.gen(function*(){let e=yield*ec,t=yield*ep,r=yield*em,n=(e,t)=>t&&"latest"!==t?e.replace("@latest",`@${t}`):e;return{loadPlugin:t=>a.Effect.gen(function*(){let o=yield*r.get(t);if(o.constructor)return yield*a.Effect.logDebug("Loading plugin from direct module",{pluginId:t}),{ctor:o.constructor,metadata:o.metadata};let i=o.metadata.remoteUrl;if(!i)return yield*a.Effect.fail(new d({pluginId:t,operation:"load-plugin",cause:Error(`Plugin ${t} has no module or remote URL configured`),retryable:!1}));let l=n(i);return yield*e.registerRemote(t,l).pipe(a.Effect.mapError(e=>y(e,t,void 0,"register-remote",!0))),yield*a.Effect.logDebug("Loading plugin from remote",{pluginId:t,url:l}),{ctor:yield*e.loadRemoteConstructor(t,l).pipe(a.Effect.mapError(e=>y(e,t,void 0,"load-remote",!1))),metadata:o.metadata}}),instantiatePlugin:(e,t)=>a.Effect.gen(function*(){let r=yield*a.Effect.try(()=>new t.ctor).pipe(a.Effect.mapError(t=>y(t,e,void 0,"instantiate-plugin",!1)));return r.id=e,{plugin:r,metadata:t.metadata}}),initializePlugin:(e,r)=>a.Effect.gen(function*(){let{plugin:n}=e,o=yield*eE(n.configSchema.variables,r.variables,n.id,"config").pipe(a.Effect.mapError(e=>new d({pluginId:n.id,operation:"validate-config",cause:e.zodError,retryable:!1}))),i=yield*eE(n.configSchema.secrets,r.secrets,n.id,"config").pipe(a.Effect.mapError(e=>new d({pluginId:n.id,operation:"validate-secrets",cause:e.zodError,retryable:!1}))),l=yield*t.hydrateSecrets({variables:o,secrets:i}),c=yield*eE(n.configSchema.variables,l.variables,n.id,"config").pipe(a.Effect.mapError(e=>new d({pluginId:n.id,operation:"validate-hydrated-config",cause:e.zodError,retryable:!1}))),s=yield*a.Scope.make(),u=yield*n.initialize({variables:c,secrets:l.secrets}).pipe(a.Effect.provideService(a.Scope.Scope,s),a.Effect.mapError(e=>y(e,n.id,void 0,"initialize-plugin",!1)));return{plugin:n,metadata:e.metadata,config:{variables:c,secrets:l.secrets},context:u,scope:s}})}})}){},ey=class e extends a.Effect.Service()("PluginService",{scoped:a.Effect.gen(function*(){let e=yield*eh,t=yield*es;return{loadPlugin:e.loadPlugin,instantiatePlugin:e.instantiatePlugin,initializePlugin:e.initializePlugin,shutdownPlugin:e=>a.Effect.gen(function*(){yield*e.plugin.shutdown().pipe(a.Effect.catchAll(()=>a.Effect.void)),yield*a.Scope.close(e.scope,a.Exit.succeed(void 0)),yield*t.unregister(e)}),cleanup:t.cleanup}})}){static Live=(t,r,n={})=>{let o=a.Layer.mergeAll(a.Layer.succeed(eg,t),a.Layer.succeed(ef,r),a.Layer.succeed(e_,n)),i=a.Layer.mergeAll(ec.Default,ep.Default,em.Default,es.Default).pipe(a.Layer.provide(o));return e.Default.pipe(a.Layer.provide(eh.Default),a.Layer.provide(i))}},ev=class{__registryType;pluginCache=new Map;constructor(e,t){this.runtime=e,this.registry=t}generateCacheKey(e,t){return`${e}:${a.Hash.structure(t).toString()}`}validatePluginId(e){return e in this.registry?a.Effect.succeed(String(e)):a.Effect.fail(new d({pluginId:String(e),operation:"validate-plugin-id",cause:Error(`Plugin ID '${String(e)}' not found in registry.`),retryable:!1}))}async runPromise(e){let t=await this.runtime.runPromiseExit(e);if(a.Exit.isFailure(t)){let e=a.Cause.failureOption(t.cause);if(a.Option.isSome(e))throw e.value;throw a.Cause.squash(t.cause)}return t.value}async usePlugin(e,t){let r=this.generateCacheKey(e,t),n=this.pluginCache.get(r);if(!n){let o=a.Effect.gen(this,function*(){let r=yield*ey,n=yield*this.validatePluginId(e),o=yield*r.loadPlugin(n),i=yield*r.instantiatePlugin(e,o);return yield*r.initializePlugin(i,t)}).pipe(a.Effect.provide(this.runtime));n=a.Effect.cached(o).pipe(a.Effect.flatten),this.pluginCache.set(r,n)}let o=await this.runPromise(n),i=o.plugin.createRouter(o.context);return{router:i,client:(0,l.createRouterClient)(i),metadata:o.metadata,initialized:o}}async loadPlugin(e){let t=a.Effect.gen(function*(){return yield*(yield*ey).loadPlugin(e)});return this.runPromise(t)}async instantiatePlugin(e,t){let r=a.Effect.gen(function*(){return yield*(yield*ey).instantiatePlugin(e,t)});return this.runPromise(r)}async initializePlugin(e,t){let r=a.Effect.gen(function*(){return yield*(yield*ey).initializePlugin(e,t)});return this.runPromise(r)}async shutdown(){let e=a.Effect.gen(function*(){yield*(yield*ey).cleanup()});return this.runPromise(e)}async evictPlugin(e,t){let r=this.generateCacheKey(e,t),n=a.Effect.gen(this,function*(){let e=yield*ey,t=this.pluginCache.get(r);if(t){this.pluginCache.delete(r);let n=yield*t.pipe(a.Effect.catchAll(()=>a.Effect.succeed(null)));n&&(yield*e.shutdownPlugin(n).pipe(a.Effect.catchAll(()=>a.Effect.void)))}}).pipe(a.Effect.catchAll(()=>a.Effect.void));return this.runPromise(n)}};function eb(e){return!e||e.endsWith(".js")?e:`${e.endsWith("/")?e.slice(0,-1):e}/remoteEntry.js`}function eO(e){let t={};for(let[r,n]of Object.entries(e))"module"in n&&n.module&&(t[r]=n.module);return t}function eP(e){let t={};for(let[r,n]of Object.entries(e))"module"in n?t[r]={...n,remote:n.remote?eb(n.remote):void 0}:t[r]={...n,remote:eb(n.remote)};return t}function e$(e){let t=e.secrets||{},r=eP(e.registry),n=eO(e.registry),o=ey.Live(r,t,n);return new ev(a.ManagedRuntime.make(o),r)}}};
//# sourceMappingURL=110.js.map