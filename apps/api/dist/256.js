exports.ids=["256"],exports.modules={6794(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BinaryReader=t.BinaryWriter=void 0,t.BinaryWriter=class{buffer;view;offset=0;constructor(e=1024){this.buffer=new Uint8Array(e),this.view=new DataView(this.buffer.buffer)}ensureCapacity(e){let t=this.offset+e;if(t<=this.buffer.length)return;let r=this.buffer.length;for(;r<t;)r*=2;let n=new Uint8Array(r);n.set(this.buffer),this.buffer=n,this.view=new DataView(this.buffer.buffer)}writeUint8(e){this.ensureCapacity(1),this.view.setUint8(this.offset,e),this.offset+=1}writeUint16(e){this.ensureCapacity(2),this.view.setUint16(this.offset,e,!0),this.offset+=2}writeUint32(e){this.ensureCapacity(4),this.view.setUint32(this.offset,e,!0),this.offset+=4}writeUint64(e){this.ensureCapacity(8),this.view.setBigUint64(this.offset,e,!0),this.offset+=8}writeUint128(e){this.ensureCapacity(16);let t=e&BigInt("0xFFFFFFFFFFFFFFFF"),r=e>>BigInt(64);this.writeUint64(t),this.writeUint64(r)}writeInt8(e){this.ensureCapacity(1),this.view.setInt8(this.offset,e),this.offset+=1}writeInt16(e){this.ensureCapacity(2),this.view.setInt16(this.offset,e,!0),this.offset+=2}writeInt32(e){this.ensureCapacity(4),this.view.setInt32(this.offset,e,!0),this.offset+=4}writeInt64(e){this.ensureCapacity(8),this.view.setBigInt64(this.offset,e,!0),this.offset+=8}writeInt128(e){this.ensureCapacity(16);let t=e&BigInt("0xFFFFFFFFFFFFFFFF"),r=e>>BigInt(64);this.writeInt64(t),this.writeInt64(r)}writeFloat32(e){this.ensureCapacity(4),this.view.setFloat32(this.offset,e,!0),this.offset+=4}writeFloat64(e){this.ensureCapacity(8),this.view.setFloat64(this.offset,e,!0),this.offset+=8}writeBool(e){this.writeUint8(+!!e)}writeString(e){let t=new TextEncoder().encode(e);this.writeUint32(t.length),this.ensureCapacity(t.length),this.buffer.set(t,this.offset),this.offset+=t.length}getBuffer(){return this.buffer.slice(0,this.offset)}},t.BinaryReader=class{buffer;view;offset=0;constructor(e){this.buffer=e,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength)}readUint8(){let e=this.view.getUint8(this.offset);return this.offset+=1,e}readUint16(){let e=this.view.getUint16(this.offset,!0);return this.offset+=2,e}readUint32(){let e=this.view.getUint32(this.offset,!0);return this.offset+=4,e}readUint64(){let e=this.view.getBigUint64(this.offset,!0);return this.offset+=8,e}readUint128(){let e=this.readUint64();return this.readUint64()<<BigInt(64)|e}readInt8(){let e=this.view.getInt8(this.offset);return this.offset+=1,e}readInt16(){let e=this.view.getInt16(this.offset,!0);return this.offset+=2,e}readInt32(){let e=this.view.getInt32(this.offset,!0);return this.offset+=4,e}readInt64(){let e=this.view.getBigInt64(this.offset,!0);return this.offset+=8,e}readInt128(){let e=this.readUint64();return this.readInt64()<<BigInt(64)|e}readFloat32(){let e=this.view.getFloat32(this.offset,!0);return this.offset+=4,e}readFloat64(){let e=this.view.getFloat64(this.offset,!0);return this.offset+=8,e}readBool(){return!!this.readUint8()}readString(){let e=this.readUint32(),t=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,new TextDecoder().decode(t)}getOffset(){return this.offset}}},7358(e,t,r){"use strict";t.b=void 0;var n=r(2823);Object.defineProperty(t,"b",{enumerable:!0,get:function(){return n.b}})},7223(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registry=t.TypeRegistry=void 0;class r{handlers=new Map;register(e,t){this.handlers.set(e,t)}getHandler(e){let t=this.handlers.get(e);if(!t)throw Error(`No handler registered for type: ${e}`);return t}}t.TypeRegistry=r,t.registry=new r,t.registry.register("u8",{write:(e,t)=>{if(t<0||t>255||!Number.isInteger(t))throw Error("Value out of range for u8");e.writeUint8(t)},read:e=>e.readUint8()}),t.registry.register("u16",{write:(e,t)=>{if(t<0||t>65535||!Number.isInteger(t))throw Error("Value out of range for u16");e.writeUint16(t)},read:e=>e.readUint16()}),t.registry.register("u32",{write:(e,t)=>{if(t<0||t>0xffffffff||!Number.isInteger(t))throw Error("Value out of range for u32");e.writeUint32(t)},read:e=>e.readUint32()}),t.registry.register("u64",{write:(e,t)=>{if(t<0n||t>0xffffffffffffffffn)throw Error("Value out of range for u64");e.writeUint64(t)},read:e=>e.readUint64()}),t.registry.register("u128",{write:(e,t)=>{if(t<0n||t>0xffffffffffffffffffffffffffffffffn)throw Error("Value out of range for u128");e.writeUint128(t)},read:e=>e.readUint128()}),t.registry.register("i8",{write:(e,t)=>{if(t<-128||t>127||!Number.isInteger(t))throw Error("Value out of range for i8");e.writeInt8(t)},read:e=>e.readInt8()}),t.registry.register("i16",{write:(e,t)=>{if(t<-32768||t>32767||!Number.isInteger(t))throw Error("Value out of range for i16");e.writeInt16(t)},read:e=>e.readInt16()}),t.registry.register("i32",{write:(e,t)=>{if(t<-0x80000000||t>0x7fffffff||!Number.isInteger(t))throw Error("Value out of range for i32");e.writeInt32(t)},read:e=>e.readInt32()}),t.registry.register("i64",{write:(e,t)=>{if(t<-0x8000000000000000n||t>0x7fffffffffffffffn)throw Error("Value out of range for i64");e.writeInt64(t)},read:e=>e.readInt64()}),t.registry.register("i128",{write:(e,t)=>{if(t<-0x80000000000000000000000000000000n||t>0x7fffffffffffffffffffffffffffffffn)throw Error("Value out of range for i128");e.writeInt128(t)},read:e=>e.readInt128()}),t.registry.register("f32",{write:(e,t)=>e.writeFloat32(t),read:e=>e.readFloat32()}),t.registry.register("f64",{write:(e,t)=>{if(Number.isNaN(t))throw Error("For portability reasons we do not allow serializing NaN values.");e.writeFloat64(t)},read:e=>e.readFloat64()}),t.registry.register("bool",{write:(e,t)=>e.writeBool(t),read:e=>e.readBool()}),t.registry.register("string",{write:(e,t)=>e.writeString(t),read:e=>e.readString()}),t.registry.register("unit",{write:()=>{},read:()=>({})}),t.registry.register("struct",{write:(e,r,n)=>{if(n)for(let[i,o]of Object.entries(n))t.registry.getHandler(o.type).write(e,r[i],o.options)},read:(e,r)=>{if(!r)return{};let n={};for(let[i,o]of Object.entries(r)){let r=t.registry.getHandler(o.type);n[i]=r.read(e,o.options)}return n}}),t.registry.register("vec",{write:(e,r,n)=>{if(!n)return;let{elementType:i,elementOptions:o}=n,s=(ArrayBuffer.isView(r),r.length);e.writeUint32(s);let a=t.registry.getHandler(i);if(ArrayBuffer.isView(r))for(let t=0;t<s;t++)a.write(e,r[t],o);else for(let t of r)a.write(e,t,o)},read:(e,r)=>{if(!r)return[];let{elementType:n,elementOptions:i}=r,o=e.readUint32(),s=t.registry.getHandler(n),a=Array.from({length:o},()=>s.read(e,i));switch(n){case"u8":return new Uint8Array(a);case"u16":return new Uint16Array(a);case"u32":return new Uint32Array(a);case"i8":return new Int8Array(a);case"i16":return new Int16Array(a);case"i32":return new Int32Array(a);case"i64":return new BigInt64Array(a);case"f32":return new Float32Array(a);case"f64":return new Float64Array(a);default:return a}}}),t.registry.register("set",{write:(e,r,n)=>{if(!n)return;let{elementType:i,elementOptions:o}=n,s=Array.from(r).sort();e.writeUint32(s.length);let a=t.registry.getHandler(i);for(let t of s)a.write(e,t,o)},read:(e,r)=>{if(!r)return new Set;let{elementType:n,elementOptions:i}=r,o=e.readUint32(),s=t.registry.getHandler(n);return new Set(Array.from({length:o},()=>s.read(e,i)))}}),t.registry.register("map",{write:(e,r,n)=>{if(!n)return;let{keyType:i,keyOptions:o,valueType:s,valueOptions:a}=n,l=Array.from(r.entries()).sort();e.writeUint32(l.length);let c=t.registry.getHandler(i),u=t.registry.getHandler(s);for(let[t,r]of l)c.write(e,t,o),u.write(e,r,a)},read:(e,r)=>{if(!r)return new Map;let{keyType:n,keyOptions:i,valueType:o,valueOptions:s}=r,a=e.readUint32(),l=t.registry.getHandler(n),c=t.registry.getHandler(o);return new Map(Array.from({length:a},()=>[l.read(e,i),c.read(e,s)]))}}),t.registry.register("option",{write:(e,r,n)=>{if(!n)return;let{valueType:i,valueOptions:o}=n,s=null!==r;e.writeUint8(+!!s),s&&t.registry.getHandler(i).write(e,r,o)},read:(e,r)=>{if(!r)return null;let{valueType:n,valueOptions:i}=r;return 1===e.readUint8()?t.registry.getHandler(n).read(e,i):null}}),t.registry.register("enum",{write:(e,r,n)=>{if(!n)return;let i=Object.keys(r)[0],o=r[i],s=n.variants.find(e=>e.name===i);if(!s)throw Error(`Unknown enum variant: ${i}`);e.writeUint8(s.index),"unit"!==s.type&&t.registry.getHandler(s.type).write(e,o,s.options)},read:(e,r)=>{if(!r)return{};let n=e.readUint8(),i=r.variants.find(e=>e.index===n);if(!i)throw Error(`Unknown enum variant index: ${n}`);if("unit"===i.type)return{[i.name]:{}};let o=t.registry.getHandler(i.type).read(e,i.options);return{[i.name]:o}}}),t.registry.register("tuple",{write:(e,r,n)=>{if(n){if(r.length!==n.length)throw Error(`Tuple length mismatch: expected ${n.length}, got ${r.length}`);for(let i=0;i<n.length;i++){let o=n[i];if(!o)throw Error(`Missing type information for tuple element at index ${i}`);t.registry.getHandler(o.type).write(e,r[i],o.options)}}},read:(e,r)=>{if(!r)return[];let n=[];for(let i of r){let r=t.registry.getHandler(i.type);n.push(r.read(e,i.options))}return n}}),t.registry.register("array",{write:(e,r,n)=>{if(!n)return;let{elementType:i,elementOptions:o,length:s}=n;if(r.length!==s)throw Error(`Array length mismatch: expected ${s}, got ${r.length}`);let a=t.registry.getHandler(i);for(let t of r)a.write(e,t,o)},read:(e,r)=>{if(!r)return[];let{elementType:n,elementOptions:i,length:o}=r,s=t.registry.getHandler(n);return Array.from({length:o},()=>s.read(e,i))}}),t.registry.register("bytes",{write:(e,t,r)=>{let n=t.length;if(r?.length!=null){if(n!==r.length)throw Error(`Bytes length mismatch: expected ${r.length}, got ${n}`);for(let r=0;r<n;r++)e.writeUint8(t[r])}else{e.writeUint32(n);for(let r=0;r<n;r++)e.writeUint8(t[r])}},read:(e,t)=>{let r=t?.length!=null?t.length:e.readUint32(),n=new Uint8Array(r);for(let t=0;t<r;t++)n[t]=e.readUint8();return n}}),t.registry.register("nativeEnum",{write:(e,t,r)=>{if(!r)return;let{valueToIndexMap:n}=r,i=n.get(t);if(void 0===i)throw Error(`Invalid enum value: ${String(t)}`);e.writeUint8(i)},read:(e,t)=>{if(!t)return null;let{indexToValueMap:r}=t,n=e.readUint8(),i=r.get(n);if(void 0===i)throw Error(`Invalid enum index: ${n}`);return i}})},2823(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.b=t.Schema=void 0;let n=r(6794),i=r(7223);class o{type;options;registry;constructor(e,t,r){this.type=e,this.options=t,this.registry=r}serialize(e){let t=new n.BinaryWriter;return this.registry.getHandler(this.type).write(t,e,this.options),t.getBuffer()}deserialize(e){let t=new n.BinaryReader(e);return this.registry.getHandler(this.type).read(t,this.options)}}t.Schema=o,t.b={u8:()=>new o("u8",null,i.registry),u16:()=>new o("u16",null,i.registry),u32:()=>new o("u32",null,i.registry),u64:()=>new o("u64",null,i.registry),u128:()=>new o("u128",null,i.registry),i8:()=>new o("i8",null,i.registry),i16:()=>new o("i16",null,i.registry),i32:()=>new o("i32",null,i.registry),i64:()=>new o("i64",null,i.registry),i128:()=>new o("i128",null,i.registry),f32:()=>new o("f32",null,i.registry),f64:()=>new o("f64",null,i.registry),bool:()=>new o("bool",null,i.registry),string:()=>new o("string",null,i.registry),unit:()=>new o("unit",null,i.registry),vec:e=>new o("vec",{elementType:e.type,elementOptions:e.options},i.registry),hashSet:e=>new o("set",{elementType:e.type,elementOptions:e.options},i.registry),hashMap:(e,t)=>new o("map",{keyType:e.type,keyOptions:e.options,valueType:t.type,valueOptions:t.options},i.registry),option:e=>new o("option",{valueType:e.type,valueOptions:e.options},i.registry),array:(e,t)=>new o("array",{elementType:e.type,elementOptions:e.options,length:t},i.registry),bytes:e=>new o("bytes",null!=e?{length:e}:{},i.registry),enum:e=>new o("enum",{variants:Object.entries(e).map(([e,t],r)=>({index:r,name:e,type:t.type,options:t.options}))},i.registry),struct:e=>new o("struct",Object.fromEntries(Object.entries(e).map(([e,t])=>[e,{type:t.type,options:t.options}])),i.registry),tuple:(...e)=>new o("tuple",e.map(e=>({type:e.type,options:e.options})),i.registry),nativeEnum:e=>{let t=Object.entries(e).filter(([e])=>"string"==typeof e&&Number.isNaN(Number(e))),r=t.map(([e,t])=>t),n=r.some(e=>"string"==typeof e),s=r.some(e=>"number"==typeof e);if(n&&s)throw Error("Mixed string/numeric enums are not supported");let a=new Map,l=new Map;if(t.forEach(([e,t],r)=>{a.set(t,r),l.set(r,t)}),t.length>255)throw Error("Borsh only supports enums with up to 255 variants");return new o("nativeEnum",{enumObj:e,valueToIndexMap:a,indexToValueMap:l},i.registry)}}},9541(e,t,r){"use strict";var n=r(3960),i=r(3023),o=r(3203);e.exports=r(140)||n.call(o,i)},3023(e){"use strict";e.exports=Function.prototype.apply},3203(e){"use strict";e.exports=Function.prototype.call},4527(e,t,r){"use strict";var n=r(3960),i=r(306),o=r(3203),s=r(9541);e.exports=function(e){if(e.length<1||"function"!=typeof e[0])throw new i("a function is required");return s(n,o,e)}},140(e){"use strict";e.exports="undefined"!=typeof Reflect&&Reflect&&Reflect.apply},381(e,t,r){"use strict";var n=r(3484),i=r(4527),o=i([n("%String.prototype.indexOf%")]);e.exports=function(e,t){var r=n(e,!!t);return"function"==typeof r&&o(e,".prototype.")>-1?i([r]):r}},6946(e,t,r){"use strict";var n,i=r(4527),o=r(7015);try{n=[].__proto__===Array.prototype}catch(e){if(!e||"object"!=typeof e||!("code"in e)||"ERR_PROTO_ACCESS"!==e.code)throw e}var s=!!n&&o&&o(Object.prototype,"__proto__"),a=Object,l=a.getPrototypeOf;e.exports=s&&"function"==typeof s.get?i([s.get]):"function"==typeof l&&function(e){return l(null==e?e:a(e))}},5282(e){"use strict";var t=Object.defineProperty||!1;if(t)try{t({},"a",{value:1})}catch(e){t=!1}e.exports=t},8384(e){"use strict";e.exports=EvalError},7508(e){"use strict";e.exports=Error},8665(e){"use strict";e.exports=RangeError},6793(e){"use strict";e.exports=ReferenceError},1609(e){"use strict";e.exports=SyntaxError},306(e){"use strict";e.exports=TypeError},5794(e){"use strict";e.exports=URIError},661(e){"use strict";e.exports=Object},6028(e){"use strict";var t=Object.prototype.toString,r=Math.max,n=function(e,t){for(var r=[],n=0;n<e.length;n+=1)r[n]=e[n];for(var i=0;i<t.length;i+=1)r[i+e.length]=t[i];return r},i=function(e,t){for(var r=[],n=t||0,i=0;n<e.length;n+=1,i+=1)r[i]=e[n];return r},o=function(e,t){for(var r="",n=0;n<e.length;n+=1)r+=e[n],n+1<e.length&&(r+=t);return r};e.exports=function(e){var s,a=this;if("function"!=typeof a||"[object Function]"!==t.apply(a))throw TypeError("Function.prototype.bind called on incompatible "+a);for(var l=i(arguments,1),c=r(0,a.length-l.length),u=[],d=0;d<c;d++)u[d]="$"+d;if(s=Function("binder","return function ("+o(u,",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof s){var t=a.apply(this,n(l,arguments));return Object(t)===t?t:this}return a.apply(e,n(l,arguments))}),a.prototype){var h=function(){};h.prototype=a.prototype,s.prototype=new h,h.prototype=null}return s}},3960(e,t,r){"use strict";var n=r(6028);e.exports=Function.prototype.bind||n},3484(e,t,r){"use strict";var n,i=r(661),o=r(7508),s=r(8384),a=r(8665),l=r(6793),c=r(1609),u=r(306),d=r(5794),h=r(4080),f=r(6030),p=r(5274),m=r(8356),y=r(8262),g=r(9856),v=r(9155),b=Function,w=function(e){try{return b('"use strict"; return ('+e+").constructor;")()}catch(e){}},_=r(7015),E=r(5282),P=function(){throw new u},T=_?function(){try{return arguments.callee,P}catch(e){try{return _(arguments,"callee").get}catch(e){return P}}}():P,x=r(6926)(),S=r(5968),O=r(6196),A=r(5212),I=r(3023),R=r(3203),N={},C="undefined"!=typeof Uint8Array&&S?S(Uint8Array):n,k={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?n:ArrayBuffer,"%ArrayIteratorPrototype%":x&&S?S([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":N,"%AsyncGenerator%":N,"%AsyncGeneratorFunction%":N,"%AsyncIteratorPrototype%":N,"%Atomics%":"undefined"==typeof Atomics?n:Atomics,"%BigInt%":"undefined"==typeof BigInt?n:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?n:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":o,"%eval%":eval,"%EvalError%":s,"%Float16Array%":"undefined"==typeof Float16Array?n:Float16Array,"%Float32Array%":"undefined"==typeof Float32Array?n:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?n:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?n:FinalizationRegistry,"%Function%":b,"%GeneratorFunction%":N,"%Int8Array%":"undefined"==typeof Int8Array?n:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?n:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":x&&S?S(S([][Symbol.iterator]())):n,"%JSON%":"object"==typeof JSON?JSON:n,"%Map%":"undefined"==typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&x&&S?S(new Map()[Symbol.iterator]()):n,"%Math%":Math,"%Number%":Number,"%Object%":i,"%Object.getOwnPropertyDescriptor%":_,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?n:Promise,"%Proxy%":"undefined"==typeof Proxy?n:Proxy,"%RangeError%":a,"%ReferenceError%":l,"%Reflect%":"undefined"==typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&x&&S?S(new Set()[Symbol.iterator]()):n,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":x&&S?S(""[Symbol.iterator]()):n,"%Symbol%":x?Symbol:n,"%SyntaxError%":c,"%ThrowTypeError%":T,"%TypedArray%":C,"%TypeError%":u,"%Uint8Array%":"undefined"==typeof Uint8Array?n:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?n:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?n:Uint32Array,"%URIError%":d,"%WeakMap%":"undefined"==typeof WeakMap?n:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?n:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?n:WeakSet,"%Function.prototype.call%":R,"%Function.prototype.apply%":I,"%Object.defineProperty%":E,"%Object.getPrototypeOf%":O,"%Math.abs%":h,"%Math.floor%":f,"%Math.max%":p,"%Math.min%":m,"%Math.pow%":y,"%Math.round%":g,"%Math.sign%":v,"%Reflect.getPrototypeOf%":A};if(S)try{null.error}catch(e){var z=S(S(e));k["%Error.prototype%"]=z}var j=function e(t){var r;if("%AsyncFunction%"===t)r=w("async function () {}");else if("%GeneratorFunction%"===t)r=w("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=w("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var i=e("%AsyncGenerator%");i&&S&&(r=S(i.prototype))}return k[t]=r,r},U={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},B=r(3960),D=r(6322),G=B.call(R,Array.prototype.concat),F=B.call(I,Array.prototype.splice),L=B.call(R,String.prototype.replace),M=B.call(R,String.prototype.slice),q=B.call(R,RegExp.prototype.exec),H=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,$=/\\(\\)?/g,K=function(e){var t=M(e,0,1),r=M(e,-1);if("%"===t&&"%"!==r)throw new c("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new c("invalid intrinsic syntax, expected opening `%`");var n=[];return L(e,H,function(e,t,r,i){n[n.length]=r?L(i,$,"$1"):t||e}),n},V=function(e,t){var r,n=e;if(D(U,n)&&(n="%"+(r=U[n])[0]+"%"),D(k,n)){var i=k[n];if(i===N&&(i=j(n)),void 0===i&&!t)throw new u("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:i}}throw new c("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new u("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new u('"allowMissing" argument must be a boolean');if(null===q(/^%?[^%]*%?$/,e))throw new c("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=K(e),n=r.length>0?r[0]:"",i=V("%"+n+"%",t),o=i.name,s=i.value,a=!1,l=i.alias;l&&(n=l[0],F(r,G([0,1],l)));for(var d=1,h=!0;d<r.length;d+=1){var f=r[d],p=M(f,0,1),m=M(f,-1);if(('"'===p||"'"===p||"`"===p||'"'===m||"'"===m||"`"===m)&&p!==m)throw new c("property names with quotes must have matching quotes");if("constructor"!==f&&h||(a=!0),n+="."+f,D(k,o="%"+n+"%"))s=k[o];else if(null!=s){if(!(f in s)){if(!t)throw new u("base intrinsic for "+e+" exists, but the property is not available.");return}if(_&&d+1>=r.length){var y=_(s,f);s=(h=!!y)&&"get"in y&&!("originalValue"in y.get)?y.get:s[f]}else h=D(s,f),s=s[f];h&&!a&&(k[o]=s)}}return s}},6196(e,t,r){"use strict";e.exports=r(661).getPrototypeOf||null},5212(e){"use strict";e.exports="undefined"!=typeof Reflect&&Reflect.getPrototypeOf||null},5968(e,t,r){"use strict";var n=r(5212),i=r(6196),o=r(6946);e.exports=n?function(e){return n(e)}:i?function(e){if(!e||"object"!=typeof e&&"function"!=typeof e)throw TypeError("getProto: not an object");return i(e)}:o?function(e){return o(e)}:null},4705(e){"use strict";e.exports=Object.getOwnPropertyDescriptor},7015(e,t,r){"use strict";var n=r(4705);if(n)try{n([],"length")}catch(e){n=null}e.exports=n},6926(e,t,r){"use strict";var n="undefined"!=typeof Symbol&&Symbol,i=r(7988);e.exports=function(){return"function"==typeof n&&"function"==typeof Symbol&&"symbol"==typeof n("foo")&&"symbol"==typeof Symbol("bar")&&i()}},7988(e){"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t||"[object Symbol]"!==Object.prototype.toString.call(t)||"[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(var n in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var i=Object.getOwnPropertySymbols(e);if(1!==i.length||i[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(e,t);if(42!==o.value||!0!==o.enumerable)return!1}return!0}},6322(e,t,r){"use strict";var n=Function.prototype.call,i=Object.prototype.hasOwnProperty;e.exports=r(3960).call(n,i)},4080(e){"use strict";e.exports=Math.abs},6030(e){"use strict";e.exports=Math.floor},4365(e){"use strict";e.exports=Number.isNaN||function(e){return e!=e}},5274(e){"use strict";e.exports=Math.max},8356(e){"use strict";e.exports=Math.min},8262(e){"use strict";e.exports=Math.pow},9856(e){"use strict";e.exports=Math.round},9155(e,t,r){"use strict";var n=r(4365);e.exports=function(e){return n(e)||0===e?e:e<0?-1:1}},7563(e,t,r){var n="function"==typeof Map&&Map.prototype,i=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,o=n&&i&&"function"==typeof i.get?i.get:null,s=n&&Map.prototype.forEach,a="function"==typeof Set&&Set.prototype,l=Object.getOwnPropertyDescriptor&&a?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,c=a&&l&&"function"==typeof l.get?l.get:null,u=a&&Set.prototype.forEach,d="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,h="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,f="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,p=Boolean.prototype.valueOf,m=Object.prototype.toString,y=Function.prototype.toString,g=String.prototype.match,v=String.prototype.slice,b=String.prototype.replace,w=String.prototype.toUpperCase,_=String.prototype.toLowerCase,E=RegExp.prototype.test,P=Array.prototype.concat,T=Array.prototype.join,x=Array.prototype.slice,S=Math.floor,O="function"==typeof BigInt?BigInt.prototype.valueOf:null,A=Object.getOwnPropertySymbols,I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,R="function"==typeof Symbol&&"object"==typeof Symbol.iterator,N="function"==typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===R?"object":"symbol")?Symbol.toStringTag:null,C=Object.prototype.propertyIsEnumerable,k=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function z(e,t){if(e===1/0||e===-1/0||e!=e||e&&e>-1e3&&e<1e3||E.call(/e/,t))return t;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof e){var n=e<0?-S(-e):S(e);if(n!==e){var i=String(n),o=v.call(t,i.length+1);return b.call(i,r,"$&_")+"."+b.call(b.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return b.call(t,r,"$&_")}var j=r(4557),U=j.custom,B=H(U)?U:null,D={__proto__:null,double:'"',single:"'"},G={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};function F(e,t,r){var n=D[r.quoteStyle||t];return n+e+n}function L(e){return!N||!("object"==typeof e&&(N in e||void 0!==e[N]))}function M(e){return"[object Array]"===V(e)&&L(e)}function q(e){return"[object RegExp]"===V(e)&&L(e)}function H(e){if(R)return e&&"object"==typeof e&&e instanceof Symbol;if("symbol"==typeof e)return!0;if(!e||"object"!=typeof e||!I)return!1;try{return I.call(e),!0}catch(e){}return!1}e.exports=function e(t,r,n,i){var a,l,m,w,E,S=r||{};if(K(S,"quoteStyle")&&!K(D,S.quoteStyle))throw TypeError('option "quoteStyle" must be "single" or "double"');if(K(S,"maxStringLength")&&("number"==typeof S.maxStringLength?S.maxStringLength<0&&S.maxStringLength!==1/0:null!==S.maxStringLength))throw TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var A=!K(S,"customInspect")||S.customInspect;if("boolean"!=typeof A&&"symbol"!==A)throw TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(K(S,"indent")&&null!==S.indent&&"	"!==S.indent&&!(parseInt(S.indent,10)===S.indent&&S.indent>0))throw TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(K(S,"numericSeparator")&&"boolean"!=typeof S.numericSeparator)throw TypeError('option "numericSeparator", if provided, must be `true` or `false`');var U=S.numericSeparator;if(void 0===t)return"undefined";if(null===t)return"null";if("boolean"==typeof t)return t?"true":"false";if("string"==typeof t)return function e(t,r){if(t.length>r.maxStringLength){var n=t.length-r.maxStringLength;return e(v.call(t,0,r.maxStringLength),r)+("... "+n)+" more character"+(n>1?"s":"")}var i=G[r.quoteStyle||"single"];return i.lastIndex=0,F(b.call(b.call(t,i,"\\$1"),/[\x00-\x1f]/g,Z),"single",r)}(t,S);if("number"==typeof t){if(0===t)return 1/0/t>0?"0":"-0";var $=String(t);return U?z(t,$):$}if("bigint"==typeof t){var et=String(t)+"n";return U?z(t,et):et}var er=void 0===S.depth?5:S.depth;if(void 0===n&&(n=0),n>=er&&er>0&&"object"==typeof t)return M(t)?"[Array]":"[Object]";var en=function(e,t){var r;if("	"===e.indent)r="	";else{if("number"!=typeof e.indent||!(e.indent>0))return null;r=T.call(Array(e.indent+1)," ")}return{base:r,prev:T.call(Array(t+1),r)}}(S,n);if(void 0===i)i=[];else if(W(i,t)>=0)return"[Circular]";function ei(t,r,o){if(r&&(i=x.call(i)).push(r),o){var s={depth:S.depth};return K(S,"quoteStyle")&&(s.quoteStyle=S.quoteStyle),e(t,s,n+1,i)}return e(t,S,n+1,i)}if("function"==typeof t&&!q(t)){var eo=function(e){if(e.name)return e.name;var t=g.call(y.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}(t),es=ee(t,ei);return"[Function"+(eo?": "+eo:" (anonymous)")+"]"+(es.length>0?" { "+T.call(es,", ")+" }":"")}if(H(t)){var ea=R?b.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):I.call(t);return"object"!=typeof t||R?ea:Y(ea)}if((el=t)&&"object"==typeof el&&("undefined"!=typeof HTMLElement&&el instanceof HTMLElement||"string"==typeof el.nodeName&&"function"==typeof el.getAttribute)){for(var el,ec,eu="<"+_.call(String(t.nodeName)),ed=t.attributes||[],eh=0;eh<ed.length;eh++){eu+=" "+ed[eh].name+"="+F((ec=ed[eh].value,b.call(String(ec),/"/g,"&quot;")),"double",S)}return eu+=">",t.childNodes&&t.childNodes.length&&(eu+="..."),eu+="</"+_.call(String(t.nodeName))+">"}if(M(t)){if(0===t.length)return"[]";var ef=ee(t,ei);return en&&!function(e){for(var t=0;t<e.length;t++)if(W(e[t],"\n")>=0)return!1;return!0}(ef)?"["+Q(ef,en)+"]":"[ "+T.call(ef,", ")+" ]"}if("[object Error]"===V(a=t)&&L(a)){var ep=ee(t,ei);return"cause"in Error.prototype||!("cause"in t)||C.call(t,"cause")?0===ep.length?"["+String(t)+"]":"{ ["+String(t)+"] "+T.call(ep,", ")+" }":"{ ["+String(t)+"] "+T.call(P.call("[cause]: "+ei(t.cause),ep),", ")+" }"}if("object"==typeof t&&A){if(B&&"function"==typeof t[B]&&j)return j(t,{depth:er-n});else if("symbol"!==A&&"function"==typeof t.inspect)return t.inspect()}if(function(e){if(!o||!e||"object"!=typeof e)return!1;try{o.call(e);try{c.call(e)}catch(e){return!0}return e instanceof Map}catch(e){}return!1}(t)){var em=[];return s&&s.call(t,function(e,r){em.push(ei(r,t,!0)+" => "+ei(e,t))}),J("Map",o.call(t),em,en)}if(function(e){if(!c||!e||"object"!=typeof e)return!1;try{c.call(e);try{o.call(e)}catch(e){return!0}return e instanceof Set}catch(e){}return!1}(t)){var ey=[];return u&&u.call(t,function(e){ey.push(ei(e,t))}),J("Set",c.call(t),ey,en)}if(function(e){if(!d||!e||"object"!=typeof e)return!1;try{d.call(e,d);try{h.call(e,h)}catch(e){return!0}return e instanceof WeakMap}catch(e){}return!1}(t))return X("WeakMap");if(function(e){if(!h||!e||"object"!=typeof e)return!1;try{h.call(e,h);try{d.call(e,d)}catch(e){return!0}return e instanceof WeakSet}catch(e){}return!1}(t))return X("WeakSet");if(function(e){if(!f||!e||"object"!=typeof e)return!1;try{return f.call(e),!0}catch(e){}return!1}(t))return X("WeakRef");if("[object Number]"===V(l=t)&&L(l))return Y(ei(Number(t)));if(function(e){if(!e||"object"!=typeof e||!O)return!1;try{return O.call(e),!0}catch(e){}return!1}(t))return Y(ei(O.call(t)));if("[object Boolean]"===V(m=t)&&L(m))return Y(p.call(t));if("[object String]"===V(w=t)&&L(w))return Y(ei(String(t)));if("undefined"!=typeof window&&t===window)return"{ [object Window] }";if("undefined"!=typeof globalThis&&t===globalThis||"undefined"!=typeof global&&t===global)return"{ [object globalThis] }";if(!("[object Date]"===V(E=t)&&L(E))&&!q(t)){var eg=ee(t,ei),ev=k?k(t)===Object.prototype:t instanceof Object||t.constructor===Object,eb=t instanceof Object?"":"null prototype",ew=!ev&&N&&Object(t)===t&&N in t?v.call(V(t),8,-1):eb?"Object":"",e_=(ev||"function"!=typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"")+(ew||eb?"["+T.call(P.call([],ew||[],eb||[]),": ")+"] ":"");return 0===eg.length?e_+"{}":en?e_+"{"+Q(eg,en)+"}":e_+"{ "+T.call(eg,", ")+" }"}return String(t)};var $=Object.prototype.hasOwnProperty||function(e){return e in this};function K(e,t){return $.call(e,t)}function V(e){return m.call(e)}function W(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return -1}function Z(e){var t=e.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return r?"\\"+r:"\\x"+(t<16?"0":"")+w.call(t.toString(16))}function Y(e){return"Object("+e+")"}function X(e){return e+" { ? }"}function J(e,t,r,n){return e+" ("+t+") {"+(n?Q(r,n):T.call(r,", "))+"}"}function Q(e,t){if(0===e.length)return"";var r="\n"+t.prev+t.base;return r+T.call(e,","+r)+"\n"+t.prev}function ee(e,t){var r,n=M(e),i=[];if(n){i.length=e.length;for(var o=0;o<e.length;o++)i[o]=K(e,o)?t(e[o],e):""}var s="function"==typeof A?A(e):[];if(R){r={};for(var a=0;a<s.length;a++)r["$"+s[a]]=s[a]}for(var l in e)if(K(e,l)&&(!n||String(Number(l))!==l||!(l<e.length)))if(R&&r["$"+l]instanceof Symbol)continue;else E.call(/[^\w$]/,l)?i.push(t(l,e)+": "+t(e[l],e)):i.push(l+": "+t(e[l],e));if("function"==typeof A)for(var c=0;c<s.length;c++)C.call(e,s[c])&&i.push("["+t(s[c])+"]: "+t(e[s[c]],e));return i}},4557(e,t,r){e.exports=r(9023).inspect},6089(e){"use strict";var t=String.prototype.replace,r=/%20/g,n="RFC3986";e.exports={default:n,formatters:{RFC1738:function(e){return t.call(e,r,"+")},RFC3986:function(e){return String(e)}},RFC1738:"RFC1738",RFC3986:n}},9537(e,t,r){"use strict";var n=r(7416),i=r(38);e.exports={formats:r(6089),parse:i,stringify:n}},38(e,t,r){"use strict";var n=r(5052),i=Object.prototype.hasOwnProperty,o=Array.isArray,s={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:n.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},a=function(e,t,r){if(e&&"string"==typeof e&&t.comma&&e.indexOf(",")>-1)return e.split(",");if(t.throwOnLimitExceeded&&r>=t.arrayLimit)throw RangeError("Array limit exceeded. Only "+t.arrayLimit+" element"+(1===t.arrayLimit?"":"s")+" allowed in an array.");return e},l=function(e,t){var r={__proto__:null},l=t.ignoreQueryPrefix?e.replace(/^\?/,""):e;l=l.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var c=t.parameterLimit===1/0?void 0:t.parameterLimit,u=l.split(t.delimiter,t.throwOnLimitExceeded?c+1:c);if(t.throwOnLimitExceeded&&u.length>c)throw RangeError("Parameter limit exceeded. Only "+c+" parameter"+(1===c?"":"s")+" allowed.");var d=-1,h=t.charset;if(t.charsetSentinel)for(f=0;f<u.length;++f)0===u[f].indexOf("utf8=")&&("utf8=%E2%9C%93"===u[f]?h="utf-8":"utf8=%26%2310003%3B"===u[f]&&(h="iso-8859-1"),d=f,f=u.length);for(f=0;f<u.length;++f)if(f!==d){var f,p,m,y=u[f],g=y.indexOf("]="),v=-1===g?y.indexOf("="):g+1;-1===v?(p=t.decoder(y,s.decoder,h,"key"),m=t.strictNullHandling?null:""):(p=t.decoder(y.slice(0,v),s.decoder,h,"key"),m=n.maybeMap(a(y.slice(v+1),t,o(r[p])?r[p].length:0),function(e){return t.decoder(e,s.decoder,h,"value")})),m&&t.interpretNumericEntities&&"iso-8859-1"===h&&(m=String(m).replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})),y.indexOf("[]=")>-1&&(m=o(m)?[m]:m);var b=i.call(r,p);b&&"combine"===t.duplicates?r[p]=n.combine(r[p],m):b&&"last"!==t.duplicates||(r[p]=m)}return r},c=function(e,t,r,i){var o=0;if(e.length>0&&"[]"===e[e.length-1]){var s=e.slice(0,-1).join("");o=Array.isArray(t)&&t[s]?t[s].length:0}for(var l=i?t:a(t,r,o),c=e.length-1;c>=0;--c){var u,d=e[c];if("[]"===d&&r.parseArrays)u=r.allowEmptyArrays&&(""===l||r.strictNullHandling&&null===l)?[]:n.combine([],l);else{u=r.plainObjects?{__proto__:null}:{};var h="["===d.charAt(0)&&"]"===d.charAt(d.length-1)?d.slice(1,-1):d,f=r.decodeDotInKeys?h.replace(/%2E/g,"."):h,p=parseInt(f,10);r.parseArrays||""!==f?!isNaN(p)&&d!==f&&String(p)===f&&p>=0&&r.parseArrays&&p<=r.arrayLimit?(u=[])[p]=l:"__proto__"!==f&&(u[f]=l):u={0:l}}l=u}return l},u=function(e,t,r,n){if(e){var o=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,s=/(\[[^[\]]*])/g,a=r.depth>0&&/(\[[^[\]]*])/.exec(o),l=a?o.slice(0,a.index):o,u=[];if(l){if(!r.plainObjects&&i.call(Object.prototype,l)&&!r.allowPrototypes)return;u.push(l)}for(var d=0;r.depth>0&&null!==(a=s.exec(o))&&d<r.depth;){if(d+=1,!r.plainObjects&&i.call(Object.prototype,a[1].slice(1,-1))&&!r.allowPrototypes)return;u.push(a[1])}if(a){if(!0===r.strictDepth)throw RangeError("Input depth exceeded depth option of "+r.depth+" and strictDepth is true");u.push("["+o.slice(a.index)+"]")}return c(u,t,r,n)}},d=function(e){if(!e)return s;if(void 0!==e.allowEmptyArrays&&"boolean"!=typeof e.allowEmptyArrays)throw TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==e.decodeDotInKeys&&"boolean"!=typeof e.decodeDotInKeys)throw TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(void 0!==e.throwOnLimitExceeded&&"boolean"!=typeof e.throwOnLimitExceeded)throw TypeError("`throwOnLimitExceeded` option must be a boolean");var t=void 0===e.charset?s.charset:e.charset,r=void 0===e.duplicates?s.duplicates:e.duplicates;if("combine"!==r&&"first"!==r&&"last"!==r)throw TypeError("The duplicates option must be either combine, first, or last");return{allowDots:void 0===e.allowDots?!0===e.decodeDotInKeys||s.allowDots:!!e.allowDots,allowEmptyArrays:"boolean"==typeof e.allowEmptyArrays?!!e.allowEmptyArrays:s.allowEmptyArrays,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:s.allowPrototypes,allowSparse:"boolean"==typeof e.allowSparse?e.allowSparse:s.allowSparse,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:s.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:s.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:s.comma,decodeDotInKeys:"boolean"==typeof e.decodeDotInKeys?e.decodeDotInKeys:s.decodeDotInKeys,decoder:"function"==typeof e.decoder?e.decoder:s.decoder,delimiter:"string"==typeof e.delimiter||n.isRegExp(e.delimiter)?e.delimiter:s.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:s.depth,duplicates:r,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:s.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:s.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:s.plainObjects,strictDepth:"boolean"==typeof e.strictDepth?!!e.strictDepth:s.strictDepth,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:s.strictNullHandling,throwOnLimitExceeded:"boolean"==typeof e.throwOnLimitExceeded&&e.throwOnLimitExceeded}};e.exports=function(e,t){var r=d(t);if(""===e||null==e)return r.plainObjects?{__proto__:null}:{};for(var i="string"==typeof e?l(e,r):e,o=r.plainObjects?{__proto__:null}:{},s=Object.keys(i),a=0;a<s.length;++a){var c=s[a],h=u(c,i[c],r,"string"==typeof e);o=n.merge(o,h,r)}return!0===r.allowSparse?o:n.compact(o)}},7416(e,t,r){"use strict";var n=r(5242),i=r(5052),o=r(6089),s=Object.prototype.hasOwnProperty,a={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},l=Array.isArray,c=Array.prototype.push,u=function(e,t){c.apply(e,l(t)?t:[t])},d=Date.prototype.toISOString,h=o.default,f={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:i.encode,encodeValuesOnly:!1,filter:void 0,format:h,formatter:o.formatters[h],indices:!1,serializeDate:function(e){return d.call(e)},skipNulls:!1,strictNullHandling:!1},p={},m=function e(t,r,o,s,a,c,d,h,m,y,g,v,b,w,_,E,P,T){for(var x,S,O=t,A=T,I=0,R=!1;void 0!==(A=A.get(p))&&!R;){var N=A.get(t);if(I+=1,void 0!==N)if(N===I)throw RangeError("Cyclic object value");else R=!0;void 0===A.get(p)&&(I=0)}if("function"==typeof y?O=y(r,O):O instanceof Date?O=b(O):"comma"===o&&l(O)&&(O=i.maybeMap(O,function(e){return e instanceof Date?b(e):e})),null===O){if(c)return m&&!E?m(r,f.encoder,P,"key",w):r;O=""}if("string"==typeof(x=O)||"number"==typeof x||"boolean"==typeof x||"symbol"==typeof x||"bigint"==typeof x||i.isBuffer(O))return m?[_(E?r:m(r,f.encoder,P,"key",w))+"="+_(m(O,f.encoder,P,"value",w))]:[_(r)+"="+_(String(O))];var C=[];if(void 0===O)return C;if("comma"===o&&l(O))E&&m&&(O=i.maybeMap(O,m)),S=[{value:O.length>0?O.join(",")||null:void 0}];else if(l(y))S=y;else{var k=Object.keys(O);S=g?k.sort(g):k}var z=h?String(r).replace(/\./g,"%2E"):String(r),j=s&&l(O)&&1===O.length?z+"[]":z;if(a&&l(O)&&0===O.length)return j+"[]";for(var U=0;U<S.length;++U){var B=S[U],D="object"==typeof B&&B&&void 0!==B.value?B.value:O[B];if(!d||null!==D){var G=v&&h?String(B).replace(/\./g,"%2E"):String(B),F=l(O)?"function"==typeof o?o(j,G):j:j+(v?"."+G:"["+G+"]");T.set(t,I);var L=n();L.set(p,T),u(C,e(D,F,o,s,a,c,d,h,"comma"===o&&E&&l(O)?null:m,y,g,v,b,w,_,E,P,L))}}return C},y=function(e){if(!e)return f;if(void 0!==e.allowEmptyArrays&&"boolean"!=typeof e.allowEmptyArrays)throw TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==e.encodeDotInKeys&&"boolean"!=typeof e.encodeDotInKeys)throw TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw TypeError("Encoder has to be a function.");var t,r=e.charset||f.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=o.default;if(void 0!==e.format){if(!s.call(o.formatters,e.format))throw TypeError("Unknown format option provided.");n=e.format}var i=o.formatters[n],c=f.filter;if(("function"==typeof e.filter||l(e.filter))&&(c=e.filter),t=e.arrayFormat in a?e.arrayFormat:"indices"in e?e.indices?"indices":"repeat":f.arrayFormat,"commaRoundTrip"in e&&"boolean"!=typeof e.commaRoundTrip)throw TypeError("`commaRoundTrip` must be a boolean, or absent");var u=void 0===e.allowDots?!0===e.encodeDotInKeys||f.allowDots:!!e.allowDots;return{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:f.addQueryPrefix,allowDots:u,allowEmptyArrays:"boolean"==typeof e.allowEmptyArrays?!!e.allowEmptyArrays:f.allowEmptyArrays,arrayFormat:t,charset:r,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:f.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:void 0===e.delimiter?f.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:f.encode,encodeDotInKeys:"boolean"==typeof e.encodeDotInKeys?e.encodeDotInKeys:f.encodeDotInKeys,encoder:"function"==typeof e.encoder?e.encoder:f.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:f.encodeValuesOnly,filter:c,format:n,formatter:i,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:f.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:f.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:f.strictNullHandling}};e.exports=function(e,t){var r,i=e,o=y(t);"function"==typeof o.filter?i=(0,o.filter)("",i):l(o.filter)&&(r=o.filter);var s=[];if("object"!=typeof i||null===i)return"";var c=a[o.arrayFormat],d="comma"===c&&o.commaRoundTrip;r||(r=Object.keys(i)),o.sort&&r.sort(o.sort);for(var h=n(),f=0;f<r.length;++f){var p=r[f],g=i[p];o.skipNulls&&null===g||u(s,m(g,p,c,d,o.allowEmptyArrays,o.strictNullHandling,o.skipNulls,o.encodeDotInKeys,o.encode?o.encoder:null,o.filter,o.sort,o.allowDots,o.serializeDate,o.format,o.formatter,o.encodeValuesOnly,o.charset,h))}var v=s.join(o.delimiter),b=!0===o.addQueryPrefix?"?":"";return o.charsetSentinel&&("iso-8859-1"===o.charset?b+="utf8=%26%2310003%3B&":b+="utf8=%E2%9C%93&"),v.length>0?b+v:""}},5052(e,t,r){"use strict";var n=r(6089),i=Object.prototype.hasOwnProperty,o=Array.isArray,s=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),a=function(e){for(;e.length>1;){var t=e.pop(),r=t.obj[t.prop];if(o(r)){for(var n=[],i=0;i<r.length;++i)void 0!==r[i]&&n.push(r[i]);t.obj[t.prop]=n}}},l=function(e,t){for(var r=t&&t.plainObjects?{__proto__:null}:{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r};e.exports={arrayToObject:l,assign:function(e,t){return Object.keys(t).reduce(function(e,r){return e[r]=t[r],e},e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],n=0;n<t.length;++n)for(var i=t[n],o=i.obj[i.prop],s=Object.keys(o),l=0;l<s.length;++l){var c=s[l],u=o[c];"object"==typeof u&&null!==u&&-1===r.indexOf(u)&&(t.push({obj:o,prop:c}),r.push(u))}return a(t),e},decode:function(e,t,r){var n=e.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(e){return n}},encode:function(e,t,r,i,o){if(0===e.length)return e;var a=e;if("symbol"==typeof e?a=Symbol.prototype.toString.call(e):"string"!=typeof e&&(a=String(e)),"iso-8859-1"===r)return escape(a).replace(/%u[0-9a-f]{4}/gi,function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"});for(var l="",c=0;c<a.length;c+=1024){for(var u=a.length>=1024?a.slice(c,c+1024):a,d=[],h=0;h<u.length;++h){var f=u.charCodeAt(h);if(45===f||46===f||95===f||126===f||f>=48&&f<=57||f>=65&&f<=90||f>=97&&f<=122||o===n.RFC1738&&(40===f||41===f)){d[d.length]=u.charAt(h);continue}if(f<128){d[d.length]=s[f];continue}if(f<2048){d[d.length]=s[192|f>>6]+s[128|63&f];continue}if(f<55296||f>=57344){d[d.length]=s[224|f>>12]+s[128|f>>6&63]+s[128|63&f];continue}h+=1,f=65536+((1023&f)<<10|1023&u.charCodeAt(h)),d[d.length]=s[240|f>>18]+s[128|f>>12&63]+s[128|f>>6&63]+s[128|63&f]}l+=d.join("")}return l},isBuffer:function(e){return!!e&&"object"==typeof e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(o(e)){for(var r=[],n=0;n<e.length;n+=1)r.push(t(e[n]));return r}return t(e)},merge:function e(t,r,n){if(!r)return t;if("object"!=typeof r&&"function"!=typeof r){if(o(t))t.push(r);else{if(!t||"object"!=typeof t)return[t,r];(n&&(n.plainObjects||n.allowPrototypes)||!i.call(Object.prototype,r))&&(t[r]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(r);var s=t;return(o(t)&&!o(r)&&(s=l(t,n)),o(t)&&o(r))?(r.forEach(function(r,o){if(i.call(t,o)){var s=t[o];s&&"object"==typeof s&&r&&"object"==typeof r?t[o]=e(s,r,n):t.push(r)}else t[o]=r}),t):Object.keys(r).reduce(function(t,o){var s=r[o];return i.call(t,o)?t[o]=e(t[o],s,n):t[o]=s,t},s)}}},1391(e,t,r){"use strict";var n=r(7563),i=r(306),o=function(e,t,r){for(var n,i=e;null!=(n=i.next);i=n)if(n.key===t)return i.next=n.next,r||(n.next=e.next,e.next=n),n},s=function(e,t){if(e){var r=o(e,t);return r&&r.value}},a=function(e,t,r){var n=o(e,t);n?n.value=r:e.next={key:t,next:e.next,value:r}},l=function(e,t){if(e)return o(e,t,!0)};e.exports=function(){var e,t={assert:function(e){if(!t.has(e))throw new i("Side channel does not contain "+n(e))},delete:function(t){var r=e&&e.next,n=l(e,t);return n&&r&&r===n&&(e=void 0),!!n},get:function(t){return s(e,t)},has:function(t){var r;return!!(r=e)&&!!o(r,t)},set:function(t,r){e||(e={next:void 0}),a(e,t,r)}};return t}},2986(e,t,r){"use strict";var n=r(3484),i=r(381),o=r(7563),s=r(306),a=n("%Map%",!0),l=i("Map.prototype.get",!0),c=i("Map.prototype.set",!0),u=i("Map.prototype.has",!0),d=i("Map.prototype.delete",!0),h=i("Map.prototype.size",!0);e.exports=!!a&&function(){var e,t={assert:function(e){if(!t.has(e))throw new s("Side channel does not contain "+o(e))},delete:function(t){if(e){var r=d(e,t);return 0===h(e)&&(e=void 0),r}return!1},get:function(t){if(e)return l(e,t)},has:function(t){return!!e&&u(e,t)},set:function(t,r){e||(e=new a),c(e,t,r)}};return t}},5607(e,t,r){"use strict";var n=r(3484),i=r(381),o=r(7563),s=r(2986),a=r(306),l=n("%WeakMap%",!0),c=i("WeakMap.prototype.get",!0),u=i("WeakMap.prototype.set",!0),d=i("WeakMap.prototype.has",!0),h=i("WeakMap.prototype.delete",!0);e.exports=l?function(){var e,t,r={assert:function(e){if(!r.has(e))throw new a("Side channel does not contain "+o(e))},delete:function(r){if(l&&r&&("object"==typeof r||"function"==typeof r)){if(e)return h(e,r)}else if(s&&t)return t.delete(r);return!1},get:function(r){return l&&r&&("object"==typeof r||"function"==typeof r)&&e?c(e,r):t&&t.get(r)},has:function(r){return l&&r&&("object"==typeof r||"function"==typeof r)&&e?d(e,r):!!t&&t.has(r)},set:function(r,n){l&&r&&("object"==typeof r||"function"==typeof r)?(e||(e=new l),u(e,r,n)):s&&(t||(t=s()),t.set(r,n))}};return r}:s},5242(e,t,r){"use strict";var n=r(306),i=r(7563),o=r(1391),s=r(2986),a=r(5607)||s||o;e.exports=function(){var e,t={assert:function(e){if(!t.has(e))throw new n("Side channel does not contain "+i(e))},delete:function(t){return!!e&&e.delete(t)},get:function(t){return e&&e.get(t)},has:function(t){return!!e&&e.has(t)},set:function(t,r){e||(e=a()),e.set(t,r)}};return t}},5452(e,t,r){"use strict";r.d(t,{Nu:()=>i});var n=r(8923);r(935),r(9493),r(158);class i{customSerializers;constructor(e={}){if(this.customSerializers=e.customJsonSerializers??[],this.customSerializers.length!==new Set(this.customSerializers.map(e=>e.type)).size)throw Error("Custom serializer type must be unique.")}serialize(e,t=[],r=[],i=[],o=[]){for(let n of this.customSerializers)if(n.condition(e)){let s=this.serialize(n.serialize(e),t,r,i,o);return r.push([n.type,...t]),s}if(e instanceof Blob)return i.push(t),o.push(e),[e,r,i,o];if("bigint"==typeof e)return r.push([0,...t]),[e.toString(),r,i,o];if(e instanceof Date)return(r.push([1,...t]),Number.isNaN(e.getTime()))?[null,r,i,o]:[e.toISOString(),r,i,o];if(Number.isNaN(e))return r.push([2,...t]),[null,r,i,o];if(e instanceof URL)return r.push([4,...t]),[e.toString(),r,i,o];if(e instanceof RegExp)return r.push([5,...t]),[e.toString(),r,i,o];if(e instanceof Set){let n=this.serialize(Array.from(e),t,r,i,o);return r.push([6,...t]),n}if(e instanceof Map){let n=this.serialize(Array.from(e.entries()),t,r,i,o);return r.push([7,...t]),n}if(Array.isArray(e))return[e.map((e,n)=>void 0===e?(r.push([3,...t,n]),e):this.serialize(e,[...t,n],r,i,o)[0]),r,i,o];if((0,n.Gv)(e)){let n={};for(let s in e)("toJSON"!==s||"function"!=typeof e[s])&&(n[s]=this.serialize(e[s],[...t,s],r,i,o)[0]);return[n,r,i,o]}return[e,r,i,o]}deserialize(e,t,r,n){let i={data:e};for(let e of(r&&n&&r.forEach((e,t)=>{let r=i,o="data";e.forEach(e=>{r=r[o],o=e}),r[o]=n(t)}),t)){let t=e[0],r=i,n="data";for(let t=1;t<e.length;t++)r=r[n],n=e[t];for(let e of this.customSerializers)if(e.type===t){r[n]=e.deserialize(r[n]);break}switch(t){case 0:r[n]=BigInt(r[n]);break;case 1:r[n]=new Date(r[n]??"Invalid Date");break;case 2:r[n]=NaN;break;case 3:r[n]=void 0;break;case 4:r[n]=new URL(r[n]);break;case 5:{let[,e,t]=r[n].match(/^\/(.*)\/([a-z]*)$/);r[n]=new RegExp(e,t);break}case 6:r[n]=new Set(r[n]);break;case 7:r[n]=new Map(r[n])}}return i.data}}},4136(e,t,r){"use strict";r(5452),r(8923),r(935),r(3108).P},9006(e,t,r){"use strict";r(8923),r(935),r(3108).P},1561(e,t,r){"use strict";r(5452),r(8923),r(935),r(3108).P},7032(e,t,r){"use strict";r(3108),r(8923)},3108(e,t,r){"use strict";r.d(t,{P:()=>i});var n=r(8923);class i{maxBufferedEvents;constructor(e={}){this.maxBufferedEvents=e.maxBufferedEvents??100}subscribe(e,t,r){let i;if("function"==typeof t)return this.subscribeListener(e,t,r);let o=t?.signal,s=t?.maxBufferedEvents??this.maxBufferedEvents;o?.throwIfAborted();let a=[],l=[],c=this.subscribe(e,e=>{let t=l.shift();t?t[0]({done:!1,value:e}):(a.push(e),a.length>s&&a.shift())},{lastEventId:t?.lastEventId,onError:e=>{i={error:e},l.forEach(t=>t[1](e)),o?.removeEventListener("abort",u),l.length=0,a.length=0,c.then(e=>e()).catch(()=>{})}});function u(e){l.forEach(t=>t[1](e.target.reason)),l.length=0,a.length=0,c.then(e=>e()).catch(()=>{})}return o?.addEventListener("abort",u,{once:!0}),new n.Nz(async()=>{if(i)throw i.error;if(o?.aborted)throw o.reason;return(await c,a.length>0)?{done:!1,value:a.shift()}:new Promise((e,t)=>{l.push([e,t])})},async()=>{l.forEach(e=>e[0]({done:!0,value:void 0})),o?.removeEventListener("abort",u),l.length=0,a.length=0,await c.then(e=>e())})}}},1544(e,t,r){"use strict";r.d(t,{i:()=>l}),r(8995);var n=Object.defineProperty,i=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,a=(e,t,r,a)=>{if(t&&"object"==typeof t||"function"==typeof t)for(var l,c=o(t),u=0,d=c.length;u<d;u++)l=c[u],s.call(e,l)||l===r||n(e,l,{get:(e=>t[e]).bind(null,l),enumerable:!(a=i(t,l))||a.enumerable});return e},l=(e,t,r)=>(a(e,t,"default"),r&&a(r,t,"default"))},458(e,t,r){"use strict";var n=r(8803);r.o(n,"Effect")&&r.d(t,{Effect:function(){return n.Effect}})},4457(e,t,r){"use strict";r(4136),r(9006),r(1561);var n=r(8231);r.o(n,"oc")&&r.d(t,{oc:function(){return n.oc}});var i=r(9200);r.o(i,"oc")&&r.d(t,{oc:function(){return i.oc}}),r(7032)},8460(e,t,r){"use strict";r.d(t,{zod_exports:()=>s});var n,i=r(1544),o=r(9230);r.o(o,"z")&&r.d(t,{z:function(){return o.z}});var s={};(0,i.i)(s,n||(n=r.t(o,2)))},9305(e,t,r){"use strict";function n(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function i(e){if(!n(e))throw Error("Uint8Array expected")}function o(e,t){return!!Array.isArray(t)&&(0===t.length||(e?t.every(e=>"string"==typeof e):t.every(e=>Number.isSafeInteger(e))))}function s(e){if("function"!=typeof e)throw Error("function expected");return!0}function a(e,t){if("string"!=typeof t)throw Error(`${e}: string expected`);return!0}function l(e){if(!Number.isSafeInteger(e))throw Error(`invalid integer: ${e}`)}function c(e){if(!Array.isArray(e))throw Error("array expected")}function u(e,t){if(!o(!0,t))throw Error(`${e}: array of strings expected`)}function d(e,t){if(!o(!1,t))throw Error(`${e}: array of numbers expected`)}function h(...e){let t=e=>e,r=(e,t)=>r=>e(t(r));return{encode:e.map(e=>e.encode).reduceRight(r,t),decode:e.map(e=>e.decode).reduce(r,t)}}function f(e){let t="string"==typeof e?e.split(""):e,r=t.length;u("alphabet",t);let n=new Map(t.map((e,t)=>[e,t]));return{encode:n=>(c(n),n.map(n=>{if(!Number.isSafeInteger(n)||n<0||n>=r)throw Error(`alphabet.encode: digit index outside alphabet "${n}". Allowed: ${e}`);return t[n]})),decode:t=>(c(t),t.map(t=>{a("alphabet.decode",t);let r=n.get(t);if(void 0===r)throw Error(`Unknown letter: "${t}". Allowed: ${e}`);return r}))}}function p(e=""){return a("join",e),{encode:t=>(u("join.decode",t),t.join(e)),decode:t=>(a("join.decode",t),t.split(e))}}function m(e,t,r){if(t<2)throw Error(`convertRadix: invalid from=${t}, base cannot be less than 2`);if(r<2)throw Error(`convertRadix: invalid to=${r}, base cannot be less than 2`);if(c(e),!e.length)return[];let n=0,i=[],o=Array.from(e,e=>{if(l(e),e<0||e>=t)throw Error(`invalid integer: ${e}`);return e}),s=o.length;for(;;){let e=0,a=!0;for(let i=n;i<s;i++){let s=o[i],l=t*e,c=l+s;if(!Number.isSafeInteger(c)||l/t!==e||c-s!==l)throw Error("convertRadix: carry overflow");let u=c/r;e=c%r;let d=Math.floor(u);if(o[i]=d,!Number.isSafeInteger(d)||d*r+e!==c)throw Error("convertRadix: carry overflow");a&&(d?a=!1:n=i)}if(i.push(e),a)break}for(let t=0;t<e.length-1&&0===e[t];t++)i.push(0);return i.reverse()}r.d(t,{J0:()=>nP,jV:()=>nE,zU:()=>n7,y7:()=>tt,Do:()=>nw});let y=(e,t)=>0===t?e:y(t,e%t),g=(e,t)=>e+(t-y(e,t)),v=(()=>{let e=[];for(let t=0;t<40;t++)e.push(2**t);return e})();function b(e,t,r,n){if(c(e),t<=0||t>32)throw Error(`convertRadix2: wrong from=${t}`);if(r<=0||r>32)throw Error(`convertRadix2: wrong to=${r}`);if(g(t,r)>32)throw Error(`convertRadix2: carry overflow from=${t} to=${r} carryBits=${g(t,r)}`);let i=0,o=0,s=v[t],a=v[r]-1,u=[];for(let n of e){if(l(n),n>=s)throw Error(`convertRadix2: invalid data word=${n} from=${t}`);if(i=i<<t|n,o+t>32)throw Error(`convertRadix2: carry overflow pos=${o} from=${t}`);for(o+=t;o>=r;o-=r)u.push((i>>o-r&a)>>>0);let e=v[o];if(void 0===e)throw Error("invalid carry");i&=e-1}if(i=i<<r-o&a,!n&&o>=t)throw Error("Excess padding");if(!n&&i>0)throw Error(`Non-zero padding: ${i}`);return n&&o>0&&u.push(i>>>0),u}function w(e,t=!1){if(l(e),e<=0||e>32)throw Error("radix2: bits should be in (0..32]");if(g(8,e)>32||g(e,8)>32)throw Error("radix2: carry overflow");return{encode:r=>{if(!n(r))throw Error("radix2.encode input should be Uint8Array");return b(Array.from(r),8,e,!t)},decode:r=>(d("radix2.decode",r),Uint8Array.from(b(r,e,8,t)))}}let _="function"==typeof Uint8Array.from([]).toBase64&&"function"==typeof Uint8Array.fromBase64?{encode:e=>(i(e),e.toBase64()),decode:e=>((e,t)=>{if(a("base64",e),e.length>0&&!(t?/^[A-Za-z0-9=_-]+$/:/^[A-Za-z0-9=+/]+$/).test(e))throw Error("invalid base64");return Uint8Array.fromBase64(e,{alphabet:t?"base64url":"base64",lastChunkHandling:"strict"})})(e,!1)}:h(w(6),f("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),function(e,t="="){return l(6),a("padding",t),{encode(e){for(u("padding.encode",e);6*e.length%8;)e.push(t);return e},decode(e){u("padding.decode",e);let r=e.length;if(6*r%8)throw Error("padding: invalid, string should have whole number of bytes");for(;r>0&&e[r-1]===t;r--)if((r-1)*6%8==0)throw Error("padding: invalid, string has too much padding");return e.slice(0,r)}}}(6),p("")),E=h((l(58),{encode:e=>{if(!n(e))throw Error("radix.encode input should be Uint8Array");return m(Array.from(e),256,58)},decode:e=>(d("radix.decode",e),Uint8Array.from(m(e,58,256)))}),f("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),p("")),P=h(f("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),p("")),T="function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex?{encode:e=>(i(e),e.toHex()),decode:e=>(a("hex",e),Uint8Array.fromHex(e))}:h(w(4),f("0123456789abcdef"),p(""),(s(eP=e=>{if("string"!=typeof e||e.length%2!=0)throw TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()}),{encode:e=>e,decode:e=>eP(e)})),x=BigInt(0x100000000-1),S=BigInt(32);function O(e,t=!1){let r=e.length,n=new Uint32Array(r),i=new Uint32Array(r);for(let o=0;o<r;o++){let{h:r,l:s}=function(e,t=!1){return t?{h:Number(e&x),l:Number(e>>S&x)}:{h:0|Number(e>>S&x),l:0|Number(e&x)}}(e[o],t);[n[o],i[o]]=[r,s]}return[n,i]}let A=(e,t,r)=>e>>>r,I=(e,t,r)=>e<<32-r|t>>>r,R=(e,t,r)=>e>>>r|t<<32-r,N=(e,t,r)=>e<<32-r|t>>>r,C=(e,t,r)=>e<<64-r|t>>>r-32,k=(e,t,r)=>e>>>r-32|t<<64-r;function z(e,t,r,n){let i=(t>>>0)+(n>>>0);return{h:e+r+(i/0x100000000|0)|0,l:0|i}}let j=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),U=(e,t,r,n)=>t+r+n+(e/0x100000000|0)|0,B=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),D=(e,t,r,n,i)=>t+r+n+i+(e/0x100000000|0)|0,G=(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0),F=(e,t,r,n,i,o)=>t+r+n+i+o+(e/0x100000000|0)|0;function L(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function M(e,t=""){if(!Number.isSafeInteger(e)||e<0){let r=t&&`"${t}" `;throw Error(`${r}expected integer >= 0, got ${e}`)}}function q(e,t,r=""){let n=L(e),i=e?.length,o=void 0!==t;if(!n||o&&i!==t)throw Error((r&&`"${r}" `)+"expected Uint8Array"+(o?` of length ${t}`:"")+", got "+(n?`length=${i}`:`type=${typeof e}`));return e}function H(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash must wrapped by utils.createHasher");M(e.outputLen),M(e.blockLen)}function $(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function K(e,t){q(e,void 0,"digestInto() output");let r=t.outputLen;if(e.length<r)throw Error('"digestInto() output" expected to be of length >='+r)}function V(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function W(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Z(e,t){return e<<32-t|e>>>t}let Y=68===new Uint8Array(new Uint32Array([0x11223344]).buffer)[0]?e=>e:function(e){for(let r=0;r<e.length;r++){var t;e[r]=(t=e[r])<<24&0xff000000|t<<8&0xff0000|t>>>8&65280|t>>>24&255}return e},X="function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex,J=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Q(e){if(q(e),X)return e.toHex();let t="";for(let r=0;r<e.length;r++)t+=J[e[r]];return t}function ee(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:void 0}function et(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);if(X)return Uint8Array.fromHex(e);let t=e.length,r=t/2;if(t%2)throw Error("hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){let r=ee(e.charCodeAt(i)),o=ee(e.charCodeAt(i+1));if(void 0===r||void 0===o)throw Error('hex string expected, got non-hex character "'+(e[i]+e[i+1])+'" at index '+i);n[t]=16*r+o}return n}function er(...e){let t=0;for(let r=0;r<e.length;r++){let n=e[r];q(n),t+=n.length}let r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){let i=e[t];r.set(i,n),n+=i.length}return r}function en(e,t={}){let r=(t,r)=>e(r).update(t).digest(),n=e(void 0);return r.outputLen=n.outputLen,r.blockLen=n.blockLen,r.create=t=>e(t),Object.assign(r,t),Object.freeze(r)}function ei(e=32){let t="object"==typeof globalThis?globalThis.crypto:null;if("function"!=typeof t?.getRandomValues)throw Error("crypto.getRandomValues must be defined");return t.getRandomValues(new Uint8Array(e))}let eo=e=>({oid:Uint8Array.from([6,9,96,134,72,1,101,3,4,2,e])}),es=BigInt(0),ea=BigInt(1),el=BigInt(2),ec=BigInt(7),eu=BigInt(256),ed=BigInt(113),eh=[],ef=[],ep=[];for(let e=0,t=ea,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],eh.push(2*(5*n+r)),ef.push((e+1)*(e+2)/2%64);let i=es;for(let e=0;e<7;e++)(t=(t<<ea^(t>>ec)*ed)%eu)&el&&(i^=ea<<(ea<<BigInt(e))-ea);ep.push(i)}let em=O(ep,!0),ey=em[0],eg=em[1],ev=(e,t,r)=>r>32?t<<r-32|e>>>64-r:e<<r|t>>>32-r,eb=(e,t,r)=>r>32?e<<r-32|t>>>64-r:t<<r|e>>>32-r;class ew{state;pos=0;posOut=0;finished=!1;state32;destroyed=!1;blockLen;suffix;outputLen;enableXOF=!1;rounds;constructor(e,t,r,n=!1,i=24){if(this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=n,this.rounds=i,M(r,"outputLen"),!(0<e&&e<200))throw Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=function(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}(this.state)}clone(){return this._cloneInto()}keccak(){Y(this.state32),function(e,t=24){let r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){let n=(t+8)%10,i=(t+2)%10,o=r[i],s=r[i+1],a=ev(o,s,1)^r[n],l=eb(o,s,1)^r[n+1];for(let r=0;r<50;r+=10)e[t+r]^=a,e[t+r+1]^=l}let t=e[2],i=e[3];for(let r=0;r<24;r++){let n=ef[r],o=ev(t,i,n),s=eb(t,i,n),a=eh[r];t=e[a],i=e[a+1],e[a]=o,e[a+1]=s}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=ey[n],e[1]^=eg[n]}V(r)}(this.state32,this.rounds),Y(this.state32),this.posOut=0,this.pos=0}update(e){$(this),q(e);let{blockLen:t,state:r}=this,n=e.length;for(let i=0;i<n;){let o=Math.min(t-this.pos,n-i);for(let t=0;t<o;t++)r[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,(128&t)!=0&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){$(this,!1),q(e),this.finish();let t=this.state,{blockLen:r}=this;for(let n=0,i=e.length;n<i;){this.posOut>=r&&this.keccak();let o=Math.min(r-this.posOut,i-n);e.set(t.subarray(this.posOut,this.posOut+o),n),this.posOut+=o,n+=o}return e}xofInto(e){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return M(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(K(e,this),this.finished)throw Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,V(this.state)}_cloneInto(e){let{blockLen:t,suffix:r,outputLen:n,rounds:i,enableXOF:o}=this;return(e||=new ew(t,r,n,o,i)).state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=n,e.enableXOF=o,e.destroyed=this.destroyed,e}}let e_=((e,t,r,n={})=>en(()=>new ew(t,e,r),n))(1,136,32);var eE,eP,eT,ex=r(7358);function eS(e){let t;if("string"==typeof e)try{t=E.decode(e)}catch{throw Error(`Invalid base58 code hash: ${e}`)}else t=e;if(32!==t.length)throw Error(`Code hash must be 32 bytes, got ${t.length} bytes`);return t}let eO=ex.b.enum({CodeHash:ex.b.array(ex.b.u8(),32),AccountId:ex.b.string()}),eA=ex.b.struct({code:eO,data:ex.b.hashMap(ex.b.bytes(),ex.b.bytes())}),eI=ex.b.enum({V1:eA}),eR=ex.b.struct({data:ex.b.array(ex.b.u8(),32)}),eN=ex.b.struct({data:ex.b.array(ex.b.u8(),64)}),eC=ex.b.enum({ed25519Key:eR,secp256k1Key:eN}),ek=ex.b.struct({data:ex.b.array(ex.b.u8(),64)}),ez=ex.b.struct({data:ex.b.array(ex.b.u8(),65)}),ej=ex.b.enum({ed25519Signature:ek,secp256k1Signature:ez}),eU=ex.b.struct({allowance:ex.b.option(ex.b.u128()),receiverId:ex.b.string(),methodNames:ex.b.vec(ex.b.string())}),eB=ex.b.struct({}),eD=ex.b.enum({functionCall:eU,fullAccess:eB}),eG=ex.b.struct({nonce:ex.b.u64(),permission:eD}),eF=ex.b.struct({}),eL=ex.b.struct({code:ex.b.vec(ex.b.u8())}),eM=ex.b.struct({methodName:ex.b.string(),args:ex.b.vec(ex.b.u8()),gas:ex.b.u64(),deposit:ex.b.u128()}),eq=ex.b.struct({deposit:ex.b.u128()}),eH=ex.b.struct({stake:ex.b.u128(),publicKey:eC}),e$=ex.b.struct({publicKey:eC,accessKey:eG}),eK=ex.b.struct({publicKey:eC}),eV=ex.b.struct({beneficiaryId:ex.b.string()}),eW=ex.b.enum({CodeHash:ex.b.struct({}),AccountId:ex.b.struct({})}),eZ=ex.b.enum({CodeHash:ex.b.array(ex.b.u8(),32),AccountId:ex.b.string()}),eY=ex.b.struct({code:ex.b.vec(ex.b.u8()),deployMode:eW}),eX=ex.b.struct({contractIdentifier:eZ}),eJ=ex.b.struct({code:eZ,data:ex.b.hashMap(ex.b.bytes(),ex.b.bytes())}),eQ=ex.b.enum({V1:eJ}),e0=ex.b.struct({stateInit:eQ,deposit:ex.b.u128()}),e1=ex.b.enum({createAccount:eF,deployContract:eL,functionCall:eM,transfer:eq,stake:eH,addKey:e$,deleteKey:eK,deleteAccount:eV,deployGlobalContract:eY,useGlobalContract:eX,deterministicStateInit:e0}),e2=ex.b.struct({senderId:ex.b.string(),receiverId:ex.b.string(),actions:ex.b.vec(e1),nonce:ex.b.u64(),maxBlockHeight:ex.b.u64(),publicKey:eC}),e8=ex.b.struct({delegateAction:e2,signature:ej}),e6=ex.b.enum({createAccount:eF,deployContract:eL,functionCall:eM,transfer:eq,stake:eH,addKey:e$,deleteKey:eK,deleteAccount:eV,signedDelegate:e8,deployGlobalContract:eY,useGlobalContract:eX,deterministicStateInit:e0}),e4=ex.b.struct({signerId:ex.b.string(),publicKey:eC,nonce:ex.b.u64(),receiverId:ex.b.string(),blockHash:ex.b.array(ex.b.u8(),32),actions:ex.b.vec(e6)}),e3=ex.b.struct({transaction:e4,signature:ej});function e5(e){return 0===e.keyType?{ed25519Key:{data:Array.from(e.data)}}:{secp256k1Key:{data:Array.from(e.data)}}}function e9(e){return 0===e.keyType?{ed25519Signature:{data:Array.from(e.data)}}:{secp256k1Signature:{data:Array.from(e.data)}}}function e7(e){return"signedDelegate"in e?{signedDelegate:{delegateAction:{senderId:e.signedDelegate.delegateAction.senderId,receiverId:e.signedDelegate.delegateAction.receiverId,actions:e.signedDelegate.delegateAction.actions.map(e=>e7(e)),nonce:e.signedDelegate.delegateAction.nonce,maxBlockHeight:e.signedDelegate.delegateAction.maxBlockHeight,publicKey:e.signedDelegate.delegateAction.publicKey},signature:e.signedDelegate.signature}}:e}function te(e){return e3.serialize({transaction:{signerId:e.transaction.signerId,publicKey:e5(e.transaction.publicKey),nonce:e.transaction.nonce,receiverId:e.transaction.receiverId,blockHash:Array.from(e.transaction.blockHash),actions:e.transaction.actions.map(e7)},signature:e9(e.signature)})}function tt(e){let t="string"==typeof e?_.decode(e):e;return{signedDelegate:e8.deserialize(t)}}class tr{constructor(e,t,r,n,i,o){this.senderId=e,this.receiverId=t,this.actions=r,this.nonce=n,this.maxBlockHeight=i,this.publicKey=o}}function tn(e){return{transfer:{deposit:e}}}function ti(e,t,r,n){return{functionCall:{methodName:e,args:t,gas:r,deposit:n}}}class to extends Error{constructor(e,t,r){super(e),this.name="NearError",this.code=t,this.data=r,Object.setPrototypeOf(this,to.prototype)}}class ts extends to{constructor(e,t,r,n=[]){const i=t?`.${t}`:"";super(r?`Contract call failed: ${e}${i} - ${r}`:`Contract call failed: ${e}${i}`,"FUNCTION_CALL_ERROR"),this.name="FunctionCallError",this.contractId=e,void 0!==t&&(this.methodName=t),this.logs=n,void 0!==r&&(this.panic=r),Object.setPrototypeOf(this,ts.prototype)}}class ta extends to{constructor(e,t,r=!0){super(e,"NETWORK_ERROR",{statusCode:t}),this.name="NetworkError",void 0!==t&&(this.statusCode=t),this.retryable=r,Object.setPrototypeOf(this,ta.prototype)}}class tl extends to{constructor(e){super(e,"INVALID_KEY"),this.name="InvalidKeyError",Object.setPrototypeOf(this,tl.prototype)}}class tc extends to{constructor(e){super(`Account does not exist: ${e}`,"ACCOUNT_NOT_FOUND"),this.name="AccountDoesNotExistError",this.accountId=e,Object.setPrototypeOf(this,tc.prototype)}}class tu extends to{constructor(e,t){super(`Access key does not exist: ${t} for account ${e}`,"ACCESS_KEY_NOT_FOUND"),this.name="AccessKeyDoesNotExistError",this.accountId=e,this.publicKey=t,Object.setPrototypeOf(this,tu.prototype)}}class td extends to{constructor(e){super(`Block not found: ${e}. It may have been garbage-collected. Try an archival node for blocks older than 5 epochs.`,"UNKNOWN_BLOCK"),this.name="UnknownBlockError",this.blockReference=e,Object.setPrototypeOf(this,td.prototype)}}class th extends to{constructor(e){super(`Invalid account ID format: ${e}`,"INVALID_ACCOUNT"),this.name="InvalidAccountError",this.accountId=e,Object.setPrototypeOf(this,th.prototype)}}class tf extends to{constructor(e){super(e||"The requested shard is not tracked by this node. Try a different node.","UNAVAILABLE_SHARD"),this.retryable=!0,this.name="ShardUnavailableError",Object.setPrototypeOf(this,tf.prototype)}}class tp extends to{constructor(e){super(e||"Node is still syncing. Wait for sync to complete or try a different node.","NOT_SYNCED"),this.retryable=!0,this.name="NodeNotSyncedError",Object.setPrototypeOf(this,tp.prototype)}}class tm extends to{constructor(e){super(`No contract deployed on account: ${e}`,"NO_CONTRACT_CODE"),this.name="ContractNotDeployedError",this.accountId=e,Object.setPrototypeOf(this,tm.prototype)}}class ty extends to{constructor(e){super(`Contract state too large (>50kb) for account ${e}. Try a node with larger limits.`,"TOO_LARGE_CONTRACT_STATE"),this.name="ContractStateTooLargeError",this.accountId=e,Object.setPrototypeOf(this,ty.prototype)}}class tg extends to{constructor(e,t,r){super(t?`Contract execution failed: ${e}.${t}`:`Contract execution failed: ${e}`,"CONTRACT_EXECUTION_ERROR",r),this.name="ContractExecutionError",this.contractId=e,void 0!==t&&(this.methodName=t),void 0!==r&&(this.details=r),Object.setPrototypeOf(this,tg.prototype)}}class tv extends to{constructor(e){super(`Chunk not found: ${e}. It may have been garbage-collected. Try an archival node.`,"UNKNOWN_CHUNK"),this.name="UnknownChunkError",this.chunkReference=e,Object.setPrototypeOf(this,tv.prototype)}}class tb extends to{constructor(e){super(`Invalid shard ID: ${e}. Provide a valid shard ID within the network's range.`,"INVALID_SHARD_ID"),this.name="InvalidShardIdError",this.shardId=e,Object.setPrototypeOf(this,tb.prototype)}}class tw extends to{constructor(e){super(`Epoch not found for block: ${e}. The block may be invalid or too old. Try an archival node.`,"UNKNOWN_EPOCH"),this.name="UnknownEpochError",this.blockReference=e,Object.setPrototypeOf(this,tw.prototype)}}class t_ extends to{constructor(e,t){super(`Invalid transaction nonce: transaction nonce ${e} must be greater than access key nonce ${t}`,"INVALID_NONCE"),this.retryable=!0,this.name="InvalidNonceError",this.txNonce=e,this.akNonce=t,Object.setPrototypeOf(this,t_.prototype)}}class tE extends to{constructor(e,t){super(e,"INVALID_TRANSACTION",t),this.name="InvalidTransactionError",this.details=t,this.shardCongested=!!t?.ShardCongested,this.shardStuck=!!t?.ShardStuck,this.retryable=this.shardCongested||this.shardStuck,Object.setPrototypeOf(this,tE.prototype)}}class tP extends to{constructor(e){super(`Receipt not found: ${e}. It may not have been observed on this node.`,"UNKNOWN_RECEIPT"),this.name="UnknownReceiptError",this.receiptId=e,Object.setPrototypeOf(this,tP.prototype)}}class tT extends to{constructor(e,t){super(`Request validation failed: ${e}. Check that all parameters are valid.`,"PARSE_ERROR",t),this.name="ParseError",Object.setPrototypeOf(this,tT.prototype)}}class tx extends to{constructor(e,t){super(e||"Request timed out. The transaction may still be processed. Resubmit the identical transaction.","TIMEOUT_ERROR"),this.retryable=!0,this.name="TimeoutError",void 0!==t&&(this.transactionHash=t),Object.setPrototypeOf(this,tx.prototype)}}class tS extends to{constructor(e,t){super(e||"Internal server error. The node may be overloaded. Try again or use a different node.","INTERNAL_ERROR",t),this.retryable=!0,this.name="InternalServerError",Object.setPrototypeOf(this,tS.prototype)}}var tO=r(5600);tO.z.object({account_id:tO.z.string().optional(),public_key:tO.z.string(),private_key:tO.z.string(),seed_phrase_hd_path:tO.z.string().optional(),master_seed_phrase:tO.z.string().optional(),implicit_account_id:tO.z.string().optional()}),tO.z.object({account_id:tO.z.string().optional(),public_key:tO.z.string(),secret_key:tO.z.string(),seed_phrase_hd_path:tO.z.string().optional(),master_seed_phrase:tO.z.string().optional(),implicit_account_id:tO.z.string().optional()}),tO.z.enum(["mainnet","testnet","betanet","localnet"]);class tA{blockLen;outputLen;padOffset;isLE;buffer;view;finished=!1;length=0;pos=0;destroyed=!1;constructor(e,t,r,n){this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.buffer=new Uint8Array(e),this.view=W(this.buffer)}update(e){$(this),q(e);let{view:t,buffer:r,blockLen:n}=this,i=e.length;for(let o=0;o<i;){let s=Math.min(n-this.pos,i-o);if(s===n){let t=W(e);for(;n<=i-o;o+=n)this.process(t,o);continue}r.set(e.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===n&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){$(this),K(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:n,isLE:i}=this,{pos:o}=this;t[o++]=128,V(this.buffer.subarray(o)),this.padOffset>n-o&&(this.process(r,0),o=0);for(let e=o;e<n;e++)t[e]=0;r.setBigUint64(n-8,BigInt(8*this.length),i),this.process(r,0);let s=W(e),a=this.outputLen;if(a%4)throw Error("_sha2: outputLen must be aligned to 32bit");let l=a/4,c=this.get();if(l>c.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<l;e++)s.setUint32(4*e,c[e],i)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){(e||=new this.constructor).set(...this.get());let{blockLen:t,buffer:r,length:n,finished:i,destroyed:o,pos:s}=this;return e.destroyed=o,e.finished=i,e.length=n,e.pos=s,n%t&&e.buffer.set(r),e}clone(){return this._cloneInto()}}let tI=Uint32Array.from([0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19]),tR=Uint32Array.from([0x6a09e667,0xf3bcc908,0xbb67ae85,0x84caa73b,0x3c6ef372,0xfe94f82b,0xa54ff53a,0x5f1d36f1,0x510e527f,0xade682d1,0x9b05688c,0x2b3e6c1f,0x1f83d9ab,0xfb41bd6b,0x5be0cd19,0x137e2179]),tN=Uint32Array.from([0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2]),tC=new Uint32Array(64);class tk extends tA{constructor(e){super(64,e,8,!1)}get(){let{A:e,B:t,C:r,D:n,E:i,F:o,G:s,H:a}=this;return[e,t,r,n,i,o,s,a]}set(e,t,r,n,i,o,s,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)tC[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=tC[e-15],r=tC[e-2],n=Z(t,7)^Z(t,18)^t>>>3,i=Z(r,17)^Z(r,19)^r>>>10;tC[e]=i+tC[e-7]+n+tC[e-16]|0}let{A:r,B:n,C:i,D:o,E:s,F:a,G:l,H:c}=this;for(let e=0;e<64;e++){var u,d,h,f;let t=c+(Z(s,6)^Z(s,11)^Z(s,25))+((u=s)&a^~u&l)+tN[e]+tC[e]|0,p=(Z(r,2)^Z(r,13)^Z(r,22))+((d=r)&(h=n)^d&(f=i)^h&f)|0;c=l,l=a,a=s,s=o+t|0,o=i,i=n,n=r,r=t+p|0}r=r+this.A|0,n=n+this.B|0,i=i+this.C|0,o=o+this.D|0,s=s+this.E|0,a=a+this.F|0,l=l+this.G|0,c=c+this.H|0,this.set(r,n,i,o,s,a,l,c)}roundClean(){V(tC)}destroy(){this.set(0,0,0,0,0,0,0,0),V(this.buffer)}}class tz extends tk{A=0|tI["0"];B=0|tI["1"];C=0|tI["2"];D=0|tI["3"];E=0|tI["4"];F=0|tI["5"];G=0|tI["6"];H=0|tI["7"];constructor(){super(32)}}let tj=O(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),tU=tj[0],tB=tj[1],tD=new Uint32Array(80),tG=new Uint32Array(80);class tF extends tA{constructor(e){super(128,e,16,!1)}get(){let{Ah:e,Al:t,Bh:r,Bl:n,Ch:i,Cl:o,Dh:s,Dl:a,Eh:l,El:c,Fh:u,Fl:d,Gh:h,Gl:f,Hh:p,Hl:m}=this;return[e,t,r,n,i,o,s,a,l,c,u,d,h,f,p,m]}set(e,t,r,n,i,o,s,a,l,c,u,d,h,f,p,m){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|n,this.Ch=0|i,this.Cl=0|o,this.Dh=0|s,this.Dl=0|a,this.Eh=0|l,this.El=0|c,this.Fh=0|u,this.Fl=0|d,this.Gh=0|h,this.Gl=0|f,this.Hh=0|p,this.Hl=0|m}process(e,t){for(let r=0;r<16;r++,t+=4)tD[r]=e.getUint32(t),tG[r]=e.getUint32(t+=4);for(let e=16;e<80;e++){let t=0|tD[e-15],r=0|tG[e-15],n=R(t,r,1)^R(t,r,8)^A(t,r,7),i=N(t,r,1)^N(t,r,8)^I(t,r,7),o=0|tD[e-2],s=0|tG[e-2],a=R(o,s,19)^C(o,s,61)^A(o,s,6),l=B(i,N(o,s,19)^k(o,s,61)^I(o,s,6),tG[e-7],tG[e-16]),c=D(l,n,a,tD[e-7],tD[e-16]);tD[e]=0|c,tG[e]=0|l}let{Ah:r,Al:n,Bh:i,Bl:o,Ch:s,Cl:a,Dh:l,Dl:c,Eh:u,El:d,Fh:h,Fl:f,Gh:p,Gl:m,Hh:y,Hl:g}=this;for(let e=0;e<80;e++){let t=R(u,d,14)^R(u,d,18)^C(u,d,41),v=N(u,d,14)^N(u,d,18)^k(u,d,41),b=u&h^~u&p,w=G(g,v,d&f^~d&m,tB[e],tG[e]),_=F(w,y,t,b,tU[e],tD[e]),E=0|w,P=R(r,n,28)^C(r,n,34)^C(r,n,39),T=N(r,n,28)^k(r,n,34)^k(r,n,39),x=r&i^r&s^i&s,S=n&o^n&a^o&a;y=0|p,g=0|m,p=0|h,m=0|f,h=0|u,f=0|d,({h:u,l:d}=z(0|l,0|c,0|_,0|E)),l=0|s,c=0|a,s=0|i,a=0|o,i=0|r,o=0|n;let O=j(E,T,S);r=U(O,_,P,x),n=0|O}({h:r,l:n}=z(0|this.Ah,0|this.Al,0|r,0|n)),({h:i,l:o}=z(0|this.Bh,0|this.Bl,0|i,0|o)),({h:s,l:a}=z(0|this.Ch,0|this.Cl,0|s,0|a)),({h:l,l:c}=z(0|this.Dh,0|this.Dl,0|l,0|c)),({h:u,l:d}=z(0|this.Eh,0|this.El,0|u,0|d)),({h:h,l:f}=z(0|this.Fh,0|this.Fl,0|h,0|f)),({h:p,l:m}=z(0|this.Gh,0|this.Gl,0|p,0|m)),({h:y,l:g}=z(0|this.Hh,0|this.Hl,0|y,0|g)),this.set(r,n,i,o,s,a,l,c,u,d,h,f,p,m,y,g)}roundClean(){V(tD,tG)}destroy(){V(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class tL extends tF{Ah=0|tR["0"];Al=0|tR["1"];Bh=0|tR["2"];Bl=0|tR["3"];Ch=0|tR["4"];Cl=0|tR["5"];Dh=0|tR["6"];Dl=0|tR["7"];Eh=0|tR["8"];El=0|tR["9"];Fh=0|tR["10"];Fl=0|tR["11"];Gh=0|tR["12"];Gl=0|tR["13"];Hh=0|tR["14"];Hl=0|tR["15"];constructor(){super(64)}}let tM=en(()=>new tz,eo(1)),tq=en(()=>new tL,eo(3)),tH=BigInt(0),t$=BigInt(1);function tK(e,t=""){if("boolean"!=typeof e)throw Error((t&&`"${t}" `)+"expected boolean, got type="+typeof e);return e}function tV(e){if("bigint"==typeof e){if(!t0(e))throw Error("positive bigint expected, got "+e)}else M(e);return e}function tW(e){let t=tV(e).toString(16);return 1&t.length?"0"+t:t}function tZ(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return""===e?tH:BigInt("0x"+e)}function tY(e){return tZ(Q(tQ(q(e)).reverse()))}function tX(e,t){M(t);let r=et((e=tV(e)).toString(16).padStart(2*t,"0"));if(r.length!==t)throw Error("number too large");return r}function tJ(e,t){return tX(e,t).reverse()}function tQ(e){return Uint8Array.from(e)}let t0=e=>"bigint"==typeof e&&tH<=e;function t1(e,t,r,n){if(!(t0(t)&&t0(r)&&t0(n))||!(r<=t)||!(t<n))throw Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)}let t2=e=>(t$<<BigInt(e))-t$;function t8(e,t={},r={}){if(!e||"object"!=typeof e)throw Error("expected valid options object");let n=(t,r)=>Object.entries(t).forEach(([t,n])=>(function(t,r,n){let i=e[t];if(n&&void 0===i)return;let o=typeof i;if(o!==r||null===i)throw Error(`param "${t}" is invalid: expected ${r}, got ${o}`)})(t,n,r));n(t,!1),n(r,!0)}let t6=()=>{throw Error("not implemented")};function t4(e){let t=new WeakMap;return(r,...n)=>{let i=t.get(r);if(void 0!==i)return i;let o=e(r,...n);return t.set(r,o),o}}let t3=BigInt(0),t5=BigInt(1),t9=BigInt(2),t7=BigInt(3),re=BigInt(4),rt=BigInt(5),rr=BigInt(7),rn=BigInt(8),ri=BigInt(9),ro=BigInt(16);function rs(e,t){let r=e%t;return r>=t3?r:t+r}function ra(e,t,r){let n=e;for(;t-- >t3;)n*=n,n%=r;return n}function rl(e,t){if(e===t3)throw Error("invert: expected non-zero number");if(t<=t3)throw Error("invert: expected positive modulus, got "+t);let r=rs(e,t),n=t,i=t3,o=t5,s=t5,a=t3;for(;r!==t3;){let e=n/r,t=n%r,l=i-s*e,c=o-a*e;n=r,r=t,i=s,o=a,s=l,a=c}if(n!==t5)throw Error("invert: does not exist");return rs(i,t)}function rc(e,t,r){if(!e.eql(e.sqr(t),r))throw Error("Cannot find square root")}function ru(e,t){let r=(e.ORDER+t5)/re,n=e.pow(t,r);return rc(e,n,t),n}function rd(e,t){let r=(e.ORDER-rt)/rn,n=e.mul(t,t9),i=e.pow(n,r),o=e.mul(t,i),s=e.mul(e.mul(o,t9),i),a=e.mul(o,e.sub(s,e.ONE));return rc(e,a,t),a}function rh(e){if(e<t7)throw Error("sqrt is not defined for small field");let t=e-t5,r=0;for(;t%t9===t3;)t/=t9,r++;let n=t9,i=rv(e);for(;1===ry(i,n);)if(n++>1e3)throw Error("Cannot find square root: probably non-prime P");if(1===r)return ru;let o=i.pow(n,t),s=(t+t5)/t9;return function(e,n){if(e.is0(n))return n;if(1!==ry(e,n))throw Error("Cannot find square root");let i=r,a=e.mul(e.ONE,o),l=e.pow(n,t),c=e.pow(n,s);for(;!e.eql(l,e.ONE);){if(e.is0(l))return e.ZERO;let t=1,r=e.sqr(l);for(;!e.eql(r,e.ONE);)if(t++,r=e.sqr(r),t===i)throw Error("Cannot find square root");let n=t5<<BigInt(i-t-1),o=e.pow(a,n);i=t,a=e.sqr(o),l=e.mul(l,a),c=e.mul(c,o)}return c}}let rf=(e,t)=>(rs(e,t)&t5)===t5,rp=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function rm(e,t,r=!1){let n=Array(t.length).fill(r?e.ZERO:void 0),i=t.reduce((t,r,i)=>e.is0(r)?t:(n[i]=t,e.mul(t,r)),e.ONE),o=e.inv(i);return t.reduceRight((t,r,i)=>e.is0(r)?t:(n[i]=e.mul(t,n[i]),e.mul(t,r)),o),n}function ry(e,t){let r=(e.ORDER-t5)/t9,n=e.pow(t,r),i=e.eql(n,e.ONE),o=e.eql(n,e.ZERO),s=e.eql(n,e.neg(e.ONE));if(!i&&!o&&!s)throw Error("invalid Legendre symbol result");return i?1:o?0:-1}class rg{ORDER;BITS;BYTES;isLE;ZERO=t3;ONE=t5;_lengths;_sqrt;_mod;constructor(e,t={}){let r;if(e<=t3)throw Error("invalid field: expected ORDER > 0, got "+e);this.isLE=!1,null!=t&&"object"==typeof t&&("number"==typeof t.BITS&&(r=t.BITS),"function"==typeof t.sqrt&&(this.sqrt=t.sqrt),"boolean"==typeof t.isLE&&(this.isLE=t.isLE),t.allowedLengths&&(this._lengths=t.allowedLengths?.slice()),"boolean"==typeof t.modFromBytes&&(this._mod=t.modFromBytes));const{nBitLength:n,nByteLength:i}=function(e,t){void 0!==t&&M(t);let r=void 0!==t?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}(e,r);if(i>2048)throw Error("invalid field: expected ORDER of <= 2048 bytes");this.ORDER=e,this.BITS=n,this.BYTES=i,this._sqrt=void 0,Object.preventExtensions(this)}create(e){return rs(e,this.ORDER)}isValid(e){if("bigint"!=typeof e)throw Error("invalid field element: expected bigint, got "+typeof e);return t3<=e&&e<this.ORDER}is0(e){return e===t3}isValidNot0(e){return!this.is0(e)&&this.isValid(e)}isOdd(e){return(e&t5)===t5}neg(e){return rs(-e,this.ORDER)}eql(e,t){return e===t}sqr(e){return rs(e*e,this.ORDER)}add(e,t){return rs(e+t,this.ORDER)}sub(e,t){return rs(e-t,this.ORDER)}mul(e,t){return rs(e*t,this.ORDER)}pow(e,t){var r=t;if(r<t3)throw Error("invalid exponent, negatives unsupported");if(r===t3)return this.ONE;if(r===t5)return e;let n=this.ONE,i=e;for(;r>t3;)r&t5&&(n=this.mul(n,i)),i=this.sqr(i),r>>=t5;return n}div(e,t){return rs(e*rl(t,this.ORDER),this.ORDER)}sqrN(e){return e*e}addN(e,t){return e+t}subN(e,t){return e-t}mulN(e,t){return e*t}inv(e){return rl(e,this.ORDER)}sqrt(e){return this._sqrt||(this._sqrt=function(e){if(e%re===t7)return ru;if(e%rn===rt)return rd;if(e%ro===ri){let t,r,n,i,o,s;return t=rv(e),n=(r=rh(e))(t,t.neg(t.ONE)),i=r(t,n),o=r(t,t.neg(n)),s=(e+rr)/ro,(e,t)=>{let r=e.pow(t,s),a=e.mul(r,n),l=e.mul(r,i),c=e.mul(r,o),u=e.eql(e.sqr(a),t),d=e.eql(e.sqr(l),t);r=e.cmov(r,a,u),a=e.cmov(c,l,d);let h=e.eql(e.sqr(a),t),f=e.cmov(r,a,h);return rc(e,f,t),f}}return rh(e)}(this.ORDER)),this._sqrt(this,e)}toBytes(e){return this.isLE?tJ(e,this.BYTES):tX(e,this.BYTES)}fromBytes(e,t=!1){q(e);let{_lengths:r,BYTES:n,isLE:i,ORDER:o,_mod:s}=this;if(r){if(!r.includes(e.length)||e.length>n)throw Error("Field.fromBytes: expected "+r+" bytes, got "+e.length);let t=new Uint8Array(n);t.set(e,i?0:t.length-e.length),e=t}if(e.length!==n)throw Error("Field.fromBytes: expected "+n+" bytes, got "+e.length);let a=i?tY(e):tZ(Q(e));if(s&&(a=rs(a,o)),!t&&!this.isValid(a))throw Error("invalid field element: outside of range 0..ORDER");return a}invertBatch(e){return rm(this,e)}cmov(e,t,r){return r?t:e}}function rv(e,t={}){return new rg(e,t)}function rb(e){if("bigint"!=typeof e)throw Error("field order must be bigint");return Math.ceil(e.toString(2).length/8)}function rw(e){let t=rb(e);return t+Math.ceil(t/2)}let r_=BigInt(0),rE=BigInt(1);function rP(e,t){let r=t.negate();return e?r:t}function rT(e,t){let r=rm(e.Fp,t.map(e=>e.Z));return t.map((t,n)=>e.fromAffine(t.toAffine(r[n])))}function rx(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw Error("invalid window size, expected [1.."+t+"], got W="+e)}function rS(e,t){rx(e,t);let r=Math.ceil(t/e)+1,n=2**(e-1),i=2**e;return{windows:r,windowSize:n,mask:t2(e),maxNumber:i,shiftBy:BigInt(e)}}function rO(e,t,r){let{windowSize:n,mask:i,maxNumber:o,shiftBy:s}=r,a=Number(e&i),l=e>>s;a>n&&(a-=o,l+=rE);let c=t*n,u=c+Math.abs(a)-1,d=0===a;return{nextN:l,offset:u,isZero:d,isNeg:a<0,isNegF:t%2!=0,offsetF:c}}let rA=new WeakMap,rI=new WeakMap;function rR(e){return rI.get(e)||1}function rN(e){if(e!==r_)throw Error("invalid wNAF")}class rC{BASE;ZERO;Fn;bits;constructor(e,t){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=t}_unsafeLadder(e,t,r=this.ZERO){let n=e;for(;t>r_;)t&rE&&(r=r.add(n)),n=n.double(),t>>=rE;return r}precomputeWindow(e,t){let{windows:r,windowSize:n}=rS(t,this.bits),i=[],o=e,s=o;for(let e=0;e<r;e++){s=o,i.push(s);for(let e=1;e<n;e++)s=s.add(o),i.push(s);o=s.double()}return i}wNAF(e,t,r){if(!this.Fn.isValid(r))throw Error("invalid scalar");let n=this.ZERO,i=this.BASE,o=rS(e,this.bits);for(let e=0;e<o.windows;e++){let{nextN:s,offset:a,isZero:l,isNeg:c,isNegF:u,offsetF:d}=rO(r,e,o);r=s,l?i=i.add(rP(u,t[d])):n=n.add(rP(c,t[a]))}return rN(r),{p:n,f:i}}wNAFUnsafe(e,t,r,n=this.ZERO){let i=rS(e,this.bits);for(let e=0;e<i.windows&&r!==r_;e++){let{nextN:o,offset:s,isZero:a,isNeg:l}=rO(r,e,i);if(r=o,!a){let e=t[s];n=n.add(l?e.negate():e)}}return rN(r),n}getPrecomputes(e,t,r){let n=rA.get(t);return n||(n=this.precomputeWindow(t,e),1!==e&&("function"==typeof r&&(n=r(n)),rA.set(t,n))),n}cached(e,t,r){let n=rR(e);return this.wNAF(n,this.getPrecomputes(n,e,r),t)}unsafe(e,t,r,n){let i=rR(e);return 1===i?this._unsafeLadder(e,t,n):this.wNAFUnsafe(i,this.getPrecomputes(i,e,r),t,n)}createCache(e,t){rx(t,this.bits),rI.set(e,t),rA.delete(e)}hasCache(e){return 1!==rR(e)}}function rk(e,t,r){if(!t)return rv(e,{isLE:r});if(t.ORDER!==e)throw Error("Field.ORDER must match order: Fp == p, Fn == n");return t8(t,rp.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",BYTES:"number",BITS:"number"})),t}function rz(e,t,r={},n){if(void 0===n&&(n="edwards"===e),!t||"object"!=typeof t)throw Error(`expected valid ${e} CURVE object`);for(let e of["p","n","h"]){let r=t[e];if(!("bigint"==typeof r&&r>r_))throw Error(`CURVE.${e} must be positive bigint`)}let i=rk(t.p,r.Fp,n),o=rk(t.n,r.Fn,n);for(let r of["Gx","Gy","a","weierstrass"===e?"b":"d"])if(!i.isValid(t[r]))throw Error(`CURVE.${r} must be valid field element of CURVE.Fp`);return{CURVE:t=Object.freeze(Object.assign({},t)),Fp:i,Fn:o}}function rj(e,t){return function(r){let n=e(r);return{secretKey:n,publicKey:t(n)}}}let rU=BigInt(0),rB=BigInt(1),rD=BigInt(2),rG=BigInt(8);class rF{static BASE;static ZERO;static Fp;static Fn;ep;constructor(e){this.ep=e}static fromBytes(e){t6()}static fromHex(e){t6()}get x(){return this.toAffine().x}get y(){return this.toAffine().y}clearCofactor(){return this}assertValidity(){this.ep.assertValidity()}toAffine(e){return this.ep.toAffine(e)}toHex(){return Q(this.toBytes())}toString(){return this.toHex()}isTorsionFree(){return!0}isSmallOrder(){return!1}add(e){return this.assertSame(e),this.init(this.ep.add(e.ep))}subtract(e){return this.assertSame(e),this.init(this.ep.subtract(e.ep))}multiply(e){return this.init(this.ep.multiply(e))}multiplyUnsafe(e){return this.init(this.ep.multiplyUnsafe(e))}double(){return this.init(this.ep.double())}negate(){return this.init(this.ep.negate())}precompute(e,t){return this.init(this.ep.precompute(e,t))}}let rL=BigInt(0),rM=BigInt(1),rq=BigInt(2),rH=BigInt(5),r$=BigInt(8),rK=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),rV={p:rK,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:r$,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")},rW=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function rZ(e,t){var r;let n,i,o,s,a,l,c,u,d,h,f,p,m,y,g=rs(t*t*t,rK),v=(r=e*rs(g*g*t,rK),n=BigInt(10),i=BigInt(20),o=BigInt(40),s=BigInt(80),l=ra(a=r*r%rK*r%rK,rq,rK)*a%rK,c=ra(l,rM,rK)*r%rK,u=ra(c,rH,rK)*c%rK,d=ra(u,n,rK)*u%rK,h=ra(d,i,rK)*d%rK,f=ra(h,o,rK)*h%rK,p=ra(f,s,rK)*f%rK,m=ra(p,s,rK)*f%rK,y=ra(m,n,rK)*u%rK,{pow_p_5_8:ra(y,rq,rK)*r%rK,b2:a}).pow_p_5_8,b=rs(e*g*v,rK),w=rs(t*b*b,rK),_=b,E=rs(b*rW,rK),P=w===e,T=w===rs(-e,rK),x=w===rs(-e*rW,rK);return P&&(b=_),(T||x)&&(b=E),rf(b,rK)&&(b=rs(-b,rK)),{isValid:P||T,value:b}}let rY=function(e,t={}){var r,n;let i,o,s,a,l,c=rz("edwards",e,t,t.FpFnLE),{Fp:u,Fn:d}=c,h=c.CURVE,{h:f}=h;t8(t,{},{uvRatio:"function"});let p=rD<<BigInt(8*d.BYTES)-rB,m=t.uvRatio||((e,t)=>{try{return{isValid:!0,value:u.sqrt(u.div(e,t))}}catch(e){return{isValid:!1,value:rU}}});if(r=h.Gx,n=h.Gy,i=u.sqr(r),o=u.sqr(n),s=u.add(u.mul(h.a,i),o),a=u.add(u.ONE,u.mul(h.d,u.mul(i,o))),!u.eql(s,a))throw Error("bad curve params: generator point");function y(e,t,r=!1){return t1("coordinate "+e,t,r?rB:rU,p),t}function g(e){if(!(e instanceof w))throw Error("EdwardsPoint expected")}let v=t4((e,t)=>{let r,n,{X:i,Y:o,Z:s}=e,a=e.is0();null==t&&(t=a?rG:u.inv(s));let l=(r=i*t,u.create(r)),c=(n=o*t,u.create(n)),d=u.mul(s,t);if(a)return{x:rU,y:rB};if(d!==rB)throw Error("invZ was invalid");return{x:l,y:c}}),b=t4(e=>{let t,r,n,i,o,s,a,l,c,d,f,p,{a:m,d:y}=h;if(e.is0())throw Error("bad point: ZERO");let{X:g,Y:v,Z:b,T:w}=e,_=(t=g*g,u.create(t)),E=(r=v*v,u.create(r)),P=(n=b*b,u.create(n)),T=(i=P*P,u.create(i));if(a=P*(o=_*m,s=u.create(o)+E,u.create(s)),u.create(a)!==(d=T+(c=y*(l=_*E,u.create(l)),u.create(c)),u.create(d)))throw Error("bad point: equation left != right (1)");if(f=g*v,u.create(f)!==(p=b*w,u.create(p)))throw Error("bad point: equation left != right (2)");return!0});class w{static BASE=new w(h.Gx,h.Gy,rB,(l=h.Gx*h.Gy,u.create(l)));static ZERO=new w(rU,rB,rB,rU);static Fp=u;static Fn=d;X;Y;Z;T;constructor(e,t,r,n){this.X=y("x",e),this.Y=y("y",t),this.Z=y("z",r,!0),this.T=y("t",n),Object.freeze(this)}static CURVE(){return h}static fromAffine(e){let t;if(e instanceof w)throw Error("extended point not allowed");let{x:r,y:n}=e||{};return y("x",r),y("y",n),new w(r,n,rB,(t=r*n,u.create(t)))}static fromBytes(e,t=!1){let r,n,i,o,s=u.BYTES,{a,d:l}=h;e=tQ(q(e,s,"point")),tK(t,"zip215");let c=tQ(e),d=e[s-1];c[s-1]=-129&d;let f=tY(c);t1("point.y",f,rU,t?p:u.ORDER);let y=(r=f*f,u.create(r)),{isValid:g,value:v}=m((n=y-rB,u.create(n)),(i=l*y-a,u.create(i)));if(!g)throw Error("bad point: invalid y coordinate");let b=(v&rB)===rB,_=(128&d)!=0;if(!t&&v===rU&&_)throw Error("bad point: x=0 and x_0=1");return _!==b&&(o=-v,v=u.create(o)),w.fromAffine({x:v,y:f})}static fromHex(e,t=!1){return w.fromBytes(et(e),t)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(e=8,t=!0){return _.createCache(this,e),t||this.multiply(rD),this}assertValidity(){b(this)}equals(e){let t,r,n,i;g(e);let{X:o,Y:s,Z:a}=this,{X:l,Y:c,Z:d}=e,h=(t=o*d,u.create(t)),f=(r=l*a,u.create(r)),p=(n=s*d,u.create(n)),m=(i=c*a,u.create(i));return h===f&&p===m}is0(){return this.equals(w.ZERO)}negate(){let e,t;return new w((e=-this.X,u.create(e)),this.Y,this.Z,(t=-this.T,u.create(t)))}double(){let e,t,r,n,i,o,s,a,l,c,d,{a:f}=h,{X:p,Y:m,Z:y}=this,g=(e=p*p,u.create(e)),v=(t=m*m,u.create(t)),b=(n=rD*(r=y*y,u.create(r)),u.create(n)),_=(i=f*g,u.create(i)),E=p+m,P=(o=E*E,s=u.create(o)-g-v,u.create(s)),T=_+v,x=T-b,S=_-v,O=(a=P*x,u.create(a)),A=(l=T*S,u.create(l)),I=(c=P*S,u.create(c));return new w(O,A,(d=x*T,u.create(d)),I)}add(e){let t,r,n,i,o,s,a,l,c,d;g(e);let{a:f,d:p}=h,{X:m,Y:y,Z:v,T:b}=this,{X:_,Y:E,Z:P,T:T}=e,x=(t=m*_,u.create(t)),S=(r=y*E,u.create(r)),O=(n=b*p*T,u.create(n)),A=(i=v*P,u.create(i)),I=(o=(m+y)*(_+E)-x-S,u.create(o)),R=A-O,N=A+O,C=(s=S-f*x,u.create(s)),k=(a=I*R,u.create(a)),z=(l=N*C,u.create(l)),j=(c=I*C,u.create(c));return new w(k,z,(d=R*N,u.create(d)),j)}subtract(e){return this.add(e.negate())}multiply(e){if(!d.isValidNot0(e))throw Error("invalid scalar: expected 1 <= sc < curve.n");let{p:t,f:r}=_.cached(this,e,e=>rT(w,e));return rT(w,[t,r])[0]}multiplyUnsafe(e,t=w.ZERO){if(!d.isValid(e))throw Error("invalid scalar: expected 0 <= sc < curve.n");return e===rU?w.ZERO:this.is0()||e===rB?this:_.unsafe(this,e,e=>rT(w,e),t)}isSmallOrder(){return this.multiplyUnsafe(f).is0()}isTorsionFree(){return _.unsafe(this,h.n).is0()}toAffine(e){return v(this,e)}clearCofactor(){return f===rB?this:this.multiplyUnsafe(f)}toBytes(){let{x:e,y:t}=this.toAffine(),r=u.toBytes(t);return r[r.length-1]|=e&rB?128:0,r}toHex(){return Q(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}let _=new rC(w,d.BITS);return w.BASE.precompute(8),w}(rV,{uvRatio:rZ}),rX=rY.Fp,rJ=rY.Fn,rQ=function(e,t,r={}){if("function"!=typeof t)throw Error('"hash" function param is required');t8(r,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});let{prehash:n}=r,{BASE:i,Fp:o,Fn:s}=e,a=r.randomBytes||ei,l=r.adjustScalarBytes||(e=>e),c=r.domain||((e,t,r)=>{if(tK(r,"phflag"),t.length||r)throw Error("Contexts/pre-hash are not supported");return e});function u(e){return s.create(tY(e))}function d(e){let r,n,o,s,a,{head:c,prefix:d,scalar:h}=(r=y.secretKey,q(e,y.secretKey,"secretKey"),o=l((n=q(t(e),2*r,"hashedSecretKey")).slice(0,r)),s=n.slice(r,2*r),a=u(o),{head:o,prefix:s,scalar:a}),f=i.multiply(h),p=f.toBytes();return{head:c,prefix:d,scalar:h,point:f,pointBytes:p}}function h(e){return d(e).pointBytes}function f(e=Uint8Array.of(),...r){return u(t(c(er(...r),q(e,void 0,"context"),!!n)))}let p={zip215:!0},m=o.BYTES,y={secretKey:m,publicKey:m,signature:2*m,seed:m};function g(e=a(y.seed)){return q(e,y.seed,"seed")}return Object.freeze({keygen:rj(g,h),getPublicKey:h,sign:function(e,t,r={}){e=q(e,void 0,"message"),n&&(e=n(e));let{prefix:o,scalar:a,pointBytes:l}=d(t),c=f(r.context,o,e),u=i.multiply(c).toBytes(),h=f(r.context,u,l,e),p=s.create(c+h*a);if(!s.isValid(p))throw Error("sign failed: invalid s");return q(er(u,s.toBytes(p)),y.signature,"result")},verify:function(t,r,o,s=p){let a,l,c,{context:u,zip215:d}=s,h=y.signature;t=q(t,h,"signature"),r=q(r,void 0,"message"),o=q(o,y.publicKey,"publicKey"),void 0!==d&&tK(d,"zip215"),n&&(r=n(r));let m=h/2,g=t.subarray(0,m),v=tY(t.subarray(m,h));try{a=e.fromBytes(o,d),l=e.fromBytes(g,d),c=i.multiplyUnsafe(v)}catch(e){return!1}if(!d&&a.isSmallOrder())return!1;let b=f(u,l.toBytes(),a.toBytes(),r);return l.add(a.multiplyUnsafe(b)).subtract(c).clearCofactor().is0()},utils:{getExtendedPublicKey:d,randomSecretKey:g,isValidSecretKey:function(e){return L(e)&&e.length===s.BYTES},isValidPublicKey:function(t,r){try{return!!e.fromBytes(t,r)}catch(e){return!1}},toMontgomery(t){let{y:r}=e.fromBytes(t),n=y.publicKey,i=32===n;if(!i&&57!==n)throw Error("only defined for 25519 and 448");let s=i?o.div(rB+r,rB-r):o.div(r-rB,r+rB);return o.toBytes(s)},toMontgomerySecret(e){let r=y.secretKey;return q(e,r),l(t(e.subarray(0,r))).subarray(0,r)}},Point:e,lengths:y})}(rY,tq,Object.assign({adjustScalarBytes:function(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}},{})),r0=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),r1=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class r2 extends rF{static BASE=new r2(rY.BASE);static ZERO=new r2(rY.ZERO);static Fp=rX;static Fn=rJ;constructor(e){super(e)}static fromAffine(e){return new r2(rY.fromAffine(e))}assertSame(e){if(!(e instanceof r2))throw Error("RistrettoPoint expected")}init(e){return new r2(e)}static fromBytes(e){let t,r,n,i,o,s,a,l,c,u,d,h,f;q(e,32);let{a:p,d:m}=rV,y=rX.create(tY(e)&r1);if(!function(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return 0===r}(rX.toBytes(y),e)||rf(y,rK))throw Error("invalid ristretto255 encoding 1");let g=(t=y*y,rX.create(t)),v=(r=rM+p*g,rX.create(r)),b=(n=rM-p*g,rX.create(n)),w=(i=v*v,rX.create(i)),_=(o=b*b,rX.create(o)),E=(s=p*m*w-_,rX.create(s)),{isValid:P,value:T}=(a=E*_,rZ(rM,rX.create(a))),x=(l=T*b,rX.create(l)),S=(c=T*x*E,rX.create(c)),O=(u=(y+y)*x,rX.create(u));rf(O,rK)&&(d=-O,O=rX.create(d));let A=(h=v*S,rX.create(h)),I=(f=O*A,rX.create(f));if(!P||rf(I,rK)||A===rL)throw Error("invalid ristretto255 encoding 2");return new r2(new rY(O,A,rM,I))}static fromHex(e){return r2.fromBytes(et(e))}toBytes(){let e,t,r,n,i,o,s,a,l,c,u,d,h,{X:f,Y:p,Z:m,T:y}=this.ep,g=(e=m+p,r=rX.create(e)*(t=m-p,rX.create(t)),rX.create(r)),v=(n=f*p,rX.create(n)),{value:b}=(o=g*(i=v*v,rX.create(i)),rZ(rM,rX.create(o))),w=(s=b*g,rX.create(s)),_=(a=b*v,rX.create(a)),E=(l=w*_*y,rX.create(l));if(rf(y*E,rK)){let e,t,r=(e=p*rW,rX.create(e)),n=(t=f*rW,rX.create(t));f=r,p=n,h=rX.create(w*r0)}else h=_;rf(f*E,rK)&&(c=-p,p=rX.create(c));let P=(u=(m-p)*h,rX.create(u));return rf(P,rK)&&(d=-P,P=rX.create(d)),rX.toBytes(P)}equals(e){let t,r,n,i;this.assertSame(e);let{X:o,Y:s}=this.ep,{X:a,Y:l}=e.ep,c=(t=o*l,rX.create(t)===(r=s*a,rX.create(r))),u=(n=s*l,rX.create(n)===(i=o*a,rX.create(i)));return c||u}is0(){return this.equals(r2.ZERO)}}class r8{oHash;iHash;blockLen;outputLen;finished=!1;destroyed=!1;constructor(e,t){if(H(e),q(t,void 0,"key"),this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,n=new Uint8Array(r);n.set(t.length>r?e.create().update(t).digest():t);for(let e=0;e<n.length;e++)n[e]^=54;this.iHash.update(n),this.oHash=e.create();for(let e=0;e<n.length;e++)n[e]^=106;this.oHash.update(n),V(n)}update(e){return $(this),this.iHash.update(e),this}digestInto(e){$(this),q(e,this.outputLen,"output"),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||=Object.create(Object.getPrototypeOf(this),{});let{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:o,outputLen:s}=this;return e.finished=n,e.destroyed=i,e.blockLen=o,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}let r6=(e,t,r)=>new r8(e,t).update(r).digest();r6.create=(e,t)=>new r8(e,t);let r4=(e,t)=>(e+(e>=0?t:-t)/nt)/t;function r3(e){if(!["compact","recovered","der"].includes(e))throw Error('Signature format must be "compact", "recovered", or "der"');return e}function r5(e,t){let r={};for(let n of Object.keys(t))r[n]=void 0===e[n]?t[n]:e[n];return tK(r.lowS,"lowS"),tK(r.prehash,"prehash"),void 0!==r.format&&r3(r.format),r}let r9={Err:class extends Error{constructor(e=""){super(e)}},_tlv:{encode:(e,t)=>{let{Err:r}=r9;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(1&t.length)throw new r("tlv.encode: unpadded data");let n=t.length/2,i=tW(n);if(i.length/2&128)throw new r("tlv.encode: long form length too big");let o=n>127?tW(i.length/2|128):"";return tW(e)+o+i+t},decode(e,t){let{Err:r}=r9,n=0;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length<2||t[n++]!==e)throw new r("tlv.decode: wrong tlv");let i=t[n++],o=0;if(128&i){let e=127&i;if(!e)throw new r("tlv.decode(long): indefinite length not supported");if(e>4)throw new r("tlv.decode(long): byte length is too big");let s=t.subarray(n,n+e);if(s.length!==e)throw new r("tlv.decode: length bytes not complete");if(0===s[0])throw new r("tlv.decode(long): zero leftmost byte");for(let e of s)o=o<<8|e;if(n+=e,o<128)throw new r("tlv.decode(long): not minimal encoding")}else o=i;let s=t.subarray(n,n+o);if(s.length!==o)throw new r("tlv.decode: wrong value length");return{v:s,l:t.subarray(n+o)}}},_int:{encode(e){let{Err:t}=r9;if(e<r7)throw new t("integer: negative integers are not allowed");let r=tW(e);if(8&Number.parseInt(r[0],16)&&(r="00"+r),1&r.length)throw new t("unexpected DER parsing assertion: unpadded hex");return r},decode(e){let{Err:t}=r9;if(128&e[0])throw new t("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("invalid signature integer: unnecessary leading zero");return tZ(Q(e))}},toSig(e){let{Err:t,_int:r,_tlv:n}=r9,i=q(e,void 0,"signature"),{v:o,l:s}=n.decode(48,i);if(s.length)throw new t("invalid signature: left bytes after parsing");let{v:a,l:l}=n.decode(2,o),{v:c,l:u}=n.decode(2,l);if(u.length)throw new t("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(c)}},hexFromSig(e){let{_tlv:t,_int:r}=r9,n=t.encode(2,r.encode(e.r)),i=t.encode(2,r.encode(e.s));return t.encode(48,n+i)}},r7=BigInt(0),ne=BigInt(1),nt=BigInt(2),nr=BigInt(3),nn=BigInt(4);function ni(e){return Uint8Array.of(e?2:3)}function no(e,t){return{secretKey:t.BYTES,publicKey:1+e.BYTES,publicKeyUncompressed:1+2*e.BYTES,publicKeyHasPrefix:!0,signature:2*t.BYTES}}let ns={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},na={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},nl=BigInt(2),nc=rv(ns.p,{sqrt:function(e){let t=ns.p,r=BigInt(3),n=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),a=BigInt(44),l=BigInt(88),c=e*e*e%t,u=c*c*e%t,d=ra(u,r,t)*u%t,h=ra(d,r,t)*u%t,f=ra(h,nl,t)*c%t,p=ra(f,i,t)*f%t,m=ra(p,o,t)*p%t,y=ra(m,a,t)*m%t,g=ra(y,l,t)*y%t,v=ra(g,a,t)*m%t,b=ra(v,r,t)*u%t,w=ra(b,s,t)*p%t,_=ra(w,n,t)*c%t,E=ra(_,nl,t);if(!nc.eql(nc.sqr(E),e))throw Error("Cannot find square root");return E}}),nu=function(e,t,r={}){H(t),t8(r,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});let n=(r=Object.assign({},r)).randomBytes||ei,i=r.hmac||((e,r)=>r6(t,e,r)),{Fp:o,Fn:s}=e,{ORDER:a,BITS:l}=s,{keygen:c,getPublicKey:u,getSharedSecret:d,utils:h,lengths:f}=function(e,t={}){let{Fn:r}=e,n=t.randomBytes||ei,i=Object.assign(no(e.Fp,r),{seed:rw(r.ORDER)});function o(e=n(i.seed)){return function(e,t,r=!1){q(e);let n=e.length,i=rb(t),o=rw(t);if(n<16||n<o||n>1024)throw Error("expected "+o+"-1024 bytes of input, got "+n);let s=rs(r?tY(e):tZ(Q(e)),t-t5)+t5;return r?tJ(s,i):tX(s,i)}(q(e,i.seed,"seed"),r.ORDER)}function s(t,n=!0){return e.BASE.multiply(r.fromBytes(t)).toBytes(n)}function a(e){let{secretKey:t,publicKey:n,publicKeyUncompressed:o}=i;if(!L(e)||"_lengths"in r&&r._lengths||t===n)return;let s=q(e,void 0,"key").length;return s===n||s===o}let l=rj(o,s);return Object.freeze({getPublicKey:s,getSharedSecret:function(t,n,i=!0){if(!0===a(t))throw Error("first arg must be private key");if(!1===a(n))throw Error("second arg must be public key");let o=r.fromBytes(t);return e.fromBytes(n).multiply(o).toBytes(i)},keygen:l,Point:e,utils:{isValidSecretKey:function(e){try{let t=r.fromBytes(e);return r.isValidNot0(t)}catch(e){return!1}},isValidPublicKey:function(t,r){let{publicKey:n,publicKeyUncompressed:o}=i;try{let i=t.length;if(!0===r&&i!==n||!1===r&&i!==o)return!1;return!!e.fromBytes(t)}catch(e){return!1}},randomSecretKey:o},lengths:i})}(e,r),p={prehash:!0,lowS:"boolean"!=typeof r.lowS||r.lowS,format:"compact",extraEntropy:!1},m=a*nt<o.ORDER;function y(e,t){if(!s.isValidNot0(t))throw Error(`invalid signature ${e}: out of range 1..Point.Fn.ORDER`);return t}function g(){if(m)throw Error('"recovered" sig type is not supported for cofactor >2 curves')}function v(e,t){r3(t);let r=f.signature;return q(e,"compact"===t?r:"recovered"===t?r+1:void 0)}class b{r;s;recovery;constructor(e,t,r){if(this.r=y("r",e),this.s=y("s",t),null!=r){if(g(),![0,1,2,3].includes(r))throw Error("invalid recovery id");this.recovery=r}Object.freeze(this)}static fromBytes(e,t=p.format){let r;if(v(e,t),"der"===t){let{r:t,s:r}=r9.toSig(q(e));return new b(t,r)}"recovered"===t&&(r=e[0],t="compact",e=e.subarray(1));let n=f.signature/2,i=e.subarray(0,n),o=e.subarray(n,2*n);return new b(s.fromBytes(i),s.fromBytes(o),r)}static fromHex(e,t){return this.fromBytes(et(e),t)}assertRecovery(){let{recovery:e}=this;if(null==e)throw Error("invalid recovery id: must be present");return e}addRecoveryBit(e){return new b(this.r,this.s,e)}recoverPublicKey(t){let{r,s:n}=this,i=this.assertRecovery(),l=2===i||3===i?r+a:r;if(!o.isValid(l))throw Error("invalid recovery id: sig.r+curve.n != R.x");let c=o.toBytes(l),u=e.fromBytes(er(ni((1&i)==0),c)),d=s.inv(l),h=_(q(t,void 0,"msgHash")),f=s.create(-h*d),p=s.create(n*d),m=e.BASE.multiplyUnsafe(f).add(u.multiplyUnsafe(p));if(m.is0())throw Error("invalid recovery: point at infinify");return m.assertValidity(),m}hasHighS(){return this.s>a>>ne}toBytes(e=p.format){if(r3(e),"der"===e)return et(r9.hexFromSig(this));let{r:t,s:r}=this,n=s.toBytes(t),i=s.toBytes(r);return"recovered"===e?(g(),er(Uint8Array.of(this.assertRecovery()),n,i)):er(n,i)}toHex(e){return Q(this.toBytes(e))}}let w=r.bits2int||function(e){if(e.length>8192)throw Error("input is too large");let t=tZ(Q(e)),r=8*e.length-l;return r>0?t>>BigInt(r):t},_=r.bits2int_modN||function(e){return s.create(w(e))},E=t2(l);function P(e){return t1("num < 2^"+l,e,r7,E),s.toBytes(e)}function T(e,r){return q(e,void 0,"message"),r?q(t(e),void 0,"prehashed message"):e}return Object.freeze({keygen:c,getPublicKey:u,getSharedSecret:d,utils:h,lengths:f,Point:e,sign:function(r,o,l={}){let{seed:c,k2sig:u}=function(t,r,i){let{lowS:o,prehash:l,extraEntropy:c}=r5(i,p),u=_(t=T(t,l)),d=s.fromBytes(r);if(!s.isValidNot0(d))throw Error("invalid private key");let h=[P(d),P(u)];if(null!=c&&!1!==c){let e=!0===c?n(f.secretKey):c;h.push(q(e,void 0,"extraEntropy"))}return{seed:er(...h),k2sig:function(t){let r=w(t);if(!s.isValidNot0(r))return;let n=s.inv(r),i=e.BASE.multiply(r).toAffine(),l=s.create(i.x);if(l===r7)return;let c=s.create(n*s.create(u+l*d));if(c===r7)return;let h=2*(i.x!==l)|Number(i.y&ne),f=c;return o&&c>a>>ne&&(f=s.neg(c),h^=1),new b(l,f,m?void 0:h)}}}(r,o,l);return(function(e,t,r){if(M(e,"hashLen"),M(t,"qByteLen"),"function"!=typeof r)throw Error("hmacFn must be a function");let n=e=>new Uint8Array(e),i=Uint8Array.of(),o=Uint8Array.of(0),s=Uint8Array.of(1),a=n(e),l=n(e),c=0,u=()=>{a.fill(1),l.fill(0),c=0},d=(...e)=>r(l,er(a,...e)),h=(e=i)=>{l=d(o,e),a=d(),0!==e.length&&(l=d(s,e),a=d())},f=()=>{if(c++>=1e3)throw Error("drbg: tried max amount of iterations");let e=0,r=[];for(;e<t;){let t=(a=d()).slice();r.push(t),e+=a.length}return er(...r)};return(e,t)=>{let r;for(u(),h(e);!(r=t(f()));)h();return u(),r}})(t.outputLen,s.BYTES,i)(c,u).toBytes(l.format)},verify:function(t,r,n,i={}){let{lowS:o,prehash:a,format:l}=r5(i,p);if(n=q(n,void 0,"publicKey"),r=T(r,a),!L(t))throw Error("verify expects Uint8Array signature"+(t instanceof b?", use sig.toBytes()":""));v(t,l);try{let i=b.fromBytes(t,l),a=e.fromBytes(n);if(o&&i.hasHighS())return!1;let{r:c,s:u}=i,d=_(r),h=s.inv(u),f=s.create(d*h),p=s.create(c*h),m=e.BASE.multiplyUnsafe(f).add(a.multiplyUnsafe(p));if(m.is0())return!1;return s.create(m.x)===c}catch(e){return!1}},recoverPublicKey:function(e,t,r={}){let{prehash:n}=r5(r,p);return t=T(t,n),b.fromBytes(e,"recovered").recoverPublicKey(t).toBytes()},Signature:b,hash:t})}(function(e,t={}){let r=rz("weierstrass",e,t),{Fp:n,Fn:i}=r,o=r.CURVE,{h:s,n:a}=o;t8(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object"});let{endo:l}=t;if(l&&(!n.is0(o.a)||"bigint"!=typeof l.beta||!Array.isArray(l.basises)))throw Error('invalid endo: expected "beta": bigint and "basises": array');let c=no(n,i);function u(){if(!n.isOdd)throw Error("compression is not supported: Field does not have .isOdd()")}let d=t.toBytes||function(e,t,r){let{x:i,y:o}=t.toAffine(),s=n.toBytes(i);return(tK(r,"isCompressed"),r)?(u(),er(ni(!n.isOdd(o)),s)):er(Uint8Array.of(4),s,n.toBytes(o))},h=t.fromBytes||function(e){q(e,void 0,"Point");let{publicKey:t,publicKeyUncompressed:r}=c,i=e.length,o=e[0],s=e.subarray(1);if(i===t&&(2===o||3===o)){let e,t=n.fromBytes(s);if(!n.isValid(t))throw Error("bad point: is not on curve, wrong x");let r=f(t);try{e=n.sqrt(r)}catch(e){throw Error("bad point: is not on curve, sqrt error"+(e instanceof Error?": "+e.message:""))}return u(),(1&o)==1!==n.isOdd(e)&&(e=n.neg(e)),{x:t,y:e}}if(i===r&&4===o){let e=n.BYTES,t=n.fromBytes(s.subarray(0,e)),r=n.fromBytes(s.subarray(e,2*e));if(!p(t,r))throw Error("bad point: is not on curve");return{x:t,y:r}}throw Error(`bad point: got length ${i}, expected compressed=${t} or uncompressed=${r}`)};function f(e){let t=n.sqr(e),r=n.mul(t,e);return n.add(n.add(r,n.mul(e,o.a)),o.b)}function p(e,t){let r=n.sqr(t),i=f(e);return n.eql(r,i)}if(!p(o.Gx,o.Gy))throw Error("bad curve params: generator point");let m=n.mul(n.pow(o.a,nr),nn),y=n.mul(n.sqr(o.b),BigInt(27));if(n.is0(n.add(m,y)))throw Error("bad curve params: a or b");function g(e,t,r=!1){if(!n.isValid(t)||r&&n.is0(t))throw Error(`bad point coordinate ${e}`);return t}function v(e){if(!(e instanceof P))throw Error("Weierstrass Point expected")}function b(e){if(!l||!l.basises)throw Error("no endo");return function(e,t,r){let[[n,i],[o,s]]=t,a=r4(s*e,r),l=r4(-i*e,r),c=e-a*n-l*o,u=-a*i-l*s,d=c<r7,h=u<r7;d&&(c=-c),h&&(u=-u);let f=t2(Math.ceil(function(e){let t;for(t=0;e>tH;e>>=t$,t+=1);return t}(r)/2))+ne;if(c<r7||c>=f||u<r7||u>=f)throw Error("splitScalar (endomorphism): failed, k="+e);return{k1neg:d,k1:c,k2neg:h,k2:u}}(e,l.basises,i.ORDER)}let w=t4((e,t)=>{let{X:r,Y:i,Z:o}=e;if(n.eql(o,n.ONE))return{x:r,y:i};let s=e.is0();null==t&&(t=s?n.ONE:n.inv(o));let a=n.mul(r,t),l=n.mul(i,t),c=n.mul(o,t);if(s)return{x:n.ZERO,y:n.ZERO};if(!n.eql(c,n.ONE))throw Error("invZ was invalid");return{x:a,y:l}}),_=t4(e=>{if(e.is0()){if(t.allowInfinityPoint&&!n.is0(e.Y))return;throw Error("bad point: ZERO")}let{x:r,y:i}=e.toAffine();if(!n.isValid(r)||!n.isValid(i))throw Error("bad point: x or y not field elements");if(!p(r,i))throw Error("bad point: equation left != right");if(!e.isTorsionFree())throw Error("bad point: not in prime-order subgroup");return!0});function E(e,t,r,i,o){return r=new P(n.mul(r.X,e),r.Y,r.Z),t=rP(i,t),r=rP(o,r),t.add(r)}class P{static BASE=new P(o.Gx,o.Gy,n.ONE);static ZERO=new P(n.ZERO,n.ONE,n.ZERO);static Fp=n;static Fn=i;X;Y;Z;constructor(e,t,r){this.X=g("x",e),this.Y=g("y",t,!0),this.Z=g("z",r),Object.freeze(this)}static CURVE(){return o}static fromAffine(e){let{x:t,y:r}=e||{};if(!e||!n.isValid(t)||!n.isValid(r))throw Error("invalid affine point");if(e instanceof P)throw Error("projective point not allowed");return n.is0(t)&&n.is0(r)?P.ZERO:new P(t,r,n.ONE)}static fromBytes(e){let t=P.fromAffine(h(q(e,void 0,"point")));return t.assertValidity(),t}static fromHex(e){return P.fromBytes(et(e))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(e=8,t=!0){return x.createCache(this,e),t||this.multiply(nr),this}assertValidity(){_(this)}hasEvenY(){let{y:e}=this.toAffine();if(!n.isOdd)throw Error("Field doesn't support isOdd");return!n.isOdd(e)}equals(e){v(e);let{X:t,Y:r,Z:i}=this,{X:o,Y:s,Z:a}=e,l=n.eql(n.mul(t,a),n.mul(o,i)),c=n.eql(n.mul(r,a),n.mul(s,i));return l&&c}negate(){return new P(this.X,n.neg(this.Y),this.Z)}double(){let{a:e,b:t}=o,r=n.mul(t,nr),{X:i,Y:s,Z:a}=this,l=n.ZERO,c=n.ZERO,u=n.ZERO,d=n.mul(i,i),h=n.mul(s,s),f=n.mul(a,a),p=n.mul(i,s);return p=n.add(p,p),u=n.mul(i,a),u=n.add(u,u),l=n.mul(e,u),c=n.mul(r,f),c=n.add(l,c),l=n.sub(h,c),c=n.add(h,c),c=n.mul(l,c),l=n.mul(p,l),u=n.mul(r,u),f=n.mul(e,f),p=n.sub(d,f),p=n.mul(e,p),p=n.add(p,u),u=n.add(d,d),d=n.add(u,d),d=n.add(d,f),d=n.mul(d,p),c=n.add(c,d),f=n.mul(s,a),f=n.add(f,f),d=n.mul(f,p),l=n.sub(l,d),u=n.mul(f,h),u=n.add(u,u),new P(l,c,u=n.add(u,u))}add(e){v(e);let{X:t,Y:r,Z:i}=this,{X:s,Y:a,Z:l}=e,c=n.ZERO,u=n.ZERO,d=n.ZERO,h=o.a,f=n.mul(o.b,nr),p=n.mul(t,s),m=n.mul(r,a),y=n.mul(i,l),g=n.add(t,r),b=n.add(s,a);g=n.mul(g,b),b=n.add(p,m),g=n.sub(g,b),b=n.add(t,i);let w=n.add(s,l);return b=n.mul(b,w),w=n.add(p,y),b=n.sub(b,w),w=n.add(r,i),c=n.add(a,l),w=n.mul(w,c),c=n.add(m,y),w=n.sub(w,c),d=n.mul(h,b),c=n.mul(f,y),d=n.add(c,d),c=n.sub(m,d),d=n.add(m,d),u=n.mul(c,d),m=n.add(p,p),m=n.add(m,p),y=n.mul(h,y),b=n.mul(f,b),m=n.add(m,y),y=n.sub(p,y),y=n.mul(h,y),b=n.add(b,y),p=n.mul(m,b),u=n.add(u,p),p=n.mul(w,b),c=n.mul(g,c),c=n.sub(c,p),p=n.mul(g,m),d=n.mul(w,d),new P(c,u,d=n.add(d,p))}subtract(e){return this.add(e.negate())}is0(){return this.equals(P.ZERO)}multiply(e){let r,n,{endo:o}=t;if(!i.isValidNot0(e))throw Error("invalid scalar: out of range");let s=e=>x.cached(this,e,e=>rT(P,e));if(o){let{k1neg:t,k1:i,k2neg:a,k2:l}=b(e),{p:c,f:u}=s(i),{p:d,f:h}=s(l);n=u.add(h),r=E(o.beta,c,d,t,a)}else{let{p:t,f:i}=s(e);r=t,n=i}return rT(P,[r,n])[0]}multiplyUnsafe(e){let{endo:r}=t;if(!i.isValid(e))throw Error("invalid scalar: out of range");if(e===r7||this.is0())return P.ZERO;if(e===ne)return this;if(x.hasCache(this))return this.multiply(e);if(!r)return x.unsafe(this,e);{let{k1neg:t,k1:n,k2neg:i,k2:o}=b(e),{p1:s,p2:a}=function(e,t,r,n){let i=t,o=e.ZERO,s=e.ZERO;for(;r>r_||n>r_;)r&rE&&(o=o.add(i)),n&rE&&(s=s.add(i)),i=i.double(),r>>=rE,n>>=rE;return{p1:o,p2:s}}(P,this,n,o);return E(r.beta,s,a,t,i)}}toAffine(e){return w(this,e)}isTorsionFree(){let{isTorsionFree:e}=t;return s===ne||(e?e(P,this):x.unsafe(this,a).is0())}clearCofactor(){let{clearCofactor:e}=t;return s===ne?this:e?e(P,this):this.multiplyUnsafe(s)}isSmallOrder(){return this.multiplyUnsafe(s).is0()}toBytes(e=!0){return tK(e,"isCompressed"),this.assertValidity(),d(P,this,e)}toHex(e=!0){return Q(this.toBytes(e))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}let T=i.BITS,x=new rC(P,t.endo?Math.ceil(T/2):T);return P.BASE.precompute(8),P}(ns,{Fp:nc,endo:na}),tM),nd={mainnet:{rpcUrl:"https://free.rpc.fastnear.com",networkId:"mainnet"},testnet:{rpcUrl:"https://rpc.testnet.fastnear.com",networkId:"testnet"},localnet:{rpcUrl:"http://localhost:3030",networkId:"localnet"},betanet:{rpcUrl:"https://rpc.betanet.near.org",networkId:"betanet"}},nh=BigInt("1000000000000000000000000");BigInt("1000000000000");let nf="30000000000000",np="ed25519:",nm="secp256k1:";(eE=eT||(eT={}))[eE.ED25519=0]="ED25519",eE[eE.SECP256K1=1]="SECP256K1";let ny=ex.b.struct({message:ex.b.string(),nonce:ex.b.array(ex.b.u8(),32),recipient:ex.b.string(),callbackUrl:ex.b.option(ex.b.string())});function ng(e){if(32!==e.nonce.length)throw Error("Nonce must be exactly 32 bytes");let t=ex.b.u32().serialize(0x8000019d),r=ny.serialize({message:e.message,nonce:Array.from(e.nonce),recipient:e.recipient,callbackUrl:e.callbackUrl??null}),n=new Uint8Array(t.length+r.length);return n.set(t,0),n.set(r,t.length),tM(n)}class nv{constructor(e){this.privateKey=e.slice(0,32);const t=e.slice(32);this.publicKey={keyType:eT.ED25519,data:t,toString:()=>np+E.encode(t)},this.secretKey=np+E.encode(e)}sign(e){let t=rQ.sign(e,this.privateKey);return{keyType:eT.ED25519,data:t}}signNep413Message(e,t){let r=ng(t),n=rQ.sign(r,this.privateKey);return{accountId:e,publicKey:this.publicKey.toString(),signature:_.encode(n)}}static fromRandom(){let e=rQ.utils.randomSecretKey(),t=rQ.getPublicKey(e),r=new Uint8Array(64);return r.set(e,0),r.set(t,32),new nv(r)}static fromString(e){let t=e.replace(np,"");return new nv(E.decode(t))}}class nb{constructor(e){this.privateKey=e.slice(0,32);const t=e.slice(32);this.publicKey={keyType:eT.SECP256K1,data:t,toString:()=>nm+E.encode(t)},this.secretKey=nm+E.encode(e)}sign(e){let t=nu.sign(e,this.privateKey,{format:"recovered"});return{keyType:eT.SECP256K1,data:t}}signNep413Message(e,t){let r=ng(t),n=nu.sign(r,this.privateKey,{format:"recovered"});return{accountId:e,publicKey:this.publicKey.toString(),signature:_.encode(n)}}static fromRandom(){let e=new Uint8Array(32);crypto.getRandomValues(e);let t=nu.getPublicKey(e,!1).slice(1),r=new Uint8Array(96);return r.set(e,0),r.set(t,32),new nb(r)}static fromString(e){let t=e.replace(nm,"");return new nb(E.decode(t))}}function nw(e){if(e.startsWith(np))return nv.fromString(e);if(e.startsWith(nm))return nb.fromString(e);throw new tl(`Unsupported key type: ${e}`)}function n_(e){if(e.startsWith(np)){let t=e.replace(np,""),r=E.decode(t);return{keyType:eT.ED25519,data:r,toString:()=>e}}if(e.startsWith(nm)){let t=e.replace(nm,""),r=E.decode(t);return{keyType:eT.SECP256K1,data:r,toString:()=>e}}throw new tl(`Unsupported public key type: ${e}`)}class nE{constructor(e){if(this.keys=new Map,e)for(const[t,r]of Object.entries(e)){const e=nw(r);this.keys.set(t,e)}}async add(e,t){this.keys.set(e,t)}async get(e){return this.keys.get(e)??null}async remove(e){this.keys.delete(e)}async list(){return Array.from(this.keys.keys())}clear(){this.keys.clear()}}let nP={NEAR:e=>`${e} NEAR`,yocto:e=>`${e} yocto`,ZERO:"0 yocto",ONE_NEAR:"1 NEAR",ONE_YOCTO:"1 yocto"};function nT(e){return/^[123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz]+$/.test(e)}tO.z.string().min(2,"Account ID must be at least 2 characters").max(64,"Account ID must be at most 64 characters").regex(/^(([a-z\d]+[-_])*[a-z\d]+\.)*([a-z\d]+[-_])*[a-z\d]+$/,"Account ID must contain only lowercase alphanumeric characters, hyphens, underscores, and dots"),tO.z.string().refine(e=>e.startsWith(np)||e.startsWith(nm),"Public key must start with 'ed25519:' or 'secp256k1:'").refine(e=>nT(e.startsWith(np)?e.slice(np.length):e.slice(nm.length)),"Public key must be valid base58 encoding");let nx=tO.z.string().refine(e=>e.startsWith(np)||e.startsWith(nm),"Private key must start with 'ed25519:' or 'secp256k1:'").refine(e=>{let t=e.startsWith(np)?e.slice(np.length):e.slice(nm.length);return t.length>0&&nT(t)},"Private key must be valid base58 encoding"),nS=tO.z.union([tO.z.string(),tO.z.bigint()]).transform(e=>(function(e){if("bigint"==typeof e)return e.toString();let t=e.trim(),r=t.match(/^([\d.]+)\s+NEAR$/i);if(r)return function(e){let t=e.split("."),r=t[0]||"0",n=(t[1]||"").padEnd(24,"0").substring(0,24);if(r.startsWith("-"))throw Error("NEAR amount must be non-negative");return(BigInt(r)*nh+BigInt(n)).toString()}(r[1]);let n=t.match(/^(\d+)\s+yocto$/i);if(n)return n[1];if(/^[\d.]+$/.test(t))throw Error(`Ambiguous amount: "${e}". Did you mean "${e} NEAR"?
  - Use Amount.NEAR(${e}) for NEAR
  - Use Amount.yocto(${e}n) for yoctoNEAR
  - Or write "${e} NEAR" or "${e} yocto"
  - Or pass ${e}n as bigint for yoctoNEAR

 TypeScript tip: Use 'as const' for variables:
   const amount = "10 NEAR" as const`);throw Error(`Invalid amount format: "${e}"
Expected formats:
  - "10 NEAR" or Amount.NEAR(10)
  - "1000000 yocto" or Amount.yocto(1000000n)
  - 1000000n (bigint, treated as yoctoNEAR)`)})(e)),nO=tO.z.string().transform(e=>(function(e){let t=("number"==typeof e?e.toString():e).trim(),r=t.match(/^([\d.]+)\s+Tgas$/i);if(r){let e=parseFloat(r[1]);if(Number.isNaN(e)||e<0)throw Error(`Invalid Tgas value: ${r[1]}`);return BigInt(Math.floor(1e12*e)).toString()}if(/^\d+$/.test(t))return t;throw Error(`Invalid gas format: "${e}"
Expected: "30 Tgas" or Gas.Tgas(30)
Or provide raw gas units as a number string`)})(e));function nA(e){return nS.parse(e)}let nI=tO.z.enum(["mainnet","testnet","localnet","betanet"]),nR=tO.z.object({rpcUrl:tO.z.string().url("RPC URL must be a valid URL"),networkId:tO.z.string().min(1,"Network ID is required")}),nN=tO.z.union([nI,nR]),nC=tO.z.enum(["NONE","INCLUDED","EXECUTED_OPTIMISTIC","INCLUDED_FINAL","EXECUTED","FINAL"]);tO.z.object({gas:tO.z.string().optional(),attachedDeposit:tO.z.union([tO.z.string(),tO.z.bigint()]).optional(),signerId:tO.z.string().optional(),waitUntil:nC.optional()}),tO.z.object({finality:tO.z.enum(["optimistic","near-final","final"]).optional(),blockId:tO.z.union([tO.z.number(),tO.z.string()]).optional()});let nk=tO.z.union([tO.z.string(),tO.z.record(tO.z.string(),tO.z.string()),tO.z.any()]),nz=tO.z.any(),nj=tO.z.object({maxRetries:tO.z.number().int().min(0),initialDelayMs:tO.z.number().int().min(0)}).partial(),nU=tO.z.object({network:nN.optional(),rpcUrl:tO.z.string().url("RPC URL must be a valid URL").optional(),headers:tO.z.record(tO.z.string(),tO.z.string()).optional(),keyStore:nk.optional(),signer:nz.optional(),privateKey:tO.z.union([nx,tO.z.instanceof(Uint8Array)]).optional(),wallet:tO.z.any().optional(),defaultSignerId:tO.z.string().optional(),defaultWaitUntil:nC.optional(),retryConfig:nj.optional()}),nB=tO.z.object({receiver_id:tO.z.string(),method_names:tO.z.array(tO.z.string()),allowance:tO.z.string().nullable().optional()}),nD=tO.z.union([tO.z.literal("FullAccess"),tO.z.object({FunctionCall:nB})]),nG=tO.z.object({result:tO.z.array(tO.z.number()),logs:tO.z.array(tO.z.string()),block_height:tO.z.number(),block_hash:tO.z.string()}),nF=tO.z.object({amount:tO.z.string(),locked:tO.z.string(),code_hash:tO.z.string(),storage_usage:tO.z.number(),storage_paid_at:tO.z.number(),block_height:tO.z.number(),block_hash:tO.z.string()}),nL=tO.z.object({nonce:tO.z.number(),permission:nD,block_height:tO.z.number(),block_hash:tO.z.string()});tO.z.object({public_key:tO.z.string(),access_key:nL});let nM=tO.z.object({version:tO.z.object({version:tO.z.string(),build:tO.z.string(),commit:tO.z.string().optional(),rustc_version:tO.z.string().optional()}),chain_id:tO.z.string(),genesis_hash:tO.z.string(),protocol_version:tO.z.number(),latest_protocol_version:tO.z.number(),rpc_addr:tO.z.string(),node_public_key:tO.z.string(),node_key:tO.z.string().nullable(),validator_account_id:tO.z.string().nullable(),validator_public_key:tO.z.string().nullable(),validators:tO.z.array(tO.z.object({account_id:tO.z.string()})),sync_info:tO.z.object({latest_block_hash:tO.z.string(),latest_block_height:tO.z.number(),latest_state_root:tO.z.string(),latest_block_time:tO.z.string(),syncing:tO.z.boolean(),earliest_block_hash:tO.z.string().optional(),earliest_block_height:tO.z.number().optional(),earliest_block_time:tO.z.string().optional(),epoch_id:tO.z.string().optional(),epoch_start_height:tO.z.number().optional()}),uptime_sec:tO.z.number().optional()}),nq=tO.z.object({gas_price:tO.z.string()});tO.z.object({block_hash:tO.z.string(),block_height:tO.z.number(),keys:tO.z.array(tO.z.object({public_key:tO.z.string(),access_key:tO.z.object({nonce:tO.z.number(),permission:nD})}))});let nH=tO.z.object({name:tO.z.string(),code:tO.z.number(),message:tO.z.string(),data:tO.z.any().optional(),cause:tO.z.object({name:tO.z.string(),info:tO.z.object({requested_account_id:tO.z.string().optional(),contract_id:tO.z.string().optional(),method_name:tO.z.string().optional(),ShardCongested:tO.z.boolean().optional(),ShardStuck:tO.z.boolean().optional()}).catchall(tO.z.any()).optional()}).optional()});tO.z.enum(["NONE","INCLUDED","EXECUTED_OPTIMISTIC","INCLUDED_FINAL","EXECUTED","FINAL"]);let n$=tO.z.union([tO.z.literal("Unknown"),tO.z.literal("Pending"),tO.z.object({SuccessValue:tO.z.string()}),tO.z.object({SuccessReceiptId:tO.z.string()}),tO.z.object({Failure:tO.z.object({error_message:tO.z.string().optional(),error_type:tO.z.string().optional()}).catchall(tO.z.any())})]),nK=tO.z.object({cost:tO.z.string().optional(),cost_category:tO.z.string().optional(),gas_used:tO.z.string().optional()}).catchall(tO.z.any()),nV=tO.z.object({version:tO.z.number(),gas_profile:tO.z.array(nK).nullable().optional()}),nW=tO.z.object({logs:tO.z.array(tO.z.string()),receipt_ids:tO.z.array(tO.z.string()),gas_burnt:tO.z.number(),tokens_burnt:tO.z.string(),executor_id:tO.z.string(),status:n$,metadata:nV.optional()}),nZ=tO.z.object({hash:tO.z.string(),direction:tO.z.enum(["Left","Right"])}),nY=tO.z.object({id:tO.z.string(),outcome:nW,block_hash:tO.z.string(),proof:tO.z.array(nZ)}),nX=tO.z.union([tO.z.literal("CreateAccount"),tO.z.object({CreateAccount:tO.z.object({})}),tO.z.object({Transfer:tO.z.object({deposit:tO.z.string()})}),tO.z.object({FunctionCall:tO.z.object({method_name:tO.z.string(),args:tO.z.string(),gas:tO.z.number(),deposit:tO.z.string()})}),tO.z.object({DeployContract:tO.z.object({code:tO.z.string()})}),tO.z.object({DeployGlobalContractByAccountId:tO.z.object({code:tO.z.string()})}),tO.z.object({DeployGlobalContractByCodeHash:tO.z.object({code:tO.z.string()})}),tO.z.object({Stake:tO.z.object({stake:tO.z.string(),public_key:tO.z.string()})}),tO.z.object({AddKey:tO.z.object({public_key:tO.z.string(),access_key:tO.z.object({nonce:tO.z.number(),permission:nD})})}),tO.z.object({DeleteKey:tO.z.object({public_key:tO.z.string()})}),tO.z.object({DeleteAccount:tO.z.object({beneficiary_id:tO.z.string()})}),tO.z.object({UseGlobalContractByAccountId:tO.z.object({account_id:tO.z.string()})}),tO.z.object({UseGlobalContractByCodeHash:tO.z.object({code_hash:tO.z.string()})}),tO.z.object({Delegate:tO.z.object({delegate_action:tO.z.object({sender_id:tO.z.string(),receiver_id:tO.z.string(),actions:tO.z.array(tO.z.any()),nonce:tO.z.number(),max_block_height:tO.z.number(),public_key:tO.z.string()}),signature:tO.z.string()})}),tO.z.object({DeterministicStateInit:tO.z.object({deposit:tO.z.string()})})]),nJ=tO.z.object({signer_id:tO.z.string(),public_key:tO.z.string(),nonce:tO.z.number(),receiver_id:tO.z.string(),actions:tO.z.array(nX),signature:tO.z.string(),hash:tO.z.string(),priority_fee:tO.z.number().optional()}),nQ=tO.z.object({hash:tO.z.string(),signer_id:tO.z.string(),receiver_id:tO.z.string(),nonce:tO.z.number()}),n0=tO.z.discriminatedUnion("final_execution_status",[tO.z.object({final_execution_status:tO.z.literal("NONE"),transaction:nQ.optional()}),tO.z.object({final_execution_status:tO.z.literal("INCLUDED"),transaction:nQ.optional()}),tO.z.object({final_execution_status:tO.z.literal("INCLUDED_FINAL"),transaction:nQ.optional()}),tO.z.object({final_execution_status:tO.z.literal("EXECUTED_OPTIMISTIC"),status:n$,transaction:nJ,transaction_outcome:nY,receipts_outcome:tO.z.array(nY)}),tO.z.object({final_execution_status:tO.z.literal("EXECUTED"),status:n$,transaction:nJ,transaction_outcome:nY,receipts_outcome:tO.z.array(nY)}),tO.z.object({final_execution_status:tO.z.literal("FINAL"),status:n$,transaction:nJ,transaction_outcome:nY,receipts_outcome:tO.z.array(nY)})]),n1=tO.z.object({predecessor_id:tO.z.string(),receiver_id:tO.z.string(),receipt_id:tO.z.string(),receipt:tO.z.union([tO.z.object({Action:tO.z.object({signer_id:tO.z.string(),signer_public_key:tO.z.string(),gas_price:tO.z.string(),output_data_receivers:tO.z.array(tO.z.any()),input_data_ids:tO.z.array(tO.z.string()),actions:tO.z.array(nX),is_promise_yield:tO.z.boolean().optional()})}),tO.z.object({Data:tO.z.object({data_id:tO.z.string(),data:tO.z.string().nullable().optional()})})]),priority:tO.z.number().optional()}),n2=tO.z.intersection(n0,tO.z.object({receipts:tO.z.array(n1)}));function n8(e){if("ActionError"in e&&"object"==typeof e.ActionError&&null!==e.ActionError){let t=e.ActionError;if("kind"in t&&"object"==typeof t.kind&&null!==t.kind){let r=t.kind,n=Object.keys(r)[0];if(!n)return JSON.stringify(e);let i=r[n];if(i&&"object"==typeof i&&null!==i){let e=Object.entries(i).map(([e,t])=>`${e}: ${t}`).join(", ");return`${n} (${e})`}return n}}return JSON.stringify(e)}function n6(e,t){if("object"==typeof e.outcome.status&&"Failure"in e.outcome.status){let r=e.outcome.status.Failure;if(r.ActionError?.kind?.FunctionCallError!==void 0||void 0!==r.FunctionCallError){let n=e.outcome.executor_id,i=e.outcome.logs;throw new ts(n,function(e){if(!e)return;let t=e.actions.find(e=>"object"==typeof e&&"FunctionCall"in e);if(t&&"object"==typeof t&&"FunctionCall"in t)return t.FunctionCall.method_name}(t),function(e){let t=e.ActionError?.kind?.FunctionCallError||e.FunctionCallError;if(t)return"string"==typeof t.ExecutionError?t.ExecutionError:"string"==typeof t.HostError?t.HostError:JSON.stringify(t)}(r),i)}}}function n4(e){return 408===e||429===e||503===e||e>=500&&e<600}function n3(e,t={}){if(!e||"object"!=typeof e||!("error"in e))return;let r=e.error;if(t.contractId)throw new ts(t.contractId,t.methodName,r);if((t.accountId||t.publicKey)&&r.includes("does not exist"))throw new tu(t.accountId||"unknown",t.publicKey||"unknown");throw new ta(`Query error: ${r}`)}class n5{constructor(e,t,r){this.url=e,this.headers=t||{},this.requestId=0,this.retryConfig={maxRetries:r?.maxRetries??4,initialDelayMs:r?.initialDelayMs??1e3}}async sleep(e){return new Promise(t=>setTimeout(t,e))}async call(e,t){let r={jsonrpc:"2.0",id:++this.requestId,method:e,params:t},n=null,i=1+this.retryConfig.maxRetries;for(let e=0;e<i;e++)try{"undefined"!=typeof process&&"true"===process.env.NEAR_RPC_DEBUG&&console.log("[RPC Request]",JSON.stringify(r,null,2));let e=await fetch(this.url,{method:"POST",headers:{"Content-Type":"application/json",...this.headers},body:JSON.stringify(r)});if(!e.ok)throw new ta(`HTTP ${e.status}: ${e.statusText}`,e.status,n4(e.status));let t=await e.json();if("undefined"!=typeof process&&"true"===process.env.NEAR_RPC_DEBUG&&console.log("[RPC Response]",JSON.stringify(t,null,2)),t.error&&function(e,t){if(!e)throw new ta("Unknown RPC error");try{let r=nH.parse(e),n=r.cause?.name,i=r.cause?.info||{};if("UNKNOWN_BLOCK"===n){let e,t=i.block_reference;if("string"==typeof t)e=t;else if(t&&"object"==typeof t){let n=t.block_id||t.BlockId;e=n?String(n):r.data||r.message}else e=r.data||r.message;throw new td(e)}if("INVALID_ACCOUNT"===n){let e=i.requested_account_id||"unknown";throw new th(e)}if("UNKNOWN_ACCOUNT"===n){let e=i.requested_account_id||"unknown";throw new tc(e)}if("UNAVAILABLE_SHARD"===n)throw new tf(r.message);if("NO_SYNCED_BLOCKS"===n||"NOT_SYNCED_YET"===n)throw new tp(r.message);if("NO_CONTRACT_CODE"===n){let e=i.contract_account_id||i.account_id||i.contract_id||"unknown";throw new tm(e)}if("TOO_LARGE_CONTRACT_STATE"===n){let e=i.account_id||i.contract_id||"unknown";throw new ty(e)}if("CONTRACT_EXECUTION_ERROR"===n){let e=i.contract_id||"unknown",t=i.method_name;throw new tg(e,t,i)}if("ActionError"===n){let e=i.contract_id||"unknown",t=i.method_name||"unknown",n=r.message||void 0;throw new ts(e,t,n)}if("UNKNOWN_CHUNK"===n){let e,t=i.chunk_hash,n=i.chunk_reference;if("string"==typeof t)e=t;else if("string"==typeof n)e=n;else if(n&&"object"==typeof n){let t=n.chunk_id;e=t?String(t):r.data||r.message}else e=r.data||r.message;throw new tv(e)}if("INVALID_SHARD_ID"===n){let e=i.shard_id||"unknown";throw new tb(e)}if("UNKNOWN_EPOCH"===n){let e,t=i.block_reference;if("string"==typeof t)e=t;else if(t&&"object"==typeof t){let n=t.block_id||t.BlockId;e=n?String(n):r.data||r.message}else e=r.data||r.message;throw new tw(e)}if("INVALID_TRANSACTION"===n){if(r.data&&"object"==typeof r.data){let e=r.data.TxExecutionError,t=e?.InvalidTxError||r.data.InvalidTxError,n=t?.InvalidNonce;if(n&&"ak_nonce"in n&&"tx_nonce"in n)throw new t_(n.tx_nonce,n.ak_nonce)}let e=i;if(r.data&&"object"==typeof r.data){let t=r.data.TxExecutionError||r.data.InvalidTxError;t&&(e={...i,...t})}throw new tE(r.message,e)}if("UNKNOWN_RECEIPT"===n){let e=i.receipt_id||"unknown";throw new tP(e)}if("TIMEOUT_ERROR"===n){let e=i.transaction_hash;throw new tx(r.message,e)}if("PARSE_ERROR"===n||"REQUEST_VALIDATION_ERROR"===r.name)throw new tT(r.message,i);if("INTERNAL_ERROR"===n||"INTERNAL_ERROR"===r.name)throw new tS(r.message,i);let o=!!t&&n4(t);throw new ta(`RPC error [${n||r.name}]: ${r.message}`,r.code,o)}catch(t){if(t instanceof to)throw t;throw new ta(`RPC error: ${e.message}`,e.code,!1)}}(t.error,e.status),void 0===t.result)throw new ta("RPC response missing result field");return t.result}catch(s){let t="retryable"in(n=s instanceof to?s:new ta(`Network request failed: ${s.message}`,void 0,!0))&&n.retryable,r=e+1<i;if(!t||!r)throw n;let o=this.retryConfig.initialDelayMs*2**e;await this.sleep(o)}throw n||new ta("Unknown error during RPC call")}async query(e,t){return this.call("query",{request_type:e,finality:"final",args_base64:"string"==typeof t?t:_.encode(t)})}async viewFunction(e,t,r={},n){let i=r instanceof Uint8Array?r:new TextEncoder().encode(JSON.stringify(r)),o=_.encode(i),s=await this.call("query",{request_type:"call_function",...n?.blockId?{block_id:n.blockId}:{finality:n?.finality||"final"},account_id:e,method_name:t,args_base64:o});return n3(s,{contractId:e,methodName:t}),nG.parse(s)}async getAccount(e,t){let r=await this.call("query",{request_type:"view_account",...t?.blockId?{block_id:t.blockId}:{finality:t?.finality||"optimistic"},account_id:e});return nF.parse(r)}async getAccessKey(e,t,r){let n=await this.call("query",{request_type:"view_access_key",...r?.blockId?{block_id:r.blockId}:{finality:r?.finality||"optimistic"},account_id:e,public_key:t});return n3(n,{accountId:e,publicKey:t}),nL.parse(n)}async sendTransaction(e,t){let r=_.encode(e),n=await this.call("send_tx",{signed_tx_base64:r,wait_until:t??"EXECUTED_OPTIMISTIC"}),i=n0.parse(n);if("NONE"!==i.final_execution_status&&"INCLUDED"!==i.final_execution_status&&"INCLUDED_FINAL"!==i.final_execution_status&&i.status&&"object"==typeof i.status&&"Failure"in i.status){i.transaction_outcome&&n6(i.transaction_outcome,i.transaction);let e=i.receipts_outcome?.find(e=>"object"==typeof e.outcome.status&&"Failure"in e.outcome.status);e&&n6(e,i.transaction);let t="Transaction execution failed",r=i.status.Failure;throw i.transaction_outcome&&"object"==typeof i.transaction_outcome.outcome.status&&"Failure"in i.transaction_outcome.outcome.status?t=n8(r=i.transaction_outcome.outcome.status.Failure):e&&"object"==typeof e.outcome.status&&"Failure"in e.outcome.status&&(t=n8(r=e.outcome.status.Failure)),new tE(t,r)}return i}async getTransactionStatus(e,t,r){let n=await this.call("EXPERIMENTAL_tx_status",{tx_hash:e,sender_account_id:t,wait_until:r??"EXECUTED_OPTIMISTIC"}),i=n2.parse(n);if("NONE"!==i.final_execution_status&&"INCLUDED"!==i.final_execution_status&&"INCLUDED_FINAL"!==i.final_execution_status&&i.status&&"object"==typeof i.status&&"Failure"in i.status){i.transaction_outcome&&n6(i.transaction_outcome,i.transaction);let e=i.receipts_outcome?.find(e=>"object"==typeof e.outcome.status&&"Failure"in e.outcome.status);e&&n6(e,i.transaction);let t="Transaction execution failed",r=i.status.Failure;throw i.transaction_outcome&&"object"==typeof i.transaction_outcome.outcome.status&&"Failure"in i.transaction_outcome.outcome.status?t=n8(r=i.transaction_outcome.outcome.status.Failure):e&&"object"==typeof e.outcome.status&&"Failure"in e.outcome.status&&(t=n8(r=e.outcome.status.Failure)),new tE(t,r)}return i}async getStatus(){let e=await this.call("status",[]);return nM.parse(e)}async getGasPrice(e=null){let t=await this.call("gas_price",[e]);return nq.parse(t)}}class n9{constructor(e,t,r,n,i="EXECUTED_OPTIMISTIC",o,s){this.signerId=e,this.actions=[],this.rpc=t,this.keyStore=r,void 0!==s&&(this.ensureKeyStoreReady=s),void 0!==n&&(this.signer=n),this.defaultWaitUntil=i,void 0!==o&&(this.wallet=o)}invalidateCache(){return delete this.cachedSignedTx,this}async resolveKeyPair(){if(this.keyPair)return this.keyPair;this.ensureKeyStoreReady&&await this.ensureKeyStoreReady();let e=await this.keyStore.get(this.signerId);if(!e)throw new tl(`No key found for account: ${this.signerId}`);return this.keyPair=e,e}transfer(e,t){let r=nA(t);return this.actions.push(tn(BigInt(r))),this.receiverId||(this.receiverId=e),this.invalidateCache()}functionCall(e,t,r={},n={}){var i;let o=r instanceof Uint8Array?r:new TextEncoder().encode(JSON.stringify(r)),s=n.gas?(i=n.gas,nO.parse(i)):nf,a=n.attachedDeposit?nA(n.attachedDeposit):"0";return this.actions.push(ti(t,o,BigInt(s),BigInt(a))),this.receiverId||(this.receiverId=e),this.invalidateCache()}createAccount(e){return this.actions.push({createAccount:{}}),this.receiverId||(this.receiverId=e),this.invalidateCache()}deleteAccount(e){return this.actions.push({deleteAccount:{beneficiaryId:e.beneficiary}}),this.receiverId||(this.receiverId=this.signerId),this.invalidateCache()}deployContract(e,t){return this.actions.push({deployContract:{code:t}}),this.receiverId||(this.receiverId=e),this.invalidateCache()}publishContract(e,t){return this.actions.push({deployGlobalContract:{code:e,deployMode:t?.identifiedBy==="hash"?{CodeHash:{}}:{AccountId:{}}}}),this.receiverId||(this.receiverId=this.signerId),this.invalidateCache()}deployFromPublished(e){return this.actions.push(function(e){let t;if("accountId"in e)t={AccountId:e.accountId};else{let r="string"==typeof e.codeHash?E.decode(e.codeHash):e.codeHash;if(32!==r.length)throw Error(`Code hash must be 32 bytes, got ${r.length} bytes`);t={CodeHash:Array.from(r)}}return{useGlobalContract:{contractIdentifier:t}}}(e)),this.receiverId||(this.receiverId=this.signerId),this.invalidateCache()}stateInit(e){var t;let r=nA(e.deposit),n={code:e.code,deposit:BigInt(r)};if(void 0!==e.data&&(n.data=e.data),this.actions.push({deterministicStateInit:{stateInit:{V1:{code:"accountId"in n.code?{AccountId:n.code.accountId}:{CodeHash:Array.from(eS(n.code.codeHash))},data:n.data??new Map}},deposit:n.deposit}}),!this.receiverId){let r,n,i,o={code:e.code};void 0!==e.data&&(o.data=e.data),this.receiverId=(i=e_((r="accountId"===(t={code:"accountId"in o.code?{type:"accountId",accountId:o.code.accountId}:{type:"codeHash",hash:eS(o.code.codeHash)},data:o.data??new Map}).code.type?{AccountId:t.code.accountId}:{CodeHash:Array.from(t.code.hash)},n=new Map(Array.from(t.data.entries()).sort((e,t)=>{let[r]=e,[n]=t;for(let e=0;e<Math.min(r.length,n.length);e++){let t=r[e],i=n[e];if(void 0!==t&&void 0!==i&&t!==i)return t-i}return r.length-n.length})),eI.serialize({V1:{code:r,data:n}}))).slice(12,32),`0s${T.encode(i)}`)}return this.invalidateCache()}stake(e,t){let r=nA(t),n=n_(e);return this.actions.push({stake:{stake:BigInt(r),publicKey:e5(n)}}),this.receiverId||(this.receiverId=this.signerId),this.invalidateCache()}addKey(e,t){let r=n_(e),n="fullAccess"===t.type?{fullAccess:{}}:{functionCall:{receiverId:t.receiverId,methodNames:t.methodNames||[],allowance:t.allowance?BigInt(nA(t.allowance)):null}};return this.actions.push({addKey:{publicKey:e5(r),accessKey:{nonce:BigInt(0),permission:n}}}),this.receiverId||(this.receiverId=this.signerId),this.invalidateCache()}deleteKey(e,t){let r=n_(t);return this.actions.push({deleteKey:{publicKey:e5(r)}}),this.receiverId||(this.receiverId=e),this.invalidateCache()}signedDelegateAction(e){return this.actions.push(e),this.receiverId=e.signedDelegate.delegateAction.senderId,this.invalidateCache()}async delegate(e){let t,r,n,i,o,s,a=e??{};if(0===this.actions.length)throw new to("Delegate action requires at least one action to perform","INVALID_TRANSACTION");if(this.actions.some(e=>"signedDelegate"in e))throw new to("Delegate actions cannot contain nested signed delegate actions","INVALID_TRANSACTION");let l=a.receiverId??this.receiverId;if(!l)throw new to("Delegate action requires a receiver. Set receiverId via the first action or provide it explicitly.","INVALID_TRANSACTION");let c=await this.resolveKeyPair();if(!function(e,t){if(e.keyType!==t.keyType||e.data.length!==t.data.length)return!1;for(let r=0;r<e.data.length;r+=1)if(e.data[r]!==t.data[r])return!1;return!0}(t=void 0===a.publicKey?c.publicKey:"string"==typeof a.publicKey?n_(a.publicKey):a.publicKey,c.publicKey))throw new tl("Delegate action public key must match the signer key. Use signWith() when you need a different key.");if(r=void 0!==a.nonce?a.nonce:BigInt((await this.rpc.getAccessKey(this.signerId,t.toString())).nonce)+1n,void 0!==a.maxBlockHeight)n=a.maxBlockHeight;else{let e=await this.rpc.getStatus(),t=BigInt(a.blockHeightOffset??200);n=BigInt(e.sync_info.latest_block_height)+t}let u=this.actions.map(e=>e),d=new tr(this.signerId,l,u,r,n,t),h=tM((i=ex.b.u32().serialize(0x4000016e),o=e2.serialize({senderId:d.senderId,receiverId:d.receiverId,actions:d.actions,nonce:d.nonce,maxBlockHeight:d.maxBlockHeight,publicKey:e5(d.publicKey)}),(s=new Uint8Array(i.length+o.length)).set(i,0),s.set(o,i.length),s)),f=c.sign(h),p={signedDelegate:{delegateAction:{senderId:d.senderId,receiverId:d.receiverId,actions:d.actions,nonce:d.nonce,maxBlockHeight:d.maxBlockHeight,publicKey:e5(d.publicKey)},signature:e9(f)}},m=a.payloadFormat??"base64",y=function(e,t="base64"){let r=e8.serialize(e.signedDelegate);return"base64"===t?_.encode(r):r}(p,m);return{signedDelegateAction:p,payload:y,format:m}}signWith(e){if("string"==typeof e){let t=nw(e);this.keyPair=t,this.signer=async e=>t.sign(e)}else delete this.keyPair,this.signer=e;return this.invalidateCache()}async build(){if(!this.receiverId)throw new to("No receiver ID set for transaction","INVALID_TRANSACTION");let e=(await this.resolveKeyPair()).publicKey,t=await n9.nonceManager.getNextNonce(this.signerId,e.toString(),async()=>BigInt((await this.rpc.getAccessKey(this.signerId,e.toString())).nonce)),r=await this.rpc.getStatus(),n=E.decode(r.sync_info.latest_block_hash);return{signerId:this.signerId,publicKey:e,nonce:t,receiverId:this.receiverId,actions:this.actions,blockHash:n}}async sign(){if(this.cachedSignedTx)return this;if(!this.receiverId)throw new to("No receiver ID set for transaction","INVALID_TRANSACTION");let e=await this.build(),t=e4.serialize({signerId:e.signerId,publicKey:e5(e.publicKey),nonce:e.nonce,receiverId:e.receiverId,blockHash:Array.from(e.blockHash),actions:e.actions.map(e7)}),r=new Uint8Array(await crypto.subtle.digest("SHA-256",t)),n=E.encode(r),i=this.signer?await this.signer(r):(await this.resolveKeyPair()).sign(r);return this.cachedSignedTx={signedTx:{transaction:e,signature:i},hash:n},this}getHash(){return this.cachedSignedTx?.hash??null}serialize(){if(!this.cachedSignedTx)throw new to("Transaction must be signed before serializing. Call .sign() first.","INVALID_STATE");return te(this.cachedSignedTx.signedTx)}async send(e){if(!this.receiverId)throw new to("No receiver ID set for transaction","INVALID_TRANSACTION");if(this.wallet)return await this.wallet.signAndSendTransaction({signerId:this.signerId,receiverId:this.receiverId,actions:this.actions});let t=e?.waitUntil??this.defaultWaitUntil,r=null;for(let e=0;e<3;e++)try{if((!this.cachedSignedTx||e>0)&&(delete this.cachedSignedTx,await this.sign()),!this.cachedSignedTx)throw new to("Failed to sign transaction","TRANSACTION_SIGNING_FAILED");let{signedTx:r,hash:n}=this.cachedSignedTx,i=te(r),o=await this.rpc.sendTransaction(i,t);return"transaction"in o&&o.transaction||(o.transaction={hash:n,signer_id:r.transaction.signerId,receiver_id:this.receiverId,nonce:Number(r.transaction.nonce)}),o}catch(t){if(r=t,t instanceof t_&&(this.cachedSignedTx&&n9.nonceManager.invalidate(this.signerId,this.cachedSignedTx.signedTx.transaction.publicKey.toString()),e<2))continue;throw t}throw r||new to("Unknown error during transaction send","UNKNOWN_TRANSACTION_ERROR")}}n9.nonceManager=new class{constructor(){this.nonces=new Map,this.fetching=new Map}async getNextNonce(e,t,r){let n=`${e}:${t}`,i=this.fetching.get(n);if(i&&await i,!this.nonces.has(n)){let e=r().then(e=>{this.nonces.set(n,e+1n),this.fetching.delete(n)}).catch(e=>{throw this.fetching.delete(n),e});this.fetching.set(n,e),await e}let o=this.nonces.get(n);if(void 0===o)throw Error(`Nonce not found for ${n} after fetch`);return this.nonces.set(n,o+1n),o}invalidate(e,t){this.nonces.delete(`${e}:${t}`)}clear(){this.nonces.clear()}};class n7{constructor(e={}){const t=nU.parse(e);this._initializeRpc(t),this._resolveKeyStore(t),this._resolveSigner(t,e),t.defaultSignerId&&(this.defaultSignerId=t.defaultSignerId),this.defaultWaitUntil=t.defaultWaitUntil||"EXECUTED_OPTIMISTIC",this.wallet=t.wallet}_initializeRpc(e){let t=function(e){if(!e){let e="undefined"!=typeof process?process.env.NEAR_NETWORK:void 0;return e&&("mainnet"===e||"testnet"===e||"localnet"===e||"betanet"===e)?nd[e]:nd.mainnet}let t=nN.parse(e);return"string"==typeof t?nd[t]:t}(e.network),r=e.rpcUrl||t.rpcUrl;this.rpc=new n5(r,e.headers,e.retryConfig)}_resolveKeyStore(e){this.keyStore=this.resolveKeyStore(e.keyStore)}_resolveSigner(e,t){let r=e.signer,n=e.privateKey;if(r)this.signer=r;else if(n){let r,i="string"==typeof n?nw(n):nw(n.toString()),o=t.network;o&&"object"==typeof o&&"rootAccount"in o&&(r=o.rootAccount.id),e.defaultSignerId&&(r=e.defaultSignerId),r&&(this.pendingKeyStoreInit=this.keyStore.add(r,i))}if(!r&&!n){let e=t.network;if(e&&"object"==typeof e&&"rootAccount"in e&&e.rootAccount?.id&&e.rootAccount?.secretKey&&"string"==typeof e.rootAccount.secretKey){let t=nw(e.rootAccount.secretKey);this.pendingKeyStoreInit=this.keyStore.add(e.rootAccount.id,t)}}}async ensureKeyStoreReady(){this.pendingKeyStoreInit&&(await this.pendingKeyStoreInit,delete this.pendingKeyStoreInit)}resolveKeyStore(e){return e&&"string"!=typeof e?"add"in e&&"get"in e?e:new nE(e):new nE}async getSignerId(e){if(e)return e;if(this.defaultSignerId)return this.defaultSignerId;if(this.wallet){let e=await this.wallet.getAccounts();if(0===e.length)throw new to("No accounts connected to wallet","NO_WALLET_ACCOUNTS");return e[0].accountId}throw new to("No signer ID provided. Set signerId in options or config.","MISSING_SIGNER")}async view(e,t,r={},n){let i=new Uint8Array((await this.rpc.viewFunction(e,t,r,n)).result),o=new TextDecoder().decode(i);if(o)try{return JSON.parse(o)}catch{return o}}async call(e,t,r={},n={}){let i=await this.getSignerId(n.signerId);if(this.wallet){var o;let s=r instanceof Uint8Array?r:new TextEncoder().encode(JSON.stringify(r)),a=n.gas?(o=n.gas,nO.parse(o)):nf,l=n.attachedDeposit?nA(n.attachedDeposit):"0";return await this.wallet.signAndSendTransaction({signerId:i,receiverId:e,actions:[ti(t,s,BigInt(a),BigInt(l))]})}let s={};void 0!==n.gas&&(s.gas=n.gas),void 0!==n.attachedDeposit&&(s.attachedDeposit=n.attachedDeposit);let a=n.waitUntil?{waitUntil:n.waitUntil}:{};return await this.transaction(i).functionCall(e,t,r,s).send(a)}async send(e,t){let r=await this.getSignerId();if(this.wallet){let n=nA(t);return await this.wallet.signAndSendTransaction({signerId:r,receiverId:e,actions:[tn(BigInt(n))]})}return await this.transaction(r).transfer(e,t).send()}async signMessage(e,t){let r,n,i,o=await this.getSignerId(t?.signerId),s={...e,nonce:"nonce"in e?e.nonce:(r=new Uint8Array(32),n=Date.now(),new DataView(r.buffer).setBigUint64(0,BigInt(n),!1),i=ei(24),r.set(i,8),r)};if(this.wallet?.signMessage)try{return await this.wallet.signMessage(s)}catch(e){console.warn("Wallet signMessage failed, trying keystore:",e)}await this.ensureKeyStoreReady();let a=await this.keyStore.get(o);if(!a)throw new to(`No key found for account ${o}. Add a key using keyStore.add() or configure a wallet.`,"NO_KEY_FOUND");if(!a.signNep413Message)throw new to("Key pair does not support NEP-413 message signing","UNSUPPORTED_OPERATION");return a.signNep413Message(o,s)}async getBalance(e,t){return(Number(BigInt((await this.rpc.getAccount(e,t)).amount))/1e24).toFixed(2)}async accountExists(e,t){try{return await this.rpc.getAccount(e,t),!0}catch{return!1}}async fullAccessKeyExists(e,t,r){try{let n=await this.rpc.getAccessKey(e,t,r);return"FullAccess"===n.permission}catch{return!1}}async getTransactionStatus(e,t,r){return this.rpc.getTransactionStatus(e,t,r)}async getStatus(){let e=await this.rpc.getStatus();return{chainId:e.chain_id,latestBlockHeight:e.sync_info.latest_block_height,syncing:e.sync_info.syncing}}async batch(...e){return Promise.all(e)}transaction(e){return new n9(e,this.rpc,this.keyStore,this.signer,this.defaultWaitUntil,this.wallet,this.pendingKeyStoreInit?()=>this.ensureKeyStoreReady():void 0)}contract(e){var t;return t=this,{view:new Proxy({},{get:(r,n)=>async(r,i)=>await t.view(e,n,r||{},i)}),call:new Proxy({},{get:(r,n)=>async(r,i)=>await t.call(e,n,r||{},i||{})})}}}},1964(e,t,r){"use strict";r.d(t,{TS:()=>T});var n=class extends Error{code;name;constructor(e,t,r){super(t.toLowerCase()),this.code=e,this.name=r}},i=class extends n{accountId;constructor(e,t){super(2e3,t||`account id "${e}" not a valid account`,"InvalidAccountIdError"),this.accountId=e}},o=class extends n{key;constructor(e,t){super(3e3,t||`key "${e}" not valid`,"KeyNotAllowedError"),this.key=e}},s="10000000000000000000",a=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,l=Math.ceil,c=Math.floor,u="[BigNumber Error] ",d=u+"Number primitive has more than 15 significant digits: ",h=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13];function f(e){var t=0|e;return e>0||e===t?t:t-1}function p(e){for(var t,r,n=1,i=e.length,o=e[0]+"";n<i;){for(r=14-(t=e[n++]+"").length;r--;t="0"+t);o+=t}for(i=o.length;48===o.charCodeAt(--i););return o.slice(0,i+1||1)}function m(e,t){var r,n,i=e.c,o=t.c,s=e.s,a=t.s,l=e.e,c=t.e;if(!s||!a)return null;if(r=i&&!i[0],n=o&&!o[0],r||n)return r?n?0:-a:s;if(s!=a)return s;if(r=s<0,n=l==c,!i||!o)return n?0:!i^r?1:-1;if(!n)return l>c^r?1:-1;for(s=0,a=(l=i.length)<(c=o.length)?l:c;s<a;s++)if(i[s]!=o[s])return i[s]>o[s]^r?1:-1;return l==c?0:l>c^r?1:-1}function y(e,t,r,n){if(e<t||e>r||e!==c(e))throw Error(u+(n||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function g(e){var t=e.c.length-1;return f(e.e/14)==t&&e.c[t]%2!=0}function v(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function b(e,t,r){var n,i;if(t<0){for(i=r+".";++t;i+=r);e=i+e}else if(n=e.length,++t>n){for(i=r,t-=n;--t;i+=r);e+=i}else t<n&&(e=e.slice(0,t)+"."+e.slice(t));return e}var w=function e(t){var r,n,i,o,s,w,_,E,P,T=D.prototype={constructor:D,toString:null,valueOf:null},x=new D(1),S=20,O=4,A=-7,I=21,R=-1e7,N=1e7,C=!1,k=1,z=0,j={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xa0",suffix:""},U="0123456789abcdefghijklmnopqrstuvwxyz",B=!0;function D(e,t){var r,n,i,o,s,l,u,h,f=this;if(!(f instanceof D))return new D(e,t);if(null==t){if(e&&!0===e._isBigNumber){f.s=e.s,!e.c||e.e>N?f.c=f.e=null:e.e<R?f.c=[f.e=0]:(f.e=e.e,f.c=e.c.slice());return}if((l="number"==typeof e)&&0*e==0){if(f.s=1/e<0?(e=-e,-1):1,e===~~e){for(o=0,s=e;s>=10;s/=10,o++);o>N?f.c=f.e=null:(f.e=o,f.c=[e]);return}h=String(e)}else{if(!a.test(h=String(e)))return P(f,h,l);f.s=45==h.charCodeAt(0)?(h=h.slice(1),-1):1}(o=h.indexOf("."))>-1&&(h=h.replace(".","")),(s=h.search(/e/i))>0?(o<0&&(o=s),o+=+h.slice(s+1),h=h.substring(0,s)):o<0&&(o=h.length)}else{if(y(t,2,U.length,"Base"),10==t&&B)return M(f=new D(e),S+f.e+1,O);if(h=String(e),l="number"==typeof e){if(0*e!=0)return P(f,h,l,t);if(f.s=1/e<0?(h=h.slice(1),-1):1,D.DEBUG&&h.replace(/^0\.0*|\./,"").length>15)throw Error(d+e)}else f.s=45===h.charCodeAt(0)?(h=h.slice(1),-1):1;for(r=U.slice(0,t),o=s=0,u=h.length;s<u;s++)if(0>r.indexOf(n=h.charAt(s))){if("."==n){if(s>o){o=u;continue}}else if(!i&&(h==h.toUpperCase()&&(h=h.toLowerCase())||h==h.toLowerCase()&&(h=h.toUpperCase()))){i=!0,s=-1,o=0;continue}return P(f,String(e),l,t)}l=!1,(o=(h=E(h,t,10,f.s)).indexOf("."))>-1?h=h.replace(".",""):o=h.length}for(s=0;48===h.charCodeAt(s);s++);for(u=h.length;48===h.charCodeAt(--u););if(h=h.slice(s,++u)){if(u-=s,l&&D.DEBUG&&u>15&&(e>0x1fffffffffffff||e!==c(e)))throw Error(d+f.s*e);if((o=o-s-1)>N)f.c=f.e=null;else if(o<R)f.c=[f.e=0];else{if(f.e=o,f.c=[],s=(o+1)%14,o<0&&(s+=14),s<u){for(s&&f.c.push(+h.slice(0,s)),u-=14;s<u;)f.c.push(+h.slice(s,s+=14));s=14-(h=h.slice(s)).length}else s-=u;for(;s--;h+="0");f.c.push(+h)}}else f.c=[f.e=0]}function G(e,t,r,n){var i,o,s,a,l;if(null==r?r=O:y(r,0,8),!e.c)return e.toString();if(i=e.c[0],s=e.e,null==t)l=p(e.c),l=1==n||2==n&&(s<=A||s>=I)?v(l,s):b(l,s,"0");else if(o=(e=M(new D(e),t,r)).e,a=(l=p(e.c)).length,1==n||2==n&&(t<=o||o<=A)){for(;a<t;l+="0",a++);l=v(l,o)}else if(t-=s+(2===n&&o>s),l=b(l,o,"0"),o+1>a){if(--t>0)for(l+=".";t--;l+="0");}else if((t+=o-a)>0)for(o+1==a&&(l+=".");t--;l+="0");return e.s<0&&i?"-"+l:l}function F(e,t){for(var r,n,i=1,o=new D(e[0]);i<e.length;i++)(n=new D(e[i])).s&&(r=m(o,n))!==t&&(0!==r||o.s!==t)||(o=n);return o}function L(e,t,r){for(var n=1,i=t.length;!t[--i];t.pop());for(i=t[0];i>=10;i/=10,n++);return(r=n+14*r-1)>N?e.c=e.e=null:r<R?e.c=[e.e=0]:(e.e=r,e.c=t),e}function M(e,t,r,n){var i,o,s,a,u,d,f,p=e.c;if(p){e:{for(i=1,a=p[0];a>=10;a/=10,i++);if((o=t-i)<0)o+=14,s=t,f=c((u=p[d=0])/h[i-s-1]%10);else if((d=l((o+1)/14))>=p.length)if(n){for(;p.length<=d;p.push(0));u=f=0,i=1,o%=14,s=o-14+1}else break e;else{for(i=1,u=a=p[d];a>=10;a/=10,i++);o%=14,f=(s=o-14+i)<0?0:c(u/h[i-s-1]%10)}if(n=n||t<0||null!=p[d+1]||(s<0?u:u%h[i-s-1]),n=r<4?(f||n)&&(0==r||r==(e.s<0?3:2)):f>5||5==f&&(4==r||n||6==r&&(o>0?s>0?u/h[i-s]:0:p[d-1])%10&1||r==(e.s<0?8:7)),t<1||!p[0])return p.length=0,n?(t-=e.e+1,p[0]=h[(14-t%14)%14],e.e=-t||0):p[0]=e.e=0,e;if(0==o?(p.length=d,a=1,d--):(p.length=d+1,a=h[14-o],p[d]=s>0?c(u/h[i-s]%h[s])*a:0),n)for(;;)if(0==d){for(o=1,s=p[0];s>=10;s/=10,o++);for(s=p[0]+=a,a=1;s>=10;s/=10,a++);o!=a&&(e.e++,1e14==p[0]&&(p[0]=1));break}else{if(p[d]+=a,1e14!=p[d])break;p[d--]=0,a=1}for(o=p.length;0===p[--o];p.pop());}e.e>N?e.c=e.e=null:e.e<R&&(e.c=[e.e=0])}return e}function q(e){var t,r=e.e;return null===r?e.toString():(t=p(e.c),t=r<=A||r>=I?v(t,r):b(t,r,"0"),e.s<0?"-"+t:t)}return D.clone=e,D.ROUND_UP=0,D.ROUND_DOWN=1,D.ROUND_CEIL=2,D.ROUND_FLOOR=3,D.ROUND_HALF_UP=4,D.ROUND_HALF_DOWN=5,D.ROUND_HALF_EVEN=6,D.ROUND_HALF_CEIL=7,D.ROUND_HALF_FLOOR=8,D.EUCLID=9,D.config=D.set=function(e){var t,r;if(null!=e)if("object"==typeof e){if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(y(r=e[t],0,1e9,t),S=r),e.hasOwnProperty(t="ROUNDING_MODE")&&(y(r=e[t],0,8,t),O=r),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((r=e[t])&&r.pop?(y(r[0],-1e9,0,t),y(r[1],0,1e9,t),A=r[0],I=r[1]):(y(r,-1e9,1e9,t),A=-(I=r<0?-r:r))),e.hasOwnProperty(t="RANGE"))if((r=e[t])&&r.pop)y(r[0],-1e9,-1,t),y(r[1],1,1e9,t),R=r[0],N=r[1];else if(y(r,-1e9,1e9,t),r)R=-(N=r<0?-r:r);else throw Error(u+t+" cannot be zero: "+r);if(e.hasOwnProperty(t="CRYPTO"))if(!!(r=e[t])===r)if(r)if("undefined"!=typeof crypto&&crypto&&(crypto.getRandomValues||crypto.randomBytes))C=r;else throw C=!r,Error(u+"crypto unavailable");else C=r;else throw Error(u+t+" not true or false: "+r);if(e.hasOwnProperty(t="MODULO_MODE")&&(y(r=e[t],0,9,t),k=r),e.hasOwnProperty(t="POW_PRECISION")&&(y(r=e[t],0,1e9,t),z=r),e.hasOwnProperty(t="FORMAT"))if("object"==typeof(r=e[t]))j=r;else throw Error(u+t+" not an object: "+r);if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(r=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(r))throw Error(u+t+" invalid: "+r);B="0123456789"==r.slice(0,10),U=r}}else throw Error(u+"Object expected: "+e);return{DECIMAL_PLACES:S,ROUNDING_MODE:O,EXPONENTIAL_AT:[A,I],RANGE:[R,N],CRYPTO:C,MODULO_MODE:k,POW_PRECISION:z,FORMAT:j,ALPHABET:U}},D.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!D.DEBUG)return!0;var t,r,n=e.c,i=e.e,o=e.s;e:if("[object Array]"==({}).toString.call(n)){if((1===o||-1===o)&&i>=-1e9&&i<=1e9&&i===c(i)){if(0===n[0]){if(0===i&&1===n.length)return!0;break e}if((t=(i+1)%14)<1&&(t+=14),String(n[0]).length==t){for(t=0;t<n.length;t++)if((r=n[t])<0||r>=1e14||r!==c(r))break e;if(0!==r)return!0}}}else if(null===n&&null===i&&(null===o||1===o||-1===o))return!0;throw Error(u+"Invalid BigNumber: "+e)},D.maximum=D.max=function(){return F(arguments,-1)},D.minimum=D.min=function(){return F(arguments,1)},r=0x20000000000000*Math.random()&2097151?function(){return c(0x20000000000000*Math.random())}:function(){return(0x40000000*Math.random()|0)*8388608+(8388608*Math.random()|0)},D.random=function(e){var t,n,i,o,s,a=0,d=[],f=new D(x);if(null==e?e=S:y(e,0,1e9),o=l(e/14),C)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(o*=2));a<o;)(s=131072*t[a]+(t[a+1]>>>11))>=9e15?(n=crypto.getRandomValues(new Uint32Array(2)),t[a]=n[0],t[a+1]=n[1]):(d.push(s%1e14),a+=2);a=o/2}else if(crypto.randomBytes){for(t=crypto.randomBytes(o*=7);a<o;)(s=(31&t[a])*0x1000000000000+0x10000000000*t[a+1]+0x100000000*t[a+2]+0x1000000*t[a+3]+(t[a+4]<<16)+(t[a+5]<<8)+t[a+6])>=9e15?crypto.randomBytes(7).copy(t,a):(d.push(s%1e14),a+=7);a=o/7}else throw C=!1,Error(u+"crypto unavailable");if(!C)for(;a<o;)(s=r())<9e15&&(d[a++]=s%1e14);for(o=d[--a],e%=14,o&&e&&(s=h[14-e],d[a]=c(o/s)*s);0===d[a];d.pop(),a--);if(a<0)d=[i=0];else{for(i=-1;0===d[0];d.splice(0,1),i-=14);for(a=1,s=d[0];s>=10;s/=10,a++);a<14&&(i-=14-a)}return f.e=i,f.c=d,f},D.sum=function(){for(var e=1,t=arguments,r=new D(t[0]);e<t.length;)r=r.plus(t[e++]);return r},E=function(){var e="0123456789";function t(e,t,r,n){for(var i,o,s=[0],a=0,l=e.length;a<l;){for(o=s.length;o--;s[o]*=t);for(s[0]+=n.indexOf(e.charAt(a++)),i=0;i<s.length;i++)s[i]>r-1&&(null==s[i+1]&&(s[i+1]=0),s[i+1]+=s[i]/r|0,s[i]%=r)}return s.reverse()}return function(r,n,i,o,s){var a,l,c,u,d,h,f,m,y=r.indexOf("."),g=S,v=O;for(y>=0&&(u=z,z=0,r=r.replace(".",""),h=(m=new D(n)).pow(r.length-y),z=u,m.c=t(b(p(h.c),h.e,"0"),10,i,e),m.e=m.c.length),c=u=(f=t(r,n,i,s?(a=U,e):(a=e,U))).length;0==f[--u];f.pop());if(!f[0])return a.charAt(0);if(y<0?--c:(h.c=f,h.e=c,h.s=o,f=(h=_(h,m,g,v,i)).c,d=h.r,c=h.e),y=f[l=c+g+1],u=i/2,d=d||l<0||null!=f[l+1],d=v<4?(null!=y||d)&&(0==v||v==(h.s<0?3:2)):y>u||y==u&&(4==v||d||6==v&&1&f[l-1]||v==(h.s<0?8:7)),l<1||!f[0])r=d?b(a.charAt(1),-g,a.charAt(0)):a.charAt(0);else{if(f.length=l,d)for(--i;++f[--l]>i;)f[l]=0,l||(++c,f=[1].concat(f));for(u=f.length;!f[--u];);for(y=0,r="";y<=u;r+=a.charAt(f[y++]));r=b(r,c,a.charAt(0))}return r}}(),_=function(){function e(e,t,r){var n,i,o,s,a=0,l=e.length,c=t%1e7,u=t/1e7|0;for(e=e.slice();l--;)n=u*(o=e[l]%1e7)+(s=e[l]/1e7|0)*c,a=((i=c*o+n%1e7*1e7+a)/r|0)+(n/1e7|0)+u*s,e[l]=i%r;return a&&(e=[a].concat(e)),e}function t(e,t,r,n){var i,o;if(r!=n)o=r>n?1:-1;else for(i=o=0;i<r;i++)if(e[i]!=t[i]){o=e[i]>t[i]?1:-1;break}return o}function r(e,t,r,n){for(var i=0;r--;)e[r]-=i,i=+(e[r]<t[r]),e[r]=i*n+e[r]-t[r];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(n,i,o,s,a){var l,u,d,h,p,m,y,g,v,b,w,_,E,P,T,x,S,O=n.s==i.s?1:-1,A=n.c,I=i.c;if(!A||!A[0]||!I||!I[0])return new D(!n.s||!i.s||(A?I&&A[0]==I[0]:!I)?NaN:A&&0==A[0]||!I?0*O:O/0);for(v=(g=new D(O)).c=[],O=o+(u=n.e-i.e)+1,a||(a=1e14,u=f(n.e/14)-f(i.e/14),O=O/14|0),d=0;I[d]==(A[d]||0);d++);if(I[d]>(A[d]||0)&&u--,O<0)v.push(1),h=!0;else{for(P=A.length,x=I.length,d=0,O+=2,(p=c(a/(I[0]+1)))>1&&(I=e(I,p,a),A=e(A,p,a),x=I.length,P=A.length),E=x,w=(b=A.slice(0,x)).length;w<x;b[w++]=0);S=[0].concat(S=I.slice()),T=I[0],I[1]>=a/2&&T++;do{if(p=0,(l=t(I,b,x,w))<0){if(_=b[0],x!=w&&(_=_*a+(b[1]||0)),(p=c(_/T))>1)for(p>=a&&(p=a-1),y=(m=e(I,p,a)).length,w=b.length;1==t(m,b,y,w);)p--,r(m,x<y?S:I,y,a),y=m.length,l=1;else 0==p&&(l=p=1),y=(m=I.slice()).length;if(y<w&&(m=[0].concat(m)),r(b,m,w,a),w=b.length,-1==l)for(;1>t(I,b,x,w);)p++,r(b,x<w?S:I,w,a),w=b.length}else 0===l&&(p++,b=[0]);v[d++]=p,b[0]?b[w++]=A[E]||0:(b=[A[E]],w=1)}while((E++<P||null!=b[0])&&O--);h=null!=b[0],v[0]||v.splice(0,1)}if(1e14==a){for(d=1,O=v[0];O>=10;O/=10,d++);M(g,o+(g.e=d+14*u-1)+1,s,h)}else g.e=u,g.r=+h;return g}}(),n=/^(-?)0([xbo])(?=\w[\w.]*$)/i,i=/^([^.]+)\.$/,o=/^\.([^.]+)$/,s=/^-?(Infinity|NaN)$/,w=/^\s*\+(?=[\w.])|^\s+|\s+$/g,P=function(e,t,r,a){var l,c=r?t:t.replace(w,"");if(s.test(c))e.s=isNaN(c)?null:c<0?-1:1;else{if(!r&&(c=c.replace(n,function(e,t,r){return l="x"==(r=r.toLowerCase())?16:"b"==r?2:8,a&&a!=l?e:t}),a&&(l=a,c=c.replace(i,"$1").replace(o,"0.$1")),t!=c))return new D(c,l);if(D.DEBUG)throw Error(u+"Not a"+(a?" base "+a:"")+" number: "+t);e.s=null}e.c=e.e=null},T.absoluteValue=T.abs=function(){var e=new D(this);return e.s<0&&(e.s=1),e},T.comparedTo=function(e,t){return m(this,new D(e,t))},T.decimalPlaces=T.dp=function(e,t){var r,n,i;if(null!=e)return y(e,0,1e9),null==t?t=O:y(t,0,8),M(new D(this),e+this.e+1,t);if(!(r=this.c))return null;if(n=((i=r.length-1)-f(this.e/14))*14,i=r[i])for(;i%10==0;i/=10,n--);return n<0&&(n=0),n},T.dividedBy=T.div=function(e,t){return _(this,new D(e,t),S,O)},T.dividedToIntegerBy=T.idiv=function(e,t){return _(this,new D(e,t),0,1)},T.exponentiatedBy=T.pow=function(e,t){var r,n,i,o,s,a,d,h,f,p=this;if((e=new D(e)).c&&!e.isInteger())throw Error(u+"Exponent not an integer: "+q(e));if(null!=t&&(t=new D(t)),a=e.e>14,!p.c||!p.c[0]||1==p.c[0]&&!p.e&&1==p.c.length||!e.c||!e.c[0])return f=new D(Math.pow(+q(p),a?e.s*(2-g(e)):+q(e))),t?f.mod(t):f;if(d=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new D(NaN);(n=!d&&p.isInteger()&&t.isInteger())&&(p=p.mod(t))}else{if(e.e>9&&(p.e>0||p.e<-1||(0==p.e?p.c[0]>1||a&&p.c[1]>=24e7:p.c[0]<8e13||a&&p.c[0]<=9999975e7)))return o=p.s<0&&g(e)?-0:0,p.e>-1&&(o=1/o),new D(d?1/o:o);z&&(o=l(z/14+2))}for(a?(r=new D(.5),d&&(e.s=1),h=g(e)):h=(i=Math.abs(+q(e)))%2,f=new D(x);;){if(h){if(!(f=f.times(p)).c)break;o?f.c.length>o&&(f.c.length=o):n&&(f=f.mod(t))}if(i){if(0===(i=c(i/2)))break;h=i%2}else if(M(e=e.times(r),e.e+1,1),e.e>14)h=g(e);else{if(0==(i=+q(e)))break;h=i%2}p=p.times(p),o?p.c&&p.c.length>o&&(p.c.length=o):n&&(p=p.mod(t))}return n?f:(d&&(f=x.div(f)),t?f.mod(t):o?M(f,z,O,s):f)},T.integerValue=function(e){var t=new D(this);return null==e?e=O:y(e,0,8),M(t,t.e+1,e)},T.isEqualTo=T.eq=function(e,t){return 0===m(this,new D(e,t))},T.isFinite=function(){return!!this.c},T.isGreaterThan=T.gt=function(e,t){return m(this,new D(e,t))>0},T.isGreaterThanOrEqualTo=T.gte=function(e,t){return 1===(t=m(this,new D(e,t)))||0===t},T.isInteger=function(){return!!this.c&&f(this.e/14)>this.c.length-2},T.isLessThan=T.lt=function(e,t){return 0>m(this,new D(e,t))},T.isLessThanOrEqualTo=T.lte=function(e,t){return -1===(t=m(this,new D(e,t)))||0===t},T.isNaN=function(){return!this.s},T.isNegative=function(){return this.s<0},T.isPositive=function(){return this.s>0},T.isZero=function(){return!!this.c&&0==this.c[0]},T.minus=function(e,t){var r,n,i,o,s=this.s;if(t=(e=new D(e,t)).s,!s||!t)return new D(NaN);if(s!=t)return e.s=-t,this.plus(e);var a=this.e/14,l=e.e/14,c=this.c,u=e.c;if(!a||!l){if(!c||!u)return c?(e.s=-t,e):new D(u?this:NaN);if(!c[0]||!u[0])return u[0]?(e.s=-t,e):new D(c[0]?this:3==O?-0:0)}if(a=f(a),l=f(l),c=c.slice(),s=a-l){for((o=s<0)?(s=-s,i=c):(l=a,i=u),i.reverse(),t=s;t--;i.push(0));i.reverse()}else for(n=(o=(s=c.length)<(t=u.length))?s:t,s=t=0;t<n;t++)if(c[t]!=u[t]){o=c[t]<u[t];break}if(o&&(i=c,c=u,u=i,e.s=-e.s),(t=(n=u.length)-(r=c.length))>0)for(;t--;c[r++]=0);for(t=1e14-1;n>s;){if(c[--n]<u[n]){for(r=n;r&&!c[--r];c[r]=t);--c[r],c[n]+=1e14}c[n]-=u[n]}for(;0==c[0];c.splice(0,1),--l);return c[0]?L(e,c,l):(e.s=3==O?-1:1,e.c=[e.e=0],e)},T.modulo=T.mod=function(e,t){var r,n;return(e=new D(e,t),this.c&&e.s&&(!e.c||e.c[0]))?e.c&&(!this.c||this.c[0])?(9==k?(n=e.s,e.s=1,r=_(this,e,0,3),e.s=n,r.s*=n):r=_(this,e,0,k),(e=this.minus(r.times(e))).c[0]||1!=k||(e.s=this.s),e):new D(this):new D(NaN)},T.multipliedBy=T.times=function(e,t){var r,n,i,o,s,a,l,c,u,d,h,p,m,y=this.c,g=(e=new D(e,t)).c;if(!y||!g||!y[0]||!g[0])return this.s&&e.s&&(!y||y[0]||g)&&(!g||g[0]||y)?(e.s*=this.s,y&&g?(e.c=[0],e.e=0):e.c=e.e=null):e.c=e.e=e.s=null,e;for(n=f(this.e/14)+f(e.e/14),e.s*=this.s,(l=y.length)<(d=g.length)&&(m=y,y=g,g=m,i=l,l=d,d=i),i=l+d,m=[];i--;m.push(0));for(i=d;--i>=0;){for(r=0,h=g[i]%1e7,p=g[i]/1e7|0,o=i+(s=l);o>i;)a=p*(c=y[--s]%1e7)+(u=y[s]/1e7|0)*h,r=((c=h*c+a%1e7*1e7+m[o]+r)/1e14|0)+(a/1e7|0)+p*u,m[o--]=c%1e14;m[o]=r}return r?++n:m.splice(0,1),L(e,m,n)},T.negated=function(){var e=new D(this);return e.s=-e.s||null,e},T.plus=function(e,t){var r,n=this.s;if(t=(e=new D(e,t)).s,!n||!t)return new D(NaN);if(n!=t)return e.s=-t,this.minus(e);var i=this.e/14,o=e.e/14,s=this.c,a=e.c;if(!i||!o){if(!s||!a)return new D(n/0);if(!s[0]||!a[0])return a[0]?e:new D(s[0]?this:0*n)}if(i=f(i),o=f(o),s=s.slice(),n=i-o){for(n>0?(o=i,r=a):(n=-n,r=s),r.reverse();n--;r.push(0));r.reverse()}for((n=s.length)-(t=a.length)<0&&(r=a,a=s,s=r,t=n),n=0;t;)n=(s[--t]=s[t]+a[t]+n)/1e14|0,s[t]=1e14===s[t]?0:s[t]%1e14;return n&&(s=[n].concat(s),++o),L(e,s,o)},T.precision=T.sd=function(e,t){var r,n,i;if(null!=e&&!!e!==e)return y(e,1,1e9),null==t?t=O:y(t,0,8),M(new D(this),e,t);if(!(r=this.c))return null;if(n=14*(i=r.length-1)+1,i=r[i]){for(;i%10==0;i/=10,n--);for(i=r[0];i>=10;i/=10,n++);}return e&&this.e+1>n&&(n=this.e+1),n},T.shiftedBy=function(e){return y(e,-0x1fffffffffffff,0x1fffffffffffff),this.times("1e"+e)},T.squareRoot=T.sqrt=function(){var e,t,r,n,i,o=this.c,s=this.s,a=this.e,l=S+4,c=new D("0.5");if(1!==s||!o||!o[0])return new D(!s||s<0&&(!o||o[0])?NaN:o?this:1/0);if(0==(s=Math.sqrt(+q(this)))||s==1/0?(((t=p(o)).length+a)%2==0&&(t+="0"),s=Math.sqrt(+t),a=f((a+1)/2)-(a<0||a%2),r=new D(t=s==1/0?"5e"+a:(t=s.toExponential()).slice(0,t.indexOf("e")+1)+a)):r=new D(s+""),r.c[0]){for((s=(a=r.e)+l)<3&&(s=0);;)if(i=r,r=c.times(i.plus(_(this,i,l,1))),p(i.c).slice(0,s)===(t=p(r.c)).slice(0,s)){if(r.e<a&&--s,"9999"!=(t=t.slice(s-3,s+1))&&(n||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(M(r,r.e+S+2,1),e=!r.times(r).eq(this));break}if(!n&&(M(i,i.e+S+2,0),i.times(i).eq(this))){r=i;break}l+=4,s+=4,n=1}}return M(r,r.e+S+1,O,e)},T.toExponential=function(e,t){return null!=e&&(y(e,0,1e9),e++),G(this,e,t,1)},T.toFixed=function(e,t){return null!=e&&(y(e,0,1e9),e=e+this.e+1),G(this,e,t)},T.toFormat=function(e,t,r){var n;if(null==r)null!=e&&t&&"object"==typeof t?(r=t,t=null):e&&"object"==typeof e?(r=e,e=t=null):r=j;else if("object"!=typeof r)throw Error(u+"Argument not an object: "+r);if(n=this.toFixed(e,t),this.c){var i,o=n.split("."),s=+r.groupSize,a=+r.secondaryGroupSize,l=r.groupSeparator||"",c=o[0],d=o[1],h=this.s<0,f=h?c.slice(1):c,p=f.length;if(a&&(i=s,s=a,a=i,p-=i),s>0&&p>0){for(i=p%s||s,c=f.substr(0,i);i<p;i+=s)c+=l+f.substr(i,s);a>0&&(c+=l+f.slice(i)),h&&(c="-"+c)}n=d?c+(r.decimalSeparator||"")+((a=+r.fractionGroupSize)?d.replace(RegExp("\\d{"+a+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):d):c}return(r.prefix||"")+n+(r.suffix||"")},T.toFraction=function(e){var t,r,n,i,o,s,a,l,c,d,f,m,y=this.c;if(null!=e&&(!(a=new D(e)).isInteger()&&(a.c||1!==a.s)||a.lt(x)))throw Error(u+"Argument "+(a.isInteger()?"out of range: ":"not an integer: ")+q(a));if(!y)return new D(this);for(t=new D(x),c=r=new D(x),n=l=new D(x),m=p(y),o=t.e=m.length-this.e-1,t.c[0]=h[(s=o%14)<0?14+s:s],e=!e||a.comparedTo(t)>0?o>0?t:c:a,s=N,N=1/0,a=new D(m),l.c[0]=0;d=_(a,t,0,1),1!=(i=r.plus(d.times(n))).comparedTo(e);)r=n,n=i,c=l.plus(d.times(i=c)),l=i,t=a.minus(d.times(i=t)),a=i;return i=_(e.minus(r),n,0,1),l=l.plus(i.times(c)),r=r.plus(i.times(n)),l.s=c.s=this.s,o*=2,f=1>_(c,n,o,O).minus(this).abs().comparedTo(_(l,r,o,O).minus(this).abs())?[c,n]:[l,r],N=s,f},T.toNumber=function(){return+q(this)},T.toPrecision=function(e,t){return null!=e&&y(e,1,1e9),G(this,e,t,2)},T.toString=function(e){var t,r=this,n=r.s,i=r.e;return null===i?n?(t="Infinity",n<0&&(t="-"+t)):t="NaN":(null==e?t=i<=A||i>=I?v(p(r.c),i):b(p(r.c),i,"0"):10===e&&B?t=b(p((r=M(new D(r),S+i+1,O)).c),r.e,"0"):(y(e,2,U.length,"Base"),t=E(b(p(r.c),i,"0"),10,e,n,!0)),n<0&&r.c[0]&&(t="-"+t)),t},T.valueOf=T.toJSON=function(){return q(this)},T._isBigNumber=!0,T[Symbol.toStringTag]="BigNumber",T[Symbol.for("nodejs.util.inspect.custom")]=T.valueOf,null!=t&&D.set(t),D}();function _(e){return e.length>=2&&e.length<=64&&/^(([a-z\d]+[-_])*[a-z\d]+\.)*([a-z\d]+[-_])*[a-z\d]+$/.test(e)}function E(e){return e===Object(e)&&!Array.isArray(e)&&"function"!=typeof e}var P=r(9305),T=class{near;contractId;apiServer;defaultUseApiServer;constructor(e){this.contractId=e?.contractId??"social.near",this.apiServer=e?.apiServer??"https://api.near.social",this.defaultUseApiServer=e?.useApiServer??!0,e?.near?this.near=e.near:this.near=new P.zU({network:e?.network??"mainnet"})}async fetchFromApi(e,t){return(await fetch(this.apiServer+e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json()}async get({keys:e,blockHeight:t,returnDeleted:r,withBlockHeight:n,withNodeId:i,withTimestamp:o,useApiServer:s}){return s??this.defaultUseApiServer?this.fetchFromApi("/get",{keys:e,blockHeight:t,...(r||n||o)&&{options:{with_block_height:n,return_deleted:r,with_timestamp:o}}}):await this.near.view(this.contractId,"get",{keys:e,...(r||n||i)&&{options:{with_block_height:n,with_node_id:i,return_deleted:r}}})??null}async keys({keys:e,blockHeight:t,returnDeleted:r,returnType:n,valuesOnly:i,useApiServer:o}){return o??this.defaultUseApiServer?this.fetchFromApi("/keys",{keys:e,blockHeight:t,...(r||n||i)&&{options:{return_deleted:r,return_type:n,values_only:i}}}):await this.near.view(this.contractId,"keys",{keys:e,...(r||n||i)&&{options:{return_deleted:r,return_type:n,values_only:i}}})??null}async index({action:e,key:t,accountId:r,order:n,limit:i,from:o}){return this.fetchFromApi("/index",{action:e,key:t,...(r||n||i||o)&&{options:{accountId:r,order:n,limit:i,from:o}}})}async getVersion(){let e=await this.near.view(this.contractId,"get_version",{});if("string"!=typeof e)throw Error(`Unexpected response format from get_version: ${JSON.stringify(e)}`);return e}async getAccount({accountId:e}){return await this.near.view(this.contractId,"get_account",{account_id:e})??null}async getAccounts({fromIndex:e,limit:t}={}){return await this.near.view(this.contractId,"get_accounts",{...void 0!==e&&{from_index:e},...void 0!==t&&{limit:t}})??null}async getAccountCount(){let e=await this.near.view(this.contractId,"get_account_count",{});if("number"!=typeof e)throw Error(`Unexpected response format from get_account_count: ${JSON.stringify(e)}`);return e}async getNode({nodeId:e,fromIndex:t,limit:r}){return await this.near.view(this.contractId,"get_node",{node_id:e,...void 0!==t&&{from_index:t},...void 0!==r&&{limit:r}})??null}async getNodes({fromIndex:e,limit:t}={}){return await this.near.view(this.contractId,"get_nodes",{...void 0!==e&&{from_index:e},...void 0!==t&&{limit:t}})??null}async getNodeCount(){let e=await this.near.view(this.contractId,"get_node_count",{});if("number"!=typeof e)throw Error(`Unexpected response format from get_node_count: ${JSON.stringify(e)}`);return e}async isWritePermissionGranted({key:e,granteeAccountId:t,granteePublicKey:r}){if(t){if(!_(t))throw new i(t,"the grantee account id is not valid");if(t===(e.split("/")[0]||""))return!0}let n=await this.near.view(this.contractId,"is_write_permission_granted",{key:e,...t&&{predecessor_id:t},...r&&{public_key:r}});if("boolean"!=typeof n)throw Error(`Unexpected response format from is_write_permission_granted: ${JSON.stringify(n)}`);return n}async storageBalanceOf(e){let t=await this.near.view(this.contractId,"storage_balance_of",{account_id:e});return t?{available:String(t.available),total:String(t.total)}:null}async set({signerId:e,data:t,deposit:r,refundUnusedDeposit:n}){let i,a,l=(a=(e,t)=>null===t||"object"!=typeof t?e.join("/"):Object.entries(t).flatMap(([t,r])=>a([...e,t],r)))([],t);for(let t of l)if((t.split("/")[0]||"")!==e&&!await this.isWritePermissionGranted({key:t,granteeAccountId:e}))throw new o(t,`the signer has not been granted write permission for "${t}"`);return i=r?BigInt(r):l.reduce((e,t)=>{let r=t.split("/")[0]||"";return e.find(e=>e===r)?e:[...e,r]},[]).includes(e)?BigInt((function({data:e,storageBalance:t}){let r,n=new w("2000").multipliedBy(new w(s)),i=new w(String((r=(e,t)=>E(e)?Object.entries(e).reduce((e,[n,i])=>t&&E(t)?e+r(i,t[n]):e+BigInt(2*n.length)+r(i)+BigInt(140),BigInt(98*!E(t))):BigInt(("string"==typeof e?e.length:8)-(t&&"string"==typeof t?t.length:0)))(e))).plus("500").multipliedBy(s);if(!t)return i.lt(n)?n:i;let o=new w(t.available.toString());return o.lt(i)?i.minus(o):new w("0")})({data:t,storageBalance:await this.near.view(this.contractId,"storage_balance_of",{account_id:e})??null}).toFixed()):1n,this.near.transaction(e).functionCall(this.contractId,"set",{data:t,...n&&{options:{refund_unused_deposit:n}}},{gas:"100 Tgas",attachedDeposit:i})}async grantWritePermission({signerId:e,keys:t,granteeAccountId:r,granteePublicKey:n}){if(r&&!_(r))throw new i(r,"the grantee account id is not valid");for(let r of t){let t=r.split("/")[0]||"";if(!_(t))throw new i(t);if(t!==e)throw new o(r,`key "${r}" does not belong to granter "${e}"`)}return this.near.transaction(e).functionCall(this.contractId,"grant_write_permission",{keys:t,...r&&{predecessor_id:r},...n&&{public_key:n}},{gas:"30 Tgas",attachedDeposit:P.J0.ONE_YOCTO})}async storageDeposit({signerId:e,accountId:t,deposit:r,registrationOnly:n}){let i=BigInt(r);return this.near.transaction(e).functionCall(this.contractId,"storage_deposit",{...t&&{account_id:t},...n&&{registration_only:n}},{gas:"30 Tgas",attachedDeposit:i})}async storageWithdraw({signerId:e,amount:t}){return this.near.transaction(e).functionCall(this.contractId,"storage_withdraw",{...t&&{amount:t}},{gas:"30 Tgas",attachedDeposit:P.J0.ONE_YOCTO})}async storageUnregister({signerId:e,force:t}){return this.near.transaction(e).functionCall(this.contractId,"storage_unregister",{...void 0!==t&&{force:t}},{gas:"30 Tgas",attachedDeposit:P.J0.ONE_YOCTO})}createDelegateKey(e,t,r){return this.near.transaction(e).addKey(t,{type:"functionCall",receiverId:this.contractId,methodNames:[],allowance:r??"0.25 NEAR"})}getContractId(){return this.contractId}}},7310(e,t,r){"use strict";let n;r.d(t,{A:()=>iX});var i={};r.r(i),r.d(i,{StripeAPIError:()=>W,StripeAuthenticationError:()=>Z,StripeCardError:()=>K,StripeConnectionError:()=>J,StripeError:()=>$,StripeIdempotencyError:()=>ee,StripeInvalidGrantError:()=>et,StripeInvalidRequestError:()=>V,StripePermissionError:()=>Y,StripeRateLimitError:()=>X,StripeSignatureVerificationError:()=>Q,StripeUnknownError:()=>er,TemporarySessionExpiredError:()=>en,generateV1Error:()=>q,generateV2Error:()=>H});var o={};r.r(o),r.d(o,{Account:()=>rq,AccountLinks:()=>r$,AccountSessions:()=>rV,Accounts:()=>rq,ApplePayDomains:()=>rZ,ApplicationFees:()=>rX,Apps:()=>iI,Balance:()=>rQ,BalanceSettings:()=>r1,BalanceTransactions:()=>r8,Billing:()=>iR,BillingPortal:()=>iN,Charges:()=>r4,Checkout:()=>iC,Climate:()=>ik,ConfirmationTokens:()=>r5,CountrySpecs:()=>r7,Coupons:()=>nt,CreditNotes:()=>nn,CustomerSessions:()=>no,Customers:()=>na,Disputes:()=>nc,Entitlements:()=>iz,EphemeralKeys:()=>nd,Events:()=>nf,ExchangeRates:()=>nm,FileLinks:()=>ng,Files:()=>nb,FinancialConnections:()=>ij,Forwarding:()=>iU,Identity:()=>iB,InvoiceItems:()=>n_,InvoicePayments:()=>nP,InvoiceRenderingTemplates:()=>nx,Invoices:()=>nO,Issuing:()=>iD,Mandates:()=>nI,OAuth:()=>nC,PaymentAttemptRecords:()=>nz,PaymentIntents:()=>nU,PaymentLinks:()=>nD,PaymentMethodConfigurations:()=>nF,PaymentMethodDomains:()=>nM,PaymentMethods:()=>nH,PaymentRecords:()=>nK,Payouts:()=>nW,Plans:()=>nY,Prices:()=>nJ,Products:()=>n0,PromotionCodes:()=>n2,Quotes:()=>n6,Radar:()=>iG,Refunds:()=>n3,Reporting:()=>iF,Reviews:()=>n9,SetupAttempts:()=>ie,SetupIntents:()=>ir,ShippingRates:()=>io,Sigma:()=>iL,Sources:()=>ia,SubscriptionItems:()=>ic,SubscriptionSchedules:()=>id,Subscriptions:()=>ip,Tax:()=>iM,TaxCodes:()=>iy,TaxIds:()=>iv,TaxRates:()=>iw,Terminal:()=>iq,TestHelpers:()=>iH,Tokens:()=>iE,Topups:()=>iT,Transfers:()=>iS,Treasury:()=>i$,V2:()=>iK,WebhookEndpoints:()=>iA});var s=r(6982),a=r(4434);class l{computeHMACSignature(e,t){throw Error("computeHMACSignature not implemented.")}computeHMACSignatureAsync(e,t){throw Error("computeHMACSignatureAsync not implemented.")}computeSHA256Async(e){throw Error("computeSHA256 not implemented.")}}class c extends Error{}class u extends l{computeHMACSignature(e,t){return s.createHmac("sha256",t).update(e,"utf8").digest("hex")}async computeHMACSignatureAsync(e,t){return await this.computeHMACSignature(e,t)}async computeSHA256Async(e){return new Uint8Array(await s.createHash("sha256").update(e).digest())}}var d=r(8611),h=r.t(d,2),f=r(5692),p=r.t(f,2);class m{getClientName(){throw Error("getClientName not implemented.")}makeRequest(e,t,r,n,i,o,s,a){throw Error("makeRequest not implemented.")}static makeTimeoutError(){let e=TypeError(m.TIMEOUT_ERROR_CODE);return e.code=m.TIMEOUT_ERROR_CODE,e}}m.CONNECTION_CLOSED_ERROR_CODES=["ECONNRESET","EPIPE"],m.TIMEOUT_ERROR_CODE="ETIMEDOUT";class y{constructor(e,t){this._statusCode=e,this._headers=t}getStatusCode(){return this._statusCode}getHeaders(){return this._headers}getRawResponse(){throw Error("getRawResponse not implemented.")}toStream(e){throw Error("toStream not implemented.")}toJSON(){throw Error("toJSON not implemented.")}}let g=d||h,v=f||p,b=new g.Agent({keepAlive:!0}),w=new v.Agent({keepAlive:!0});class _ extends m{constructor(e){super(),this._agent=e}getClientName(){return"node"}makeRequest(e,t,r,n,i,o,s,a){let l="http"===s,c=this._agent;return c||(c=l?b:w),new Promise((s,u)=>{let d=(l?g:v).request({host:e,port:t,path:r,method:n,agent:c,headers:i,ciphers:"DEFAULT:!aNULL:!eNULL:!LOW:!EXPORT:!SSLv2:!MD5"});d.setTimeout(a,()=>{d.destroy(m.makeTimeoutError())}),d.on("response",e=>{s(new E(e))}),d.on("error",e=>{u(e)}),d.once("socket",e=>{e.connecting?e.once(l?"connect":"secureConnect",()=>{d.write(o),d.end()}):(d.write(o),d.end())})})}}class E extends y{constructor(e){super(e.statusCode,e.headers||{}),this._res=e}getRawResponse(){return this._res}toStream(e){return this._res.once("end",()=>e()),this._res}toJSON(){return new Promise((e,t)=>{let r="";this._res.setEncoding("utf8"),this._res.on("data",e=>{r+=e}),this._res.once("end",()=>{try{e(JSON.parse(r))}catch(e){t(e)}})})}}var P=r(9537);let T=["apiKey","idempotencyKey","stripeAccount","apiVersion","maxNetworkRetries","timeout","host","authenticator","stripeContext","additionalHeaders","streaming"];function x(e){return e&&"object"==typeof e&&T.some(t=>Object.prototype.hasOwnProperty.call(e,t))}function S(e,t){return P.stringify(e,{serializeDate:e=>Math.floor(e.getTime()/1e3).toString(),arrayFormat:"indices"}).replace(/%5B/g,"[").replace(/%5D/g,"]")}let O=(n={"\n":"\\n",'"':'\\"',"\u2028":"\\u2028","\u2029":"\\u2029"},e=>{let t=e.replace(/["\n\r\u2028\u2029]/g,e=>n[e]);return e=>t.replace(/\{([\s\S]+?)\}/g,(t,r)=>{let n=e[r];return["number","string","boolean"].includes(typeof n)?encodeURIComponent(n):""})});function A(e){if(!Array.isArray(e)||!e[0]||"object"!=typeof e[0])return{};if(!x(e[0]))return e.shift();let t=Object.keys(e[0]),r=t.filter(e=>T.includes(e));return r.length>0&&r.length!==t.length&&C(`Options found in arguments (${r.join(", ")}). Did you mean to pass an options object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.`),{}}function I(e){let t={host:null,headers:{},settings:{},streaming:!1};if(e.length>0){let r=e[e.length-1];if("string"==typeof r)t.authenticator=z(e.pop());else if(x(r)){let r=Object.assign({},e.pop()),n=Object.keys(r).filter(e=>!T.includes(e));if(n.length&&C(`Invalid options found (${n.join(", ")}); ignoring.`),r.apiKey&&(t.authenticator=z(r.apiKey)),r.idempotencyKey&&(t.headers["Idempotency-Key"]=r.idempotencyKey),r.stripeAccount&&(t.headers["Stripe-Account"]=r.stripeAccount),r.stripeContext){if(t.headers["Stripe-Account"])throw Error("Can't specify both stripeAccount and stripeContext.");t.headers["Stripe-Context"]=r.stripeContext}if(r.apiVersion&&(t.headers["Stripe-Version"]=r.apiVersion),Number.isInteger(r.maxNetworkRetries)&&(t.settings.maxNetworkRetries=r.maxNetworkRetries),Number.isInteger(r.timeout)&&(t.settings.timeout=r.timeout),r.host&&(t.host=r.host),r.authenticator){if(r.apiKey)throw Error("Can't specify both apiKey and authenticator.");if("function"!=typeof r.authenticator)throw Error("The authenticator must be a function receiving a request as the first parameter.");t.authenticator=r.authenticator}r.additionalHeaders&&(t.headers=r.additionalHeaders),r.streaming&&(t.streaming=!0)}}return t}function R(e){if("object"!=typeof e)throw Error("Argument must be an object");return Object.keys(e).reduce((t,r)=>(null!=e[r]&&(t[r]=e[r]),t),{})}function N(e,t){return t?e.then(e=>{setTimeout(()=>{t(null,e)},0)},e=>{setTimeout(()=>{t(e,null)},0)}):e}function C(e){return"function"!=typeof process.emitWarning?console.warn(`Stripe: ${e}`):process.emitWarning(e,"Stripe")}function k(e,t,r){if(!Number.isInteger(t))if(void 0!==r)return r;else throw Error(`${e} must be an integer`);return t}function z(e){let t=t=>(t.headers.Authorization="Bearer "+e,Promise.resolve());return t._apiKey=e,t}function j(e,t){return this[e]instanceof Date?Math.floor(this[e].getTime()/1e3).toString():t}function U(e){return e&&e.startsWith("/v2")?"v2":"v1"}function B(e){return Array.isArray(e)?e.join(", "):String(e)}class D extends m{constructor(e){if(super(),!e){if(!globalThis.fetch)throw Error("fetch() function not provided and is not defined in the global scope. You must provide a fetch implementation.");e=globalThis.fetch}globalThis.AbortController?this._fetchFn=D.makeFetchWithAbortTimeout(e):this._fetchFn=D.makeFetchWithRaceTimeout(e)}static makeFetchWithRaceTimeout(e){return(t,r,n)=>{let i,o=new Promise((e,t)=>{i=setTimeout(()=>{i=null,t(m.makeTimeoutError())},n)});return Promise.race([e(t,r),o]).finally(()=>{i&&clearTimeout(i)})}}static makeFetchWithAbortTimeout(e){return async(t,r,n)=>{let i=new AbortController,o=setTimeout(()=>{o=null,i.abort(m.makeTimeoutError())},n);try{return await e(t,Object.assign(Object.assign({},r),{signal:i.signal}))}catch(e){if("AbortError"===e.name)throw m.makeTimeoutError();throw e}finally{o&&clearTimeout(o)}}}getClientName(){return"fetch"}async makeRequest(e,t,r,n,i,o,s,a){let l=new URL(r,`${"http"===s?"http":"https"}://${e}`);l.port=t;let c="POST"==n||"PUT"==n||"PATCH"==n;return new G(await this._fetchFn(l.toString(),{method:n,headers:Object.entries(i).map(([e,t])=>[e,B(t)]),body:o||(c?"":void 0)},a))}}class G extends y{constructor(e){super(e.status,G._transformHeadersToObject(e.headers)),this._res=e}getRawResponse(){return this._res}toStream(e){return e(),this._res.body}toJSON(){return this._res.json()}static _transformHeadersToObject(e){let t={};for(let r of e){if(!Array.isArray(r)||2!=r.length)throw Error("Response objects produced by the fetch function given to FetchHttpClient do not have an iterable headers map. Response#headers should be an iterable object.");t[r[0]]=r[1]}return t}}class F extends l{constructor(e){super(),this.subtleCrypto=e||crypto.subtle}computeHMACSignature(e,t){throw new c("SubtleCryptoProvider cannot be used in a synchronous context.")}async computeHMACSignatureAsync(e,t){let r=new TextEncoder,n=await this.subtleCrypto.importKey("raw",r.encode(t),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),i=new Uint8Array(await this.subtleCrypto.sign("hmac",n,r.encode(e))),o=Array(i.length);for(let e=0;e<i.length;e++)o[e]=L[i[e]];return o.join("")}async computeSHA256Async(e){return new Uint8Array(await this.subtleCrypto.digest("SHA-256",e))}}let L=Array(256);for(let e=0;e<L.length;e++)L[e]=e.toString(16).padStart(2,"0");class M{constructor(){this._fetchFn=null,this._agent=null}getUname(){throw Error("getUname not implemented.")}uuid4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}secureCompare(e,t){if(e.length!==t.length)return!1;let r=e.length,n=0;for(let i=0;i<r;++i)n|=e.charCodeAt(i)^t.charCodeAt(i);return 0===n}createEmitter(){throw Error("createEmitter not implemented.")}tryBufferData(e){throw Error("tryBufferData not implemented.")}createNodeHttpClient(e){throw Error("createNodeHttpClient not implemented.")}createFetchHttpClient(e){return new D(e)}createDefaultHttpClient(){throw Error("createDefaultHttpClient not implemented.")}createNodeCryptoProvider(){throw Error("createNodeCryptoProvider not implemented.")}createSubtleCryptoProvider(e){return new F(e)}createDefaultCryptoProvider(){throw Error("createDefaultCryptoProvider not implemented.")}}let q=e=>{switch(e.type){case"card_error":return new K(e);case"invalid_request_error":return new V(e);case"api_error":return new W(e);case"authentication_error":return new Z(e);case"rate_limit_error":return new X(e);case"idempotency_error":return new ee(e);case"invalid_grant":return new et(e);default:return new er(e)}},H=e=>"temporary_session_expired"===e.type?new en(e):"invalid_fields"===e.code?new V(e):q(e);class $ extends Error{constructor(e={},t=null){var r;super(e.message),this.type=t||this.constructor.name,this.raw=e,this.rawType=e.type,this.code=e.code,this.doc_url=e.doc_url,this.param=e.param,this.detail=e.detail,this.headers=e.headers,this.requestId=e.requestId,this.statusCode=e.statusCode,this.message=null!=(r=e.message)?r:"",this.userMessage=e.user_message,this.charge=e.charge,this.decline_code=e.decline_code,this.payment_intent=e.payment_intent,this.payment_method=e.payment_method,this.payment_method_type=e.payment_method_type,this.setup_intent=e.setup_intent,this.source=e.source}}$.generate=q;class K extends ${constructor(e={}){super(e,"StripeCardError")}}class V extends ${constructor(e={}){super(e,"StripeInvalidRequestError")}}class W extends ${constructor(e={}){super(e,"StripeAPIError")}}class Z extends ${constructor(e={}){super(e,"StripeAuthenticationError")}}class Y extends ${constructor(e={}){super(e,"StripePermissionError")}}class X extends ${constructor(e={}){super(e,"StripeRateLimitError")}}class J extends ${constructor(e={}){super(e,"StripeConnectionError")}}class Q extends ${constructor(e,t,r={}){super(r,"StripeSignatureVerificationError"),this.header=e,this.payload=t}}class ee extends ${constructor(e={}){super(e,"StripeIdempotencyError")}}class et extends ${constructor(e={}){super(e,"StripeInvalidGrantError")}}class er extends ${constructor(e={}){super(e,"StripeUnknownError")}}class en extends ${constructor(e={}){super(e,"TemporarySessionExpiredError")}}var ei=r(5317);class eo extends ${}class es{constructor(e,t){this._stripe=e,this._maxBufferedRequestMetric=t}_normalizeStripeContext(e,t){return e?e.toString()||null:(null==t?void 0:t.toString())||null}_addHeadersDirectlyToObject(e,t){e.requestId=t["request-id"],e.stripeAccount=e.stripeAccount||t["stripe-account"],e.apiVersion=e.apiVersion||t["stripe-version"],e.idempotencyKey=e.idempotencyKey||t["idempotency-key"]}_makeResponseEvent(e,t,r){let n=Date.now(),i=n-e.request_start_time;return R({api_version:r["stripe-version"],account:r["stripe-account"],idempotency_key:r["idempotency-key"],method:e.method,path:e.path,status:t,request_id:this._getRequestId(r),elapsed:i,request_start_time:e.request_start_time,request_end_time:n})}_getRequestId(e){return e["request-id"]}_streamingResponseHandler(e,t,r){return n=>{let i=n.getHeaders(),o=()=>{let r=this._makeResponseEvent(e,n.getStatusCode(),i);this._stripe._emitter.emit("response",r),this._recordRequestMetrics(this._getRequestId(i),r.elapsed,t)},s=n.toStream(o);return this._addHeadersDirectlyToObject(s,i),r(null,s)}}_jsonResponseHandler(e,t,r,n){return i=>{let o=i.getHeaders(),s=this._getRequestId(o),a=i.getStatusCode(),l=this._makeResponseEvent(e,a,o);this._stripe._emitter.emit("response",l),i.toJSON().then(e=>{if(e.error)throw"string"==typeof e.error&&(e.error={type:e.error,message:e.error_description}),e.error.headers=o,e.error.statusCode=a,e.error.requestId=s,401===a?new Z(e.error):403===a?new Y(e.error):429===a?new X(e.error):"v2"===t?H(e.error):q(e.error);return e},e=>{throw new W({message:"Invalid JSON received from the Stripe API",exception:e,requestId:o["request-id"]})}).then(e=>{this._recordRequestMetrics(s,l.elapsed,r);let t=i.getRawResponse();this._addHeadersDirectlyToObject(t,o),Object.defineProperty(e,"lastResponse",{enumerable:!1,writable:!1,value:t}),n(null,e)},e=>n(e,null))}}static _generateConnectionErrorMessage(e){return`An error occurred with our connection to Stripe.${e>0?` Request was retried ${e} times.`:""}`}static _shouldRetry(e,t,r,n){return!!(n&&0===t&&m.CONNECTION_CLOSED_ERROR_CODES.includes(n.code))||!(t>=r)&&(!e||"false"!==e.getHeaders()["stripe-should-retry"]&&!!("true"===e.getHeaders()["stripe-should-retry"]||409===e.getStatusCode()||e.getStatusCode()>=500))}_getSleepTimeInMS(e,t=null){let r=this._stripe.getInitialNetworkRetryDelay(),n=Math.min(r*Math.pow(2,e-1),this._stripe.getMaxNetworkRetryDelay());return n*=.5*(1+Math.random()),n=Math.max(r,n),Number.isInteger(t)&&t<=60&&(n=Math.max(n,t)),1e3*n}_getMaxNetworkRetries(e={}){return void 0!==e.maxNetworkRetries&&Number.isInteger(e.maxNetworkRetries)?e.maxNetworkRetries:this._stripe.getMaxNetworkRetries()}_defaultIdempotencyKey(e,t,r){let n=this._getMaxNetworkRetries(t),i=()=>`stripe-node-retry-${this._stripe._platformFunctions.uuid4()}`;if("v2"===r){if("POST"===e||"DELETE"===e)return i()}else if("v1"===r&&"POST"===e&&n>0)return i();return null}_makeHeaders({contentType:e,contentLength:t,apiVersion:r,clientUserAgent:n,method:i,userSuppliedHeaders:o,userSuppliedSettings:s,stripeAccount:a,stripeContext:l,apiMode:c}){let u={Accept:"application/json","Content-Type":e,"User-Agent":this._getUserAgentString(c),"X-Stripe-Client-User-Agent":n,"X-Stripe-Client-Telemetry":this._getTelemetryHeader(),"Stripe-Version":r,"Stripe-Account":a,"Stripe-Context":l,"Idempotency-Key":this._defaultIdempotencyKey(i,s,c)},d="POST"==i||"PUT"==i||"PATCH"==i;return(d||t)&&(d||C(`${i} method had non-zero contentLength but no payload is expected for this verb`),u["Content-Length"]=t),Object.assign(R(u),o&&"object"==typeof o?Object.keys(o).reduce((e,t)=>(e[t.split("-").map(e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()).join("-")]=o[t],e),{}):o)}_getUserAgentString(e){let t=this._stripe.getConstant("PACKAGE_VERSION"),r=this._stripe._appInfo?this._stripe.getAppInfoAsString():"";return`Stripe/${e} NodeBindings/${t} ${r}`.trim()}_getTelemetryHeader(){if(this._stripe.getTelemetryEnabled()&&this._stripe._prevRequestMetrics.length>0)return JSON.stringify({last_request_metrics:this._stripe._prevRequestMetrics.shift()})}_recordRequestMetrics(e,t,r){if(this._stripe.getTelemetryEnabled()&&e)if(this._stripe._prevRequestMetrics.length>this._maxBufferedRequestMetric)C("Request metrics buffer is full, dropping telemetry message.");else{let n={request_id:e,request_duration_ms:t};r&&r.length>0&&(n.usage=r),this._stripe._prevRequestMetrics.push(n)}}_rawRequest(e,t,r,n,i){return new Promise((o,s)=>{let a;try{let o=e.toUpperCase();if("POST"!==o&&r&&0!==Object.keys(r).length)throw Error("rawRequest only supports params on POST requests. Please pass null and add your parameters to path.");let s=[].slice.call([r,n]),l=A(s),c="POST"===o?Object.assign({},l):null,u=I(s),d=u.headers,h=u.authenticator;a={requestMethod:o,requestPath:t,bodyData:c,queryData:{},authenticator:h,headers:d,host:u.host,streaming:!!u.streaming,settings:{},usage:i||["raw_request"]}}catch(e){s(e);return}let{headers:l,settings:c}=a,u=a.authenticator;this._request(a.requestMethod,a.host,t,a.bodyData,u,{headers:l,settings:c,streaming:a.streaming},a.usage,function(e,t){e?s(e):o(t)})})}_request(e,t,r,n,i,o,s=[],a,l=null){var c;let u;i=null!=(c=null!=i?i:this._stripe._authenticator)?c:null;let d=U(r),h=(e,t,r,n,i)=>setTimeout(e,this._getSleepTimeInMS(n,i),t,r,n+1),f=(n,l,c)=>{let p=o.settings&&o.settings.timeout&&Number.isInteger(o.settings.timeout)&&o.settings.timeout>=0?o.settings.timeout:this._stripe.getApiField("timeout"),y={host:t||this._stripe.getApiField("host"),port:this._stripe.getApiField("port"),path:r,method:e,headers:Object.assign({},l),body:u,protocol:this._stripe.getApiField("protocol")};i(y).then(()=>{let t=this._stripe.getApiField("httpClient").makeRequest(y.host,y.port,y.path,y.method,y.headers,y.body,y.protocol,p),i=Date.now(),u=R({api_version:n,account:B(l["Stripe-Account"]),idempotency_key:B(l["Idempotency-Key"]),method:e,path:r,request_start_time:i}),g=c||0,v=this._getMaxNetworkRetries(o.settings||{});this._stripe._emitter.emit("request",u),t.then(e=>{if(es._shouldRetry(e,g,v)){var t;return h(f,n,l,g,Number(Array.isArray(t=e.getHeaders()["retry-after"])?t[0]:t))}return o.streaming&&400>e.getStatusCode()?this._streamingResponseHandler(u,s,a)(e):this._jsonResponseHandler(u,d,s,a)(e)}).catch(e=>es._shouldRetry(null,g,v,e)?h(f,n,l,g,null):a(new J({message:e.code&&e.code===m.TIMEOUT_ERROR_CODE?`Request aborted due to timeout being reached (${p}ms)`:es._generateConnectionErrorMessage(g),detail:e})))}).catch(e=>{throw new $({message:"Unable to authenticate the request",exception:e})})},p=(t,r)=>{if(t)return a(t);u=r,this._stripe.getClientUserAgent(t=>{var r,n,i;let s=this._stripe.getApiField("version"),a=this._makeHeaders({contentType:"v2"==d?"application/json":"application/x-www-form-urlencoded",contentLength:new TextEncoder().encode(u).length,apiVersion:s,clientUserAgent:t,method:e,userSuppliedHeaders:null!=(r=o.headers)?r:null,userSuppliedSettings:null!=(n=o.settings)?n:{},stripeAccount:null!=(i=o.stripeAccount)?i:this._stripe.getApiField("stripeAccount"),stripeContext:this._normalizeStripeContext(o.stripeContext,this._stripe.getApiField("stripeContext")),apiMode:d});f(s,a,0)})};if(l)l(e,n,o.headers,p);else{let e;p(null,e="v2"==d?n?JSON.stringify(n,j):"":S(n||{},d))}}}class ea{constructor(e,t,r,n){this.index=0,this.pagePromise=e,this.promiseCache={currentPromise:null},this.requestArgs=t,this.spec=r,this.stripeResource=n}async iterate(e){if(!(e&&e.data&&"number"==typeof e.data.length))throw Error("Unexpected: Stripe API response does not have a well-formed `data` array.");let t=eh(this.requestArgs);if(this.index<e.data.length){let r=t?e.data.length-1-this.index:this.index,n=e.data[r];return this.index+=1,{value:n,done:!1}}if(e.has_more){this.index=0,this.pagePromise=this.getNextPage(e);let t=await this.pagePromise;return this.iterate(t)}return{done:!0,value:void 0}}getNextPage(e){throw Error("Unimplemented")}async _next(){return this.iterate(await this.pagePromise)}next(){if(this.promiseCache.currentPromise)return this.promiseCache.currentPromise;let e=(async()=>{let e=await this._next();return this.promiseCache.currentPromise=null,e})();return this.promiseCache.currentPromise=e,e}}class el extends ea{getNextPage(e){let t=eh(this.requestArgs),r=function(e,t){let r=t?0:e.data.length-1,n=e.data[r],i=n&&n.id;if(!i)throw Error("Unexpected: No `id` found on the last item while auto-paging a list.");return i}(e,t);return this.stripeResource._makeRequest(this.requestArgs,this.spec,{[t?"ending_before":"starting_after"]:r})}}class ec extends ea{getNextPage(e){if(!e.next_page)throw Error("Unexpected: Stripe API response does not have a well-formed `next_page` field, but `has_more` was true.");return this.stripeResource._makeRequest(this.requestArgs,this.spec,{page:e.next_page})}}class eu{constructor(e,t,r,n){this.currentPageIterator=(async()=>(await e).data[Symbol.iterator]())(),this.nextPageUrl=(async()=>(await e).next_page_url||null)(),this.requestArgs=t,this.spec=r,this.stripeResource=n}async turnPage(){let e=await this.nextPageUrl;if(!e)return null;this.spec.fullPath=e;let t=await this.stripeResource._makeRequest([],this.spec,{});return this.nextPageUrl=Promise.resolve(t.next_page_url),this.currentPageIterator=Promise.resolve(t.data[Symbol.iterator]()),this.currentPageIterator}async next(){{let e=(await this.currentPageIterator).next();if(!e.done)return{done:!1,value:e.value}}let e=await this.turnPage();if(!e)return{done:!0,value:void 0};let t=e.next();return t.done?{done:!0,value:void 0}:{done:!1,value:t.value}}}let ed=e=>{var t,r;let n=(t=(...t)=>e.next(...t),function(){var e,r;let n=[].slice.call(arguments),i=function(e){if(0===e.length)return;let t=e[0];if("function"!=typeof t)throw Error(`The first argument to autoPagingEach, if present, must be a callback function; received ${typeof t}`);if(2===t.length)return t;if(t.length>2)throw Error(`The \`onItem\` callback function passed to autoPagingEach must accept at most two arguments; got ${t}`);return function(e,r){r(t(e))}}(n),o=function(e){if(e.length<2)return null;let t=e[1];if("function"!=typeof t)throw Error(`The second argument to autoPagingEach, if present, must be a callback function; received ${typeof t}`);return t}(n);if(n.length>2)throw Error(`autoPagingEach takes up to two arguments; received ${n}`);return N((e=t,r=i,new Promise((t,n)=>{e().then(function n(i){if(i.done)return void t();let o=i.value;return new Promise(e=>{r(o,e)}).then(t=>!1===t?n({done:!0,value:void 0}):e().then(n))}).catch(n)})),o)}),i=(r=n,function(e,t){let n=e&&e.limit;if(!n)throw Error("You must pass a `limit` option to autoPagingToArray, e.g., `autoPagingToArray({limit: 1000});`.");if(n>1e4)throw Error("You cannot specify a limit of more than 10,000 items to fetch in `autoPagingToArray`; use `autoPagingEach` to iterate through longer lists.");return N(new Promise((e,t)=>{let i=[];r(e=>{if(i.push(e),i.length>=n)return!1}).then(()=>{e(i)}).catch(t)}),t)}),o={autoPagingEach:n,autoPagingToArray:i,next:()=>e.next(),return:()=>({}),["undefined"!=typeof Symbol&&Symbol.asyncIterator?Symbol.asyncIterator:"@@asyncIterator"]:()=>o};return o};function eh(e){return!!A([].slice.call(e)).ending_before}function ef(e,t){if(this._stripe=e,t)throw Error("Support for curried url params was dropped in stripe-node v7.0.0. Instead, pass two ids.");this.basePath=O(this.basePath||e.getApiField("basePath")),this.resourcePath=this.path,this.path=O(this.path),this.initialize(...arguments)}ef.extend=function(e){let t=this,r=Object.prototype.hasOwnProperty.call(e,"constructor")?e.constructor:function(...e){t.apply(this,e)};return Object.assign(r,t),r.prototype=Object.create(t.prototype),Object.assign(r.prototype,e),r},ef.method=function(e){if(void 0!==e.path&&void 0!==e.fullPath)throw Error(`Method spec specified both a 'path' (${e.path}) and a 'fullPath' (${e.fullPath}).`);return function(...t){let r,n,i="function"==typeof t[t.length-1]&&t.pop();r=(e.fullPath||this.createResourcePathWithSymbols(e.path||"")).match(/\{\w+\}/g),e.urlParams=r?r.map(e=>e.replace(/[{}]/g,"")):[];let o=N(this._makeRequest(t,e,{}),i);return Object.assign(o,"v2"!==(n=U(e.fullPath||e.path))&&"search"===e.methodType?ed(new ec(o,t,e,this)):"v2"!==n&&"list"===e.methodType?ed(new el(o,t,e,this)):"v2"===n&&"list"===e.methodType?ed(new eu(o,t,e,this)):null),o}},ef.MAX_BUFFERED_REQUEST_METRICS=100,ef.prototype={_stripe:null,path:"",resourcePath:"",basePath:null,initialize(){},requestDataProcessor:null,validateRequest:null,createFullPath(e,t){let r=[this.basePath(t),this.path(t)];if("function"==typeof e){let n=e(t);n&&r.push(n)}else r.push(e);return this._joinUrlParts(r)},createResourcePathWithSymbols(e){return e?`/${this._joinUrlParts([this.resourcePath,e])}`:`/${this.resourcePath}`},_joinUrlParts:e=>e.join("/").replace(/\/{2,}/g,"/"),_getRequestOpts(e,t,r){var n;let i=(t.method||"GET").toUpperCase(),o=t.usage||[],s=t.urlParams||[],a=t.encode||(e=>e),l=!!t.fullPath,c=O(l?t.fullPath:t.path||""),u=l?t.fullPath:this.createResourcePathWithSymbols(t.path),d=[].slice.call(e),h=s.reduce((e,t)=>{let r=d.shift();if("string"!=typeof r)throw Error(`Stripe: Argument "${t}" must be a string, but got: ${r} (on API request to \`${i} ${u}\`)`);return e[t]=r,e},{}),f=a(Object.assign({},A(d),r)),p=I(d),m=p.host||t.host,y=!!t.streaming||!!p.streaming;if(d.filter(e=>null!=e).length)throw Error(`Stripe: Unknown arguments (${d}). Did you mean to pass an options object? See https://github.com/stripe/stripe-node/wiki/Passing-Options. (on API request to ${i} \`${u}\`)`);let g=l?c(h):this.createFullPath(c,h),v=Object.assign(p.headers,t.headers);t.validator&&t.validator(f,{headers:v});let b="GET"===t.method||"DELETE"===t.method;return{requestMethod:i,requestPath:g,bodyData:b?null:f,queryData:b?f:{},authenticator:null!=(n=p.authenticator)?n:null,headers:v,host:null!=m?m:null,streaming:y,settings:p.settings,usage:o}},_makeRequest(e,t,r){return new Promise((n,i)=>{var o;let s;try{s=this._getRequestOpts(e,t,r)}catch(e){i(e);return}let a=0===Object.keys(s.queryData).length,l=[s.requestPath,a?"":"?",S(s.queryData,U(s.requestPath))].join(""),{headers:c,settings:u}=s;this._stripe._requestSender._request(s.requestMethod,s.host,l,s.bodyData,s.authenticator,{headers:c,settings:u,streaming:s.streaming},s.usage,function(e,r){e?i(e):n(t.transformResponseData?t.transformResponseData(r):r)},null==(o=this.requestDataProcessor)?void 0:o.bind(this))})}};class ep{constructor(e=[]){this._segments=[...e]}get segments(){return[...this._segments]}push(e){if(!e)throw Error("Segment cannot be null or undefined");return new ep([...this._segments,e])}pop(){if(0===this._segments.length)throw Error("Cannot pop from an empty context");return new ep(this._segments.slice(0,-1))}toString(){return this._segments.join("/")}static parse(e){return new ep(e?e.split("/"):[])}}let em="2025-11-17.clover";function ey(e,t){for(let r in t){if(!Object.prototype.hasOwnProperty.call(t,r))continue;let n=r[0].toLowerCase()+r.substring(1),i=new t[r](e);this[n]=i}}function eg(e,t){return function(e){return new ey(e,t)}}let ev=ef.method,eb=ef.extend({retrieve:ev({method:"GET",fullPath:"/v1/financial_connections/accounts/{account}"}),list:ev({method:"GET",fullPath:"/v1/financial_connections/accounts",methodType:"list"}),disconnect:ev({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/disconnect"}),listOwners:ev({method:"GET",fullPath:"/v1/financial_connections/accounts/{account}/owners",methodType:"list"}),refresh:ev({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/refresh"}),subscribe:ev({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/subscribe"}),unsubscribe:ev({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/unsubscribe"})}),ew=ef.method,e_=ef.extend({retrieve:ew({method:"GET",fullPath:"/v1/entitlements/active_entitlements/{id}"}),list:ew({method:"GET",fullPath:"/v1/entitlements/active_entitlements",methodType:"list"})}),eE=ef.method,eP=ef.extend({create:eE({method:"POST",fullPath:"/v1/billing/alerts"}),retrieve:eE({method:"GET",fullPath:"/v1/billing/alerts/{id}"}),list:eE({method:"GET",fullPath:"/v1/billing/alerts",methodType:"list"}),activate:eE({method:"POST",fullPath:"/v1/billing/alerts/{id}/activate"}),archive:eE({method:"POST",fullPath:"/v1/billing/alerts/{id}/archive"}),deactivate:eE({method:"POST",fullPath:"/v1/billing/alerts/{id}/deactivate"})}),eT=ef.method,ex=ef.extend({find:eT({method:"GET",fullPath:"/v1/tax/associations/find"})}),eS=ef.method,eO=ef.extend({retrieve:eS({method:"GET",fullPath:"/v1/issuing/authorizations/{authorization}"}),update:eS({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}"}),list:eS({method:"GET",fullPath:"/v1/issuing/authorizations",methodType:"list"}),approve:eS({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}/approve"}),decline:eS({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}/decline"})}),eA=ef.method,eI=ef.extend({create:eA({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations"}),capture:eA({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/capture"}),expire:eA({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/expire"}),finalizeAmount:eA({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/finalize_amount"}),increment:eA({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/increment"}),respond:eA({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/fraud_challenges/respond"}),reverse:eA({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/reverse"})}),eR=ef.method,eN=ef.extend({create:eR({method:"POST",fullPath:"/v1/tax/calculations"}),retrieve:eR({method:"GET",fullPath:"/v1/tax/calculations/{calculation}"}),listLineItems:eR({method:"GET",fullPath:"/v1/tax/calculations/{calculation}/line_items",methodType:"list"})}),eC=ef.method,ek=ef.extend({create:eC({method:"POST",fullPath:"/v1/issuing/cardholders"}),retrieve:eC({method:"GET",fullPath:"/v1/issuing/cardholders/{cardholder}"}),update:eC({method:"POST",fullPath:"/v1/issuing/cardholders/{cardholder}"}),list:eC({method:"GET",fullPath:"/v1/issuing/cardholders",methodType:"list"})}),ez=ef.method,ej=ef.extend({create:ez({method:"POST",fullPath:"/v1/issuing/cards"}),retrieve:ez({method:"GET",fullPath:"/v1/issuing/cards/{card}"}),update:ez({method:"POST",fullPath:"/v1/issuing/cards/{card}"}),list:ez({method:"GET",fullPath:"/v1/issuing/cards",methodType:"list"})}),eU=ef.method,eB=ef.extend({deliverCard:eU({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/deliver"}),failCard:eU({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/fail"}),returnCard:eU({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/return"}),shipCard:eU({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/ship"}),submitCard:eU({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/submit"})}),eD=ef.method,eG=ef.extend({create:eD({method:"POST",fullPath:"/v1/billing_portal/configurations"}),retrieve:eD({method:"GET",fullPath:"/v1/billing_portal/configurations/{configuration}"}),update:eD({method:"POST",fullPath:"/v1/billing_portal/configurations/{configuration}"}),list:eD({method:"GET",fullPath:"/v1/billing_portal/configurations",methodType:"list"})}),eF=ef.method,eL=ef.extend({create:eF({method:"POST",fullPath:"/v1/terminal/configurations"}),retrieve:eF({method:"GET",fullPath:"/v1/terminal/configurations/{configuration}"}),update:eF({method:"POST",fullPath:"/v1/terminal/configurations/{configuration}"}),list:eF({method:"GET",fullPath:"/v1/terminal/configurations",methodType:"list"}),del:eF({method:"DELETE",fullPath:"/v1/terminal/configurations/{configuration}"})}),eM=ef.method,eq=ef.extend({create:eM({method:"POST",fullPath:"/v1/test_helpers/confirmation_tokens"})}),eH=ef.method,e$=ef.extend({create:eH({method:"POST",fullPath:"/v1/terminal/connection_tokens"})}),eK=ef.method,eV=ef.extend({retrieve:eK({method:"GET",fullPath:"/v1/billing/credit_balance_summary"})}),eW=ef.method,eZ=ef.extend({retrieve:eW({method:"GET",fullPath:"/v1/billing/credit_balance_transactions/{id}"}),list:eW({method:"GET",fullPath:"/v1/billing/credit_balance_transactions",methodType:"list"})}),eY=ef.method,eX=ef.extend({create:eY({method:"POST",fullPath:"/v1/billing/credit_grants"}),retrieve:eY({method:"GET",fullPath:"/v1/billing/credit_grants/{id}"}),update:eY({method:"POST",fullPath:"/v1/billing/credit_grants/{id}"}),list:eY({method:"GET",fullPath:"/v1/billing/credit_grants",methodType:"list"}),expire:eY({method:"POST",fullPath:"/v1/billing/credit_grants/{id}/expire"}),voidGrant:eY({method:"POST",fullPath:"/v1/billing/credit_grants/{id}/void"})}),eJ=ef.method,eQ=ef.extend({create:eJ({method:"POST",fullPath:"/v1/treasury/credit_reversals"}),retrieve:eJ({method:"GET",fullPath:"/v1/treasury/credit_reversals/{credit_reversal}"}),list:eJ({method:"GET",fullPath:"/v1/treasury/credit_reversals",methodType:"list"})}),e0=ef.method,e1=ef.extend({fundCashBalance:e0({method:"POST",fullPath:"/v1/test_helpers/customers/{customer}/fund_cash_balance"})}),e2=ef.method,e8=ef.extend({create:e2({method:"POST",fullPath:"/v1/treasury/debit_reversals"}),retrieve:e2({method:"GET",fullPath:"/v1/treasury/debit_reversals/{debit_reversal}"}),list:e2({method:"GET",fullPath:"/v1/treasury/debit_reversals",methodType:"list"})}),e6=ef.method,e4=ef.extend({create:e6({method:"POST",fullPath:"/v1/issuing/disputes"}),retrieve:e6({method:"GET",fullPath:"/v1/issuing/disputes/{dispute}"}),update:e6({method:"POST",fullPath:"/v1/issuing/disputes/{dispute}"}),list:e6({method:"GET",fullPath:"/v1/issuing/disputes",methodType:"list"}),submit:e6({method:"POST",fullPath:"/v1/issuing/disputes/{dispute}/submit"})}),e3=ef.method,e5=ef.extend({retrieve:e3({method:"GET",fullPath:"/v1/radar/early_fraud_warnings/{early_fraud_warning}"}),list:e3({method:"GET",fullPath:"/v1/radar/early_fraud_warnings",methodType:"list"})}),e9=ef.method,e7=ef.extend({create:e9({method:"POST",fullPath:"/v2/core/event_destinations"}),retrieve:e9({method:"GET",fullPath:"/v2/core/event_destinations/{id}"}),update:e9({method:"POST",fullPath:"/v2/core/event_destinations/{id}"}),list:e9({method:"GET",fullPath:"/v2/core/event_destinations",methodType:"list"}),del:e9({method:"DELETE",fullPath:"/v2/core/event_destinations/{id}"}),disable:e9({method:"POST",fullPath:"/v2/core/event_destinations/{id}/disable"}),enable:e9({method:"POST",fullPath:"/v2/core/event_destinations/{id}/enable"}),ping:e9({method:"POST",fullPath:"/v2/core/event_destinations/{id}/ping"})}),te=ef.method,tt=ef.extend({retrieve(...e){return te({method:"GET",fullPath:"/v2/core/events/{id}",transformResponseData:e=>this.addFetchRelatedObjectIfNeeded(e)}).apply(this,e)},list(...e){return te({method:"GET",fullPath:"/v2/core/events",methodType:"list",transformResponseData:e=>Object.assign(Object.assign({},e),{data:e.data.map(this.addFetchRelatedObjectIfNeeded.bind(this))})}).apply(this,e)},addFetchRelatedObjectIfNeeded(e){return e.related_object&&e.related_object.url?Object.assign(Object.assign({},e),{fetchRelatedObject:()=>te({method:"GET",fullPath:e.related_object.url}).apply(this,[{stripeContext:e.context}])}):e}}),tr=ef.method,tn=ef.extend({create:tr({method:"POST",fullPath:"/v1/entitlements/features"}),retrieve:tr({method:"GET",fullPath:"/v1/entitlements/features/{id}"}),update:tr({method:"POST",fullPath:"/v1/entitlements/features/{id}"}),list:tr({method:"GET",fullPath:"/v1/entitlements/features",methodType:"list"})}),ti=ef.method,to=ef.extend({create:ti({method:"POST",fullPath:"/v1/treasury/financial_accounts"}),retrieve:ti({method:"GET",fullPath:"/v1/treasury/financial_accounts/{financial_account}"}),update:ti({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}"}),list:ti({method:"GET",fullPath:"/v1/treasury/financial_accounts",methodType:"list"}),close:ti({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}/close"}),retrieveFeatures:ti({method:"GET",fullPath:"/v1/treasury/financial_accounts/{financial_account}/features"}),updateFeatures:ti({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}/features"})}),ts=ef.method,ta=ef.extend({fail:ts({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/fail"}),returnInboundTransfer:ts({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/return"}),succeed:ts({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/succeed"})}),tl=ef.method,tc=ef.extend({create:tl({method:"POST",fullPath:"/v1/treasury/inbound_transfers"}),retrieve:tl({method:"GET",fullPath:"/v1/treasury/inbound_transfers/{id}"}),list:tl({method:"GET",fullPath:"/v1/treasury/inbound_transfers",methodType:"list"}),cancel:tl({method:"POST",fullPath:"/v1/treasury/inbound_transfers/{inbound_transfer}/cancel"})}),tu=ef.method,td=ef.extend({create:tu({method:"POST",fullPath:"/v1/terminal/locations"}),retrieve:tu({method:"GET",fullPath:"/v1/terminal/locations/{location}"}),update:tu({method:"POST",fullPath:"/v1/terminal/locations/{location}"}),list:tu({method:"GET",fullPath:"/v1/terminal/locations",methodType:"list"}),del:tu({method:"DELETE",fullPath:"/v1/terminal/locations/{location}"})}),th=ef.method,tf=ef.extend({create:th({method:"POST",fullPath:"/v1/billing/meter_event_adjustments"})}),tp=ef.method,tm=ef.extend({create:tp({method:"POST",fullPath:"/v2/billing/meter_event_adjustments"})}),ty=ef.method,tg=ef.extend({create:ty({method:"POST",fullPath:"/v2/billing/meter_event_session"})}),tv=ef.method,tb=ef.extend({create:tv({method:"POST",fullPath:"/v2/billing/meter_event_stream",host:"meter-events.stripe.com"})}),tw=ef.method,t_=ef.extend({create:tw({method:"POST",fullPath:"/v1/billing/meter_events"})}),tE=ef.method,tP=ef.extend({create:tE({method:"POST",fullPath:"/v2/billing/meter_events"})}),tT=ef.method,tx=ef.extend({create:tT({method:"POST",fullPath:"/v1/billing/meters"}),retrieve:tT({method:"GET",fullPath:"/v1/billing/meters/{id}"}),update:tT({method:"POST",fullPath:"/v1/billing/meters/{id}"}),list:tT({method:"GET",fullPath:"/v1/billing/meters",methodType:"list"}),deactivate:tT({method:"POST",fullPath:"/v1/billing/meters/{id}/deactivate"}),listEventSummaries:tT({method:"GET",fullPath:"/v1/billing/meters/{id}/event_summaries",methodType:"list"}),reactivate:tT({method:"POST",fullPath:"/v1/billing/meters/{id}/reactivate"})}),tS=ef.method,tO=ef.extend({create:tS({method:"POST",fullPath:"/v1/terminal/onboarding_links"})}),tA=ef.method,tI=ef.extend({create:tA({method:"POST",fullPath:"/v1/climate/orders"}),retrieve:tA({method:"GET",fullPath:"/v1/climate/orders/{order}"}),update:tA({method:"POST",fullPath:"/v1/climate/orders/{order}"}),list:tA({method:"GET",fullPath:"/v1/climate/orders",methodType:"list"}),cancel:tA({method:"POST",fullPath:"/v1/climate/orders/{order}/cancel"})}),tR=ef.method,tN=ef.extend({update:tR({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}"}),fail:tR({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/fail"}),post:tR({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/post"}),returnOutboundPayment:tR({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/return"})}),tC=ef.method,tk=ef.extend({create:tC({method:"POST",fullPath:"/v1/treasury/outbound_payments"}),retrieve:tC({method:"GET",fullPath:"/v1/treasury/outbound_payments/{id}"}),list:tC({method:"GET",fullPath:"/v1/treasury/outbound_payments",methodType:"list"}),cancel:tC({method:"POST",fullPath:"/v1/treasury/outbound_payments/{id}/cancel"})}),tz=ef.method,tj=ef.extend({update:tz({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}"}),fail:tz({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/fail"}),post:tz({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/post"}),returnOutboundTransfer:tz({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/return"})}),tU=ef.method,tB=ef.extend({create:tU({method:"POST",fullPath:"/v1/treasury/outbound_transfers"}),retrieve:tU({method:"GET",fullPath:"/v1/treasury/outbound_transfers/{outbound_transfer}"}),list:tU({method:"GET",fullPath:"/v1/treasury/outbound_transfers",methodType:"list"}),cancel:tU({method:"POST",fullPath:"/v1/treasury/outbound_transfers/{outbound_transfer}/cancel"})}),tD=ef.method,tG=ef.extend({create:tD({method:"POST",fullPath:"/v1/issuing/personalization_designs"}),retrieve:tD({method:"GET",fullPath:"/v1/issuing/personalization_designs/{personalization_design}"}),update:tD({method:"POST",fullPath:"/v1/issuing/personalization_designs/{personalization_design}"}),list:tD({method:"GET",fullPath:"/v1/issuing/personalization_designs",methodType:"list"})}),tF=ef.method,tL=ef.extend({activate:tF({method:"POST",fullPath:"/v1/test_helpers/issuing/personalization_designs/{personalization_design}/activate"}),deactivate:tF({method:"POST",fullPath:"/v1/test_helpers/issuing/personalization_designs/{personalization_design}/deactivate"}),reject:tF({method:"POST",fullPath:"/v1/test_helpers/issuing/personalization_designs/{personalization_design}/reject"})}),tM=ef.method,tq=ef.extend({retrieve:tM({method:"GET",fullPath:"/v1/issuing/physical_bundles/{physical_bundle}"}),list:tM({method:"GET",fullPath:"/v1/issuing/physical_bundles",methodType:"list"})}),tH=ef.method,t$=ef.extend({retrieve:tH({method:"GET",fullPath:"/v1/climate/products/{product}"}),list:tH({method:"GET",fullPath:"/v1/climate/products",methodType:"list"})}),tK=ef.method,tV=ef.extend({create:tK({method:"POST",fullPath:"/v1/terminal/readers"}),retrieve:tK({method:"GET",fullPath:"/v1/terminal/readers/{reader}"}),update:tK({method:"POST",fullPath:"/v1/terminal/readers/{reader}"}),list:tK({method:"GET",fullPath:"/v1/terminal/readers",methodType:"list"}),del:tK({method:"DELETE",fullPath:"/v1/terminal/readers/{reader}"}),cancelAction:tK({method:"POST",fullPath:"/v1/terminal/readers/{reader}/cancel_action"}),collectInputs:tK({method:"POST",fullPath:"/v1/terminal/readers/{reader}/collect_inputs"}),collectPaymentMethod:tK({method:"POST",fullPath:"/v1/terminal/readers/{reader}/collect_payment_method"}),confirmPaymentIntent:tK({method:"POST",fullPath:"/v1/terminal/readers/{reader}/confirm_payment_intent"}),processPaymentIntent:tK({method:"POST",fullPath:"/v1/terminal/readers/{reader}/process_payment_intent"}),processSetupIntent:tK({method:"POST",fullPath:"/v1/terminal/readers/{reader}/process_setup_intent"}),refundPayment:tK({method:"POST",fullPath:"/v1/terminal/readers/{reader}/refund_payment"}),setReaderDisplay:tK({method:"POST",fullPath:"/v1/terminal/readers/{reader}/set_reader_display"})}),tW=ef.method,tZ=ef.extend({presentPaymentMethod:tW({method:"POST",fullPath:"/v1/test_helpers/terminal/readers/{reader}/present_payment_method"}),succeedInputCollection:tW({method:"POST",fullPath:"/v1/test_helpers/terminal/readers/{reader}/succeed_input_collection"}),timeoutInputCollection:tW({method:"POST",fullPath:"/v1/test_helpers/terminal/readers/{reader}/timeout_input_collection"})}),tY=ef.method,tX=ef.extend({create:tY({method:"POST",fullPath:"/v1/test_helpers/treasury/received_credits"})}),tJ=ef.method,tQ=ef.extend({retrieve:tJ({method:"GET",fullPath:"/v1/treasury/received_credits/{id}"}),list:tJ({method:"GET",fullPath:"/v1/treasury/received_credits",methodType:"list"})}),t0=ef.method,t1=ef.extend({create:t0({method:"POST",fullPath:"/v1/test_helpers/treasury/received_debits"})}),t2=ef.method,t8=ef.extend({retrieve:t2({method:"GET",fullPath:"/v1/treasury/received_debits/{id}"}),list:t2({method:"GET",fullPath:"/v1/treasury/received_debits",methodType:"list"})}),t6=ef.method,t4=ef.extend({expire:t6({method:"POST",fullPath:"/v1/test_helpers/refunds/{refund}/expire"})}),t3=ef.method,t5=ef.extend({create:t3({method:"POST",fullPath:"/v1/tax/registrations"}),retrieve:t3({method:"GET",fullPath:"/v1/tax/registrations/{id}"}),update:t3({method:"POST",fullPath:"/v1/tax/registrations/{id}"}),list:t3({method:"GET",fullPath:"/v1/tax/registrations",methodType:"list"})}),t9=ef.method,t7=ef.extend({create:t9({method:"POST",fullPath:"/v1/reporting/report_runs"}),retrieve:t9({method:"GET",fullPath:"/v1/reporting/report_runs/{report_run}"}),list:t9({method:"GET",fullPath:"/v1/reporting/report_runs",methodType:"list"})}),re=ef.method,rt=ef.extend({retrieve:re({method:"GET",fullPath:"/v1/reporting/report_types/{report_type}"}),list:re({method:"GET",fullPath:"/v1/reporting/report_types",methodType:"list"})}),rr=ef.method,rn=ef.extend({create:rr({method:"POST",fullPath:"/v1/forwarding/requests"}),retrieve:rr({method:"GET",fullPath:"/v1/forwarding/requests/{id}"}),list:rr({method:"GET",fullPath:"/v1/forwarding/requests",methodType:"list"})}),ri=ef.method,ro=ef.extend({retrieve:ri({method:"GET",fullPath:"/v1/sigma/scheduled_query_runs/{scheduled_query_run}"}),list:ri({method:"GET",fullPath:"/v1/sigma/scheduled_query_runs",methodType:"list"})}),rs=ef.method,ra=ef.extend({create:rs({method:"POST",fullPath:"/v1/apps/secrets"}),list:rs({method:"GET",fullPath:"/v1/apps/secrets",methodType:"list"}),deleteWhere:rs({method:"POST",fullPath:"/v1/apps/secrets/delete"}),find:rs({method:"GET",fullPath:"/v1/apps/secrets/find"})}),rl=ef.method,rc=ef.extend({create:rl({method:"POST",fullPath:"/v1/billing_portal/sessions"})}),ru=ef.method,rd=ef.extend({create:ru({method:"POST",fullPath:"/v1/checkout/sessions"}),retrieve:ru({method:"GET",fullPath:"/v1/checkout/sessions/{session}"}),update:ru({method:"POST",fullPath:"/v1/checkout/sessions/{session}"}),list:ru({method:"GET",fullPath:"/v1/checkout/sessions",methodType:"list"}),expire:ru({method:"POST",fullPath:"/v1/checkout/sessions/{session}/expire"}),listLineItems:ru({method:"GET",fullPath:"/v1/checkout/sessions/{session}/line_items",methodType:"list"})}),rh=ef.method,rf=ef.extend({create:rh({method:"POST",fullPath:"/v1/financial_connections/sessions"}),retrieve:rh({method:"GET",fullPath:"/v1/financial_connections/sessions/{session}"})}),rp=ef.method,rm=ef.extend({retrieve:rp({method:"GET",fullPath:"/v1/tax/settings"}),update:rp({method:"POST",fullPath:"/v1/tax/settings"})}),ry=ef.method,rg=ef.extend({retrieve:ry({method:"GET",fullPath:"/v1/climate/suppliers/{supplier}"}),list:ry({method:"GET",fullPath:"/v1/climate/suppliers",methodType:"list"})}),rv=ef.method,rb=ef.extend({create:rv({method:"POST",fullPath:"/v1/test_helpers/test_clocks"}),retrieve:rv({method:"GET",fullPath:"/v1/test_helpers/test_clocks/{test_clock}"}),list:rv({method:"GET",fullPath:"/v1/test_helpers/test_clocks",methodType:"list"}),del:rv({method:"DELETE",fullPath:"/v1/test_helpers/test_clocks/{test_clock}"}),advance:rv({method:"POST",fullPath:"/v1/test_helpers/test_clocks/{test_clock}/advance"})}),rw=ef.method,r_=ef.extend({retrieve:rw({method:"GET",fullPath:"/v1/issuing/tokens/{token}"}),update:rw({method:"POST",fullPath:"/v1/issuing/tokens/{token}"}),list:rw({method:"GET",fullPath:"/v1/issuing/tokens",methodType:"list"})}),rE=ef.method,rP=ef.extend({retrieve:rE({method:"GET",fullPath:"/v1/treasury/transaction_entries/{id}"}),list:rE({method:"GET",fullPath:"/v1/treasury/transaction_entries",methodType:"list"})}),rT=ef.method,rx=ef.extend({retrieve:rT({method:"GET",fullPath:"/v1/financial_connections/transactions/{transaction}"}),list:rT({method:"GET",fullPath:"/v1/financial_connections/transactions",methodType:"list"})}),rS=ef.method,rO=ef.extend({retrieve:rS({method:"GET",fullPath:"/v1/issuing/transactions/{transaction}"}),update:rS({method:"POST",fullPath:"/v1/issuing/transactions/{transaction}"}),list:rS({method:"GET",fullPath:"/v1/issuing/transactions",methodType:"list"})}),rA=ef.method,rI=ef.extend({retrieve:rA({method:"GET",fullPath:"/v1/tax/transactions/{transaction}"}),createFromCalculation:rA({method:"POST",fullPath:"/v1/tax/transactions/create_from_calculation"}),createReversal:rA({method:"POST",fullPath:"/v1/tax/transactions/create_reversal"}),listLineItems:rA({method:"GET",fullPath:"/v1/tax/transactions/{transaction}/line_items",methodType:"list"})}),rR=ef.method,rN=ef.extend({createForceCapture:rR({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/create_force_capture"}),createUnlinkedRefund:rR({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/create_unlinked_refund"}),refund:rR({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/{transaction}/refund"})}),rC=ef.method,rk=ef.extend({retrieve:rC({method:"GET",fullPath:"/v1/treasury/transactions/{id}"}),list:rC({method:"GET",fullPath:"/v1/treasury/transactions",methodType:"list"})}),rz=ef.method,rj=ef.extend({create:rz({method:"POST",fullPath:"/v1/radar/value_list_items"}),retrieve:rz({method:"GET",fullPath:"/v1/radar/value_list_items/{item}"}),list:rz({method:"GET",fullPath:"/v1/radar/value_list_items",methodType:"list"}),del:rz({method:"DELETE",fullPath:"/v1/radar/value_list_items/{item}"})}),rU=ef.method,rB=ef.extend({create:rU({method:"POST",fullPath:"/v1/radar/value_lists"}),retrieve:rU({method:"GET",fullPath:"/v1/radar/value_lists/{value_list}"}),update:rU({method:"POST",fullPath:"/v1/radar/value_lists/{value_list}"}),list:rU({method:"GET",fullPath:"/v1/radar/value_lists",methodType:"list"}),del:rU({method:"DELETE",fullPath:"/v1/radar/value_lists/{value_list}"})}),rD=ef.method,rG=ef.extend({retrieve:rD({method:"GET",fullPath:"/v1/identity/verification_reports/{report}"}),list:rD({method:"GET",fullPath:"/v1/identity/verification_reports",methodType:"list"})}),rF=ef.method,rL=ef.extend({create:rF({method:"POST",fullPath:"/v1/identity/verification_sessions"}),retrieve:rF({method:"GET",fullPath:"/v1/identity/verification_sessions/{session}"}),update:rF({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}"}),list:rF({method:"GET",fullPath:"/v1/identity/verification_sessions",methodType:"list"}),cancel:rF({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}/cancel"}),redact:rF({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}/redact"})}),rM=ef.method,rq=ef.extend({create:rM({method:"POST",fullPath:"/v1/accounts"}),retrieve(e,...t){return"string"==typeof e?rM({method:"GET",fullPath:"/v1/accounts/{id}"}).apply(this,[e,...t]):(null==e&&[].shift.apply([e,...t]),rM({method:"GET",fullPath:"/v1/account"}).apply(this,[e,...t]))},update:rM({method:"POST",fullPath:"/v1/accounts/{account}"}),list:rM({method:"GET",fullPath:"/v1/accounts",methodType:"list"}),del:rM({method:"DELETE",fullPath:"/v1/accounts/{account}"}),createExternalAccount:rM({method:"POST",fullPath:"/v1/accounts/{account}/external_accounts"}),createLoginLink:rM({method:"POST",fullPath:"/v1/accounts/{account}/login_links"}),createPerson:rM({method:"POST",fullPath:"/v1/accounts/{account}/persons"}),deleteExternalAccount:rM({method:"DELETE",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),deletePerson:rM({method:"DELETE",fullPath:"/v1/accounts/{account}/persons/{person}"}),listCapabilities:rM({method:"GET",fullPath:"/v1/accounts/{account}/capabilities",methodType:"list"}),listExternalAccounts:rM({method:"GET",fullPath:"/v1/accounts/{account}/external_accounts",methodType:"list"}),listPersons:rM({method:"GET",fullPath:"/v1/accounts/{account}/persons",methodType:"list"}),reject:rM({method:"POST",fullPath:"/v1/accounts/{account}/reject"}),retrieveCurrent:rM({method:"GET",fullPath:"/v1/account"}),retrieveCapability:rM({method:"GET",fullPath:"/v1/accounts/{account}/capabilities/{capability}"}),retrieveExternalAccount:rM({method:"GET",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),retrievePerson:rM({method:"GET",fullPath:"/v1/accounts/{account}/persons/{person}"}),updateCapability:rM({method:"POST",fullPath:"/v1/accounts/{account}/capabilities/{capability}"}),updateExternalAccount:rM({method:"POST",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),updatePerson:rM({method:"POST",fullPath:"/v1/accounts/{account}/persons/{person}"})}),rH=ef.method,r$=ef.extend({create:rH({method:"POST",fullPath:"/v1/account_links"})}),rK=ef.method,rV=ef.extend({create:rK({method:"POST",fullPath:"/v1/account_sessions"})}),rW=ef.method,rZ=ef.extend({create:rW({method:"POST",fullPath:"/v1/apple_pay/domains"}),retrieve:rW({method:"GET",fullPath:"/v1/apple_pay/domains/{domain}"}),list:rW({method:"GET",fullPath:"/v1/apple_pay/domains",methodType:"list"}),del:rW({method:"DELETE",fullPath:"/v1/apple_pay/domains/{domain}"})}),rY=ef.method,rX=ef.extend({retrieve:rY({method:"GET",fullPath:"/v1/application_fees/{id}"}),list:rY({method:"GET",fullPath:"/v1/application_fees",methodType:"list"}),createRefund:rY({method:"POST",fullPath:"/v1/application_fees/{id}/refunds"}),listRefunds:rY({method:"GET",fullPath:"/v1/application_fees/{id}/refunds",methodType:"list"}),retrieveRefund:rY({method:"GET",fullPath:"/v1/application_fees/{fee}/refunds/{id}"}),updateRefund:rY({method:"POST",fullPath:"/v1/application_fees/{fee}/refunds/{id}"})}),rJ=ef.method,rQ=ef.extend({retrieve:rJ({method:"GET",fullPath:"/v1/balance"})}),r0=ef.method,r1=ef.extend({retrieve:r0({method:"GET",fullPath:"/v1/balance_settings"}),update:r0({method:"POST",fullPath:"/v1/balance_settings"})}),r2=ef.method,r8=ef.extend({retrieve:r2({method:"GET",fullPath:"/v1/balance_transactions/{id}"}),list:r2({method:"GET",fullPath:"/v1/balance_transactions",methodType:"list"})}),r6=ef.method,r4=ef.extend({create:r6({method:"POST",fullPath:"/v1/charges"}),retrieve:r6({method:"GET",fullPath:"/v1/charges/{charge}"}),update:r6({method:"POST",fullPath:"/v1/charges/{charge}"}),list:r6({method:"GET",fullPath:"/v1/charges",methodType:"list"}),capture:r6({method:"POST",fullPath:"/v1/charges/{charge}/capture"}),search:r6({method:"GET",fullPath:"/v1/charges/search",methodType:"search"})}),r3=ef.method,r5=ef.extend({retrieve:r3({method:"GET",fullPath:"/v1/confirmation_tokens/{confirmation_token}"})}),r9=ef.method,r7=ef.extend({retrieve:r9({method:"GET",fullPath:"/v1/country_specs/{country}"}),list:r9({method:"GET",fullPath:"/v1/country_specs",methodType:"list"})}),ne=ef.method,nt=ef.extend({create:ne({method:"POST",fullPath:"/v1/coupons"}),retrieve:ne({method:"GET",fullPath:"/v1/coupons/{coupon}"}),update:ne({method:"POST",fullPath:"/v1/coupons/{coupon}"}),list:ne({method:"GET",fullPath:"/v1/coupons",methodType:"list"}),del:ne({method:"DELETE",fullPath:"/v1/coupons/{coupon}"})}),nr=ef.method,nn=ef.extend({create:nr({method:"POST",fullPath:"/v1/credit_notes"}),retrieve:nr({method:"GET",fullPath:"/v1/credit_notes/{id}"}),update:nr({method:"POST",fullPath:"/v1/credit_notes/{id}"}),list:nr({method:"GET",fullPath:"/v1/credit_notes",methodType:"list"}),listLineItems:nr({method:"GET",fullPath:"/v1/credit_notes/{credit_note}/lines",methodType:"list"}),listPreviewLineItems:nr({method:"GET",fullPath:"/v1/credit_notes/preview/lines",methodType:"list"}),preview:nr({method:"GET",fullPath:"/v1/credit_notes/preview"}),voidCreditNote:nr({method:"POST",fullPath:"/v1/credit_notes/{id}/void"})}),ni=ef.method,no=ef.extend({create:ni({method:"POST",fullPath:"/v1/customer_sessions"})}),ns=ef.method,na=ef.extend({create:ns({method:"POST",fullPath:"/v1/customers"}),retrieve:ns({method:"GET",fullPath:"/v1/customers/{customer}"}),update:ns({method:"POST",fullPath:"/v1/customers/{customer}"}),list:ns({method:"GET",fullPath:"/v1/customers",methodType:"list"}),del:ns({method:"DELETE",fullPath:"/v1/customers/{customer}"}),createBalanceTransaction:ns({method:"POST",fullPath:"/v1/customers/{customer}/balance_transactions"}),createFundingInstructions:ns({method:"POST",fullPath:"/v1/customers/{customer}/funding_instructions"}),createSource:ns({method:"POST",fullPath:"/v1/customers/{customer}/sources"}),createTaxId:ns({method:"POST",fullPath:"/v1/customers/{customer}/tax_ids"}),deleteDiscount:ns({method:"DELETE",fullPath:"/v1/customers/{customer}/discount"}),deleteSource:ns({method:"DELETE",fullPath:"/v1/customers/{customer}/sources/{id}"}),deleteTaxId:ns({method:"DELETE",fullPath:"/v1/customers/{customer}/tax_ids/{id}"}),listBalanceTransactions:ns({method:"GET",fullPath:"/v1/customers/{customer}/balance_transactions",methodType:"list"}),listCashBalanceTransactions:ns({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance_transactions",methodType:"list"}),listPaymentMethods:ns({method:"GET",fullPath:"/v1/customers/{customer}/payment_methods",methodType:"list"}),listSources:ns({method:"GET",fullPath:"/v1/customers/{customer}/sources",methodType:"list"}),listTaxIds:ns({method:"GET",fullPath:"/v1/customers/{customer}/tax_ids",methodType:"list"}),retrieveBalanceTransaction:ns({method:"GET",fullPath:"/v1/customers/{customer}/balance_transactions/{transaction}"}),retrieveCashBalance:ns({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance"}),retrieveCashBalanceTransaction:ns({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance_transactions/{transaction}"}),retrievePaymentMethod:ns({method:"GET",fullPath:"/v1/customers/{customer}/payment_methods/{payment_method}"}),retrieveSource:ns({method:"GET",fullPath:"/v1/customers/{customer}/sources/{id}"}),retrieveTaxId:ns({method:"GET",fullPath:"/v1/customers/{customer}/tax_ids/{id}"}),search:ns({method:"GET",fullPath:"/v1/customers/search",methodType:"search"}),updateBalanceTransaction:ns({method:"POST",fullPath:"/v1/customers/{customer}/balance_transactions/{transaction}"}),updateCashBalance:ns({method:"POST",fullPath:"/v1/customers/{customer}/cash_balance"}),updateSource:ns({method:"POST",fullPath:"/v1/customers/{customer}/sources/{id}"}),verifySource:ns({method:"POST",fullPath:"/v1/customers/{customer}/sources/{id}/verify"})}),nl=ef.method,nc=ef.extend({retrieve:nl({method:"GET",fullPath:"/v1/disputes/{dispute}"}),update:nl({method:"POST",fullPath:"/v1/disputes/{dispute}"}),list:nl({method:"GET",fullPath:"/v1/disputes",methodType:"list"}),close:nl({method:"POST",fullPath:"/v1/disputes/{dispute}/close"})}),nu=ef.method,nd=ef.extend({create:nu({method:"POST",fullPath:"/v1/ephemeral_keys",validator:(e,t)=>{if(!t.headers||!t.headers["Stripe-Version"])throw Error("Passing apiVersion in a separate options hash is required to create an ephemeral key. See https://stripe.com/docs/api/versioning?lang=node")}}),del:nu({method:"DELETE",fullPath:"/v1/ephemeral_keys/{key}"})}),nh=ef.method,nf=ef.extend({retrieve:nh({method:"GET",fullPath:"/v1/events/{id}"}),list:nh({method:"GET",fullPath:"/v1/events",methodType:"list"})}),np=ef.method,nm=ef.extend({retrieve:np({method:"GET",fullPath:"/v1/exchange_rates/{rate_id}"}),list:np({method:"GET",fullPath:"/v1/exchange_rates",methodType:"list"})}),ny=ef.method,ng=ef.extend({create:ny({method:"POST",fullPath:"/v1/file_links"}),retrieve:ny({method:"GET",fullPath:"/v1/file_links/{link}"}),update:ny({method:"POST",fullPath:"/v1/file_links/{link}"}),list:ny({method:"GET",fullPath:"/v1/file_links",methodType:"list"})}),nv=ef.method,nb=ef.extend({create:nv({method:"POST",fullPath:"/v1/files",headers:{"Content-Type":"multipart/form-data"},host:"files.stripe.com"}),retrieve:nv({method:"GET",fullPath:"/v1/files/{file}"}),list:nv({method:"GET",fullPath:"/v1/files",methodType:"list"}),requestDataProcessor:function(e,t,r,n){if(t=t||{},"POST"!==e)return n(null,S(t));this._stripe._platformFunctions.tryBufferData(t).then(e=>n(null,((e,t,r)=>{let n,i,o=(Math.round(1e16*Math.random())+Math.round(1e16*Math.random())).toString();r["Content-Type"]=`multipart/form-data; boundary=${o}`;let s=new TextEncoder,a=new Uint8Array(0),l=s.encode("\r\n");function c(e){let t=a,r=e instanceof Uint8Array?e:new Uint8Array(s.encode(e));(a=new Uint8Array(t.length+r.length+2)).set(t),a.set(r,t.length),a.set(l,a.length-2)}function u(e){return`"${e.replace(/"|"/g,"%22").replace(/\r\n|\r|\n/g," ")}"`}let d=(n={},(i=(e,t)=>{Object.entries(e).forEach(([e,r])=>{let o,s=t?`${t}[${e}]`:e;if(("function"==(o=typeof r)||"object"===o)&&r){if(!(r instanceof Uint8Array)&&!Object.prototype.hasOwnProperty.call(r,"data"))return i(r,s);n[s]=r}else n[s]=String(r)})})(t,null),n);for(let e in d){if(!Object.prototype.hasOwnProperty.call(d,e))continue;let t=d[e];c(`--${o}`),Object.prototype.hasOwnProperty.call(t,"data")?(c(`Content-Disposition: form-data; name=${u(e)}; filename=${u(t.name||"blob")}`),c(`Content-Type: ${t.type||"application/octet-stream"}`),c(""),c(t.data)):(c(`Content-Disposition: form-data; name=${u(e)}`),c(""),c(t))}return c(`--${o}--`),a})(0,e,r))).catch(e=>n(e,null))}}),nw=ef.method,n_=ef.extend({create:nw({method:"POST",fullPath:"/v1/invoiceitems"}),retrieve:nw({method:"GET",fullPath:"/v1/invoiceitems/{invoiceitem}"}),update:nw({method:"POST",fullPath:"/v1/invoiceitems/{invoiceitem}"}),list:nw({method:"GET",fullPath:"/v1/invoiceitems",methodType:"list"}),del:nw({method:"DELETE",fullPath:"/v1/invoiceitems/{invoiceitem}"})}),nE=ef.method,nP=ef.extend({retrieve:nE({method:"GET",fullPath:"/v1/invoice_payments/{invoice_payment}"}),list:nE({method:"GET",fullPath:"/v1/invoice_payments",methodType:"list"})}),nT=ef.method,nx=ef.extend({retrieve:nT({method:"GET",fullPath:"/v1/invoice_rendering_templates/{template}"}),list:nT({method:"GET",fullPath:"/v1/invoice_rendering_templates",methodType:"list"}),archive:nT({method:"POST",fullPath:"/v1/invoice_rendering_templates/{template}/archive"}),unarchive:nT({method:"POST",fullPath:"/v1/invoice_rendering_templates/{template}/unarchive"})}),nS=ef.method,nO=ef.extend({create:nS({method:"POST",fullPath:"/v1/invoices"}),retrieve:nS({method:"GET",fullPath:"/v1/invoices/{invoice}"}),update:nS({method:"POST",fullPath:"/v1/invoices/{invoice}"}),list:nS({method:"GET",fullPath:"/v1/invoices",methodType:"list"}),del:nS({method:"DELETE",fullPath:"/v1/invoices/{invoice}"}),addLines:nS({method:"POST",fullPath:"/v1/invoices/{invoice}/add_lines"}),attachPayment:nS({method:"POST",fullPath:"/v1/invoices/{invoice}/attach_payment"}),createPreview:nS({method:"POST",fullPath:"/v1/invoices/create_preview"}),finalizeInvoice:nS({method:"POST",fullPath:"/v1/invoices/{invoice}/finalize"}),listLineItems:nS({method:"GET",fullPath:"/v1/invoices/{invoice}/lines",methodType:"list"}),markUncollectible:nS({method:"POST",fullPath:"/v1/invoices/{invoice}/mark_uncollectible"}),pay:nS({method:"POST",fullPath:"/v1/invoices/{invoice}/pay"}),removeLines:nS({method:"POST",fullPath:"/v1/invoices/{invoice}/remove_lines"}),search:nS({method:"GET",fullPath:"/v1/invoices/search",methodType:"search"}),sendInvoice:nS({method:"POST",fullPath:"/v1/invoices/{invoice}/send"}),updateLines:nS({method:"POST",fullPath:"/v1/invoices/{invoice}/update_lines"}),updateLineItem:nS({method:"POST",fullPath:"/v1/invoices/{invoice}/lines/{line_item_id}"}),voidInvoice:nS({method:"POST",fullPath:"/v1/invoices/{invoice}/void"})}),nA=ef.method,nI=ef.extend({retrieve:nA({method:"GET",fullPath:"/v1/mandates/{mandate}"})}),nR=ef.method,nN="connect.stripe.com",nC=ef.extend({basePath:"/",authorizeUrl(e,t){e=e||{};let r="oauth/authorize";return(t=t||{}).express&&(r=`express/${r}`),e.response_type||(e.response_type="code"),e.client_id||(e.client_id=this._stripe.getClientId()),e.scope||(e.scope="read_write"),`https://${nN}/${r}?${S(e)}`},token:nR({method:"POST",path:"oauth/token",host:nN}),deauthorize(e,...t){return e.client_id||(e.client_id=this._stripe.getClientId()),nR({method:"POST",path:"oauth/deauthorize",host:nN}).apply(this,[e,...t])}}),nk=ef.method,nz=ef.extend({retrieve:nk({method:"GET",fullPath:"/v1/payment_attempt_records/{id}"}),list:nk({method:"GET",fullPath:"/v1/payment_attempt_records",methodType:"list"})}),nj=ef.method,nU=ef.extend({create:nj({method:"POST",fullPath:"/v1/payment_intents"}),retrieve:nj({method:"GET",fullPath:"/v1/payment_intents/{intent}"}),update:nj({method:"POST",fullPath:"/v1/payment_intents/{intent}"}),list:nj({method:"GET",fullPath:"/v1/payment_intents",methodType:"list"}),applyCustomerBalance:nj({method:"POST",fullPath:"/v1/payment_intents/{intent}/apply_customer_balance"}),cancel:nj({method:"POST",fullPath:"/v1/payment_intents/{intent}/cancel"}),capture:nj({method:"POST",fullPath:"/v1/payment_intents/{intent}/capture"}),confirm:nj({method:"POST",fullPath:"/v1/payment_intents/{intent}/confirm"}),incrementAuthorization:nj({method:"POST",fullPath:"/v1/payment_intents/{intent}/increment_authorization"}),listAmountDetailsLineItems:nj({method:"GET",fullPath:"/v1/payment_intents/{intent}/amount_details_line_items",methodType:"list"}),search:nj({method:"GET",fullPath:"/v1/payment_intents/search",methodType:"search"}),verifyMicrodeposits:nj({method:"POST",fullPath:"/v1/payment_intents/{intent}/verify_microdeposits"})}),nB=ef.method,nD=ef.extend({create:nB({method:"POST",fullPath:"/v1/payment_links"}),retrieve:nB({method:"GET",fullPath:"/v1/payment_links/{payment_link}"}),update:nB({method:"POST",fullPath:"/v1/payment_links/{payment_link}"}),list:nB({method:"GET",fullPath:"/v1/payment_links",methodType:"list"}),listLineItems:nB({method:"GET",fullPath:"/v1/payment_links/{payment_link}/line_items",methodType:"list"})}),nG=ef.method,nF=ef.extend({create:nG({method:"POST",fullPath:"/v1/payment_method_configurations"}),retrieve:nG({method:"GET",fullPath:"/v1/payment_method_configurations/{configuration}"}),update:nG({method:"POST",fullPath:"/v1/payment_method_configurations/{configuration}"}),list:nG({method:"GET",fullPath:"/v1/payment_method_configurations",methodType:"list"})}),nL=ef.method,nM=ef.extend({create:nL({method:"POST",fullPath:"/v1/payment_method_domains"}),retrieve:nL({method:"GET",fullPath:"/v1/payment_method_domains/{payment_method_domain}"}),update:nL({method:"POST",fullPath:"/v1/payment_method_domains/{payment_method_domain}"}),list:nL({method:"GET",fullPath:"/v1/payment_method_domains",methodType:"list"}),validate:nL({method:"POST",fullPath:"/v1/payment_method_domains/{payment_method_domain}/validate"})}),nq=ef.method,nH=ef.extend({create:nq({method:"POST",fullPath:"/v1/payment_methods"}),retrieve:nq({method:"GET",fullPath:"/v1/payment_methods/{payment_method}"}),update:nq({method:"POST",fullPath:"/v1/payment_methods/{payment_method}"}),list:nq({method:"GET",fullPath:"/v1/payment_methods",methodType:"list"}),attach:nq({method:"POST",fullPath:"/v1/payment_methods/{payment_method}/attach"}),detach:nq({method:"POST",fullPath:"/v1/payment_methods/{payment_method}/detach"})}),n$=ef.method,nK=ef.extend({retrieve:n$({method:"GET",fullPath:"/v1/payment_records/{id}"}),reportPayment:n$({method:"POST",fullPath:"/v1/payment_records/report_payment"}),reportPaymentAttempt:n$({method:"POST",fullPath:"/v1/payment_records/{id}/report_payment_attempt"}),reportPaymentAttemptCanceled:n$({method:"POST",fullPath:"/v1/payment_records/{id}/report_payment_attempt_canceled"}),reportPaymentAttemptFailed:n$({method:"POST",fullPath:"/v1/payment_records/{id}/report_payment_attempt_failed"}),reportPaymentAttemptGuaranteed:n$({method:"POST",fullPath:"/v1/payment_records/{id}/report_payment_attempt_guaranteed"}),reportPaymentAttemptInformational:n$({method:"POST",fullPath:"/v1/payment_records/{id}/report_payment_attempt_informational"}),reportRefund:n$({method:"POST",fullPath:"/v1/payment_records/{id}/report_refund"})}),nV=ef.method,nW=ef.extend({create:nV({method:"POST",fullPath:"/v1/payouts"}),retrieve:nV({method:"GET",fullPath:"/v1/payouts/{payout}"}),update:nV({method:"POST",fullPath:"/v1/payouts/{payout}"}),list:nV({method:"GET",fullPath:"/v1/payouts",methodType:"list"}),cancel:nV({method:"POST",fullPath:"/v1/payouts/{payout}/cancel"}),reverse:nV({method:"POST",fullPath:"/v1/payouts/{payout}/reverse"})}),nZ=ef.method,nY=ef.extend({create:nZ({method:"POST",fullPath:"/v1/plans"}),retrieve:nZ({method:"GET",fullPath:"/v1/plans/{plan}"}),update:nZ({method:"POST",fullPath:"/v1/plans/{plan}"}),list:nZ({method:"GET",fullPath:"/v1/plans",methodType:"list"}),del:nZ({method:"DELETE",fullPath:"/v1/plans/{plan}"})}),nX=ef.method,nJ=ef.extend({create:nX({method:"POST",fullPath:"/v1/prices"}),retrieve:nX({method:"GET",fullPath:"/v1/prices/{price}"}),update:nX({method:"POST",fullPath:"/v1/prices/{price}"}),list:nX({method:"GET",fullPath:"/v1/prices",methodType:"list"}),search:nX({method:"GET",fullPath:"/v1/prices/search",methodType:"search"})}),nQ=ef.method,n0=ef.extend({create:nQ({method:"POST",fullPath:"/v1/products"}),retrieve:nQ({method:"GET",fullPath:"/v1/products/{id}"}),update:nQ({method:"POST",fullPath:"/v1/products/{id}"}),list:nQ({method:"GET",fullPath:"/v1/products",methodType:"list"}),del:nQ({method:"DELETE",fullPath:"/v1/products/{id}"}),createFeature:nQ({method:"POST",fullPath:"/v1/products/{product}/features"}),deleteFeature:nQ({method:"DELETE",fullPath:"/v1/products/{product}/features/{id}"}),listFeatures:nQ({method:"GET",fullPath:"/v1/products/{product}/features",methodType:"list"}),retrieveFeature:nQ({method:"GET",fullPath:"/v1/products/{product}/features/{id}"}),search:nQ({method:"GET",fullPath:"/v1/products/search",methodType:"search"})}),n1=ef.method,n2=ef.extend({create:n1({method:"POST",fullPath:"/v1/promotion_codes"}),retrieve:n1({method:"GET",fullPath:"/v1/promotion_codes/{promotion_code}"}),update:n1({method:"POST",fullPath:"/v1/promotion_codes/{promotion_code}"}),list:n1({method:"GET",fullPath:"/v1/promotion_codes",methodType:"list"})}),n8=ef.method,n6=ef.extend({create:n8({method:"POST",fullPath:"/v1/quotes"}),retrieve:n8({method:"GET",fullPath:"/v1/quotes/{quote}"}),update:n8({method:"POST",fullPath:"/v1/quotes/{quote}"}),list:n8({method:"GET",fullPath:"/v1/quotes",methodType:"list"}),accept:n8({method:"POST",fullPath:"/v1/quotes/{quote}/accept"}),cancel:n8({method:"POST",fullPath:"/v1/quotes/{quote}/cancel"}),finalizeQuote:n8({method:"POST",fullPath:"/v1/quotes/{quote}/finalize"}),listComputedUpfrontLineItems:n8({method:"GET",fullPath:"/v1/quotes/{quote}/computed_upfront_line_items",methodType:"list"}),listLineItems:n8({method:"GET",fullPath:"/v1/quotes/{quote}/line_items",methodType:"list"}),pdf:n8({method:"GET",fullPath:"/v1/quotes/{quote}/pdf",host:"files.stripe.com",streaming:!0})}),n4=ef.method,n3=ef.extend({create:n4({method:"POST",fullPath:"/v1/refunds"}),retrieve:n4({method:"GET",fullPath:"/v1/refunds/{refund}"}),update:n4({method:"POST",fullPath:"/v1/refunds/{refund}"}),list:n4({method:"GET",fullPath:"/v1/refunds",methodType:"list"}),cancel:n4({method:"POST",fullPath:"/v1/refunds/{refund}/cancel"})}),n5=ef.method,n9=ef.extend({retrieve:n5({method:"GET",fullPath:"/v1/reviews/{review}"}),list:n5({method:"GET",fullPath:"/v1/reviews",methodType:"list"}),approve:n5({method:"POST",fullPath:"/v1/reviews/{review}/approve"})}),n7=ef.method,ie=ef.extend({list:n7({method:"GET",fullPath:"/v1/setup_attempts",methodType:"list"})}),it=ef.method,ir=ef.extend({create:it({method:"POST",fullPath:"/v1/setup_intents"}),retrieve:it({method:"GET",fullPath:"/v1/setup_intents/{intent}"}),update:it({method:"POST",fullPath:"/v1/setup_intents/{intent}"}),list:it({method:"GET",fullPath:"/v1/setup_intents",methodType:"list"}),cancel:it({method:"POST",fullPath:"/v1/setup_intents/{intent}/cancel"}),confirm:it({method:"POST",fullPath:"/v1/setup_intents/{intent}/confirm"}),verifyMicrodeposits:it({method:"POST",fullPath:"/v1/setup_intents/{intent}/verify_microdeposits"})}),ii=ef.method,io=ef.extend({create:ii({method:"POST",fullPath:"/v1/shipping_rates"}),retrieve:ii({method:"GET",fullPath:"/v1/shipping_rates/{shipping_rate_token}"}),update:ii({method:"POST",fullPath:"/v1/shipping_rates/{shipping_rate_token}"}),list:ii({method:"GET",fullPath:"/v1/shipping_rates",methodType:"list"})}),is=ef.method,ia=ef.extend({create:is({method:"POST",fullPath:"/v1/sources"}),retrieve:is({method:"GET",fullPath:"/v1/sources/{source}"}),update:is({method:"POST",fullPath:"/v1/sources/{source}"}),listSourceTransactions:is({method:"GET",fullPath:"/v1/sources/{source}/source_transactions",methodType:"list"}),verify:is({method:"POST",fullPath:"/v1/sources/{source}/verify"})}),il=ef.method,ic=ef.extend({create:il({method:"POST",fullPath:"/v1/subscription_items"}),retrieve:il({method:"GET",fullPath:"/v1/subscription_items/{item}"}),update:il({method:"POST",fullPath:"/v1/subscription_items/{item}"}),list:il({method:"GET",fullPath:"/v1/subscription_items",methodType:"list"}),del:il({method:"DELETE",fullPath:"/v1/subscription_items/{item}"})}),iu=ef.method,id=ef.extend({create:iu({method:"POST",fullPath:"/v1/subscription_schedules"}),retrieve:iu({method:"GET",fullPath:"/v1/subscription_schedules/{schedule}"}),update:iu({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}"}),list:iu({method:"GET",fullPath:"/v1/subscription_schedules",methodType:"list"}),cancel:iu({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}/cancel"}),release:iu({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}/release"})}),ih=ef.method,ip=ef.extend({create:ih({method:"POST",fullPath:"/v1/subscriptions"}),retrieve:ih({method:"GET",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),update:ih({method:"POST",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),list:ih({method:"GET",fullPath:"/v1/subscriptions",methodType:"list"}),cancel:ih({method:"DELETE",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),deleteDiscount:ih({method:"DELETE",fullPath:"/v1/subscriptions/{subscription_exposed_id}/discount"}),migrate:ih({method:"POST",fullPath:"/v1/subscriptions/{subscription}/migrate"}),resume:ih({method:"POST",fullPath:"/v1/subscriptions/{subscription}/resume"}),search:ih({method:"GET",fullPath:"/v1/subscriptions/search",methodType:"search"})}),im=ef.method,iy=ef.extend({retrieve:im({method:"GET",fullPath:"/v1/tax_codes/{id}"}),list:im({method:"GET",fullPath:"/v1/tax_codes",methodType:"list"})}),ig=ef.method,iv=ef.extend({create:ig({method:"POST",fullPath:"/v1/tax_ids"}),retrieve:ig({method:"GET",fullPath:"/v1/tax_ids/{id}"}),list:ig({method:"GET",fullPath:"/v1/tax_ids",methodType:"list"}),del:ig({method:"DELETE",fullPath:"/v1/tax_ids/{id}"})}),ib=ef.method,iw=ef.extend({create:ib({method:"POST",fullPath:"/v1/tax_rates"}),retrieve:ib({method:"GET",fullPath:"/v1/tax_rates/{tax_rate}"}),update:ib({method:"POST",fullPath:"/v1/tax_rates/{tax_rate}"}),list:ib({method:"GET",fullPath:"/v1/tax_rates",methodType:"list"})}),i_=ef.method,iE=ef.extend({create:i_({method:"POST",fullPath:"/v1/tokens"}),retrieve:i_({method:"GET",fullPath:"/v1/tokens/{token}"})}),iP=ef.method,iT=ef.extend({create:iP({method:"POST",fullPath:"/v1/topups"}),retrieve:iP({method:"GET",fullPath:"/v1/topups/{topup}"}),update:iP({method:"POST",fullPath:"/v1/topups/{topup}"}),list:iP({method:"GET",fullPath:"/v1/topups",methodType:"list"}),cancel:iP({method:"POST",fullPath:"/v1/topups/{topup}/cancel"})}),ix=ef.method,iS=ef.extend({create:ix({method:"POST",fullPath:"/v1/transfers"}),retrieve:ix({method:"GET",fullPath:"/v1/transfers/{transfer}"}),update:ix({method:"POST",fullPath:"/v1/transfers/{transfer}"}),list:ix({method:"GET",fullPath:"/v1/transfers",methodType:"list"}),createReversal:ix({method:"POST",fullPath:"/v1/transfers/{id}/reversals"}),listReversals:ix({method:"GET",fullPath:"/v1/transfers/{id}/reversals",methodType:"list"}),retrieveReversal:ix({method:"GET",fullPath:"/v1/transfers/{transfer}/reversals/{id}"}),updateReversal:ix({method:"POST",fullPath:"/v1/transfers/{transfer}/reversals/{id}"})}),iO=ef.method,iA=ef.extend({create:iO({method:"POST",fullPath:"/v1/webhook_endpoints"}),retrieve:iO({method:"GET",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"}),update:iO({method:"POST",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"}),list:iO({method:"GET",fullPath:"/v1/webhook_endpoints",methodType:"list"}),del:iO({method:"DELETE",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"})}),iI=eg("apps",{Secrets:ra}),iR=eg("billing",{Alerts:eP,CreditBalanceSummary:eV,CreditBalanceTransactions:eZ,CreditGrants:eX,MeterEventAdjustments:tf,MeterEvents:t_,Meters:tx}),iN=eg("billingPortal",{Configurations:eG,Sessions:rc}),iC=eg("checkout",{Sessions:rd}),ik=eg("climate",{Orders:tI,Products:t$,Suppliers:rg}),iz=eg("entitlements",{ActiveEntitlements:e_,Features:tn}),ij=eg("financialConnections",{Accounts:eb,Sessions:rf,Transactions:rx}),iU=eg("forwarding",{Requests:rn}),iB=eg("identity",{VerificationReports:rG,VerificationSessions:rL}),iD=eg("issuing",{Authorizations:eO,Cardholders:ek,Cards:ej,Disputes:e4,PersonalizationDesigns:tG,PhysicalBundles:tq,Tokens:r_,Transactions:rO}),iG=eg("radar",{EarlyFraudWarnings:e5,ValueListItems:rj,ValueLists:rB}),iF=eg("reporting",{ReportRuns:t7,ReportTypes:rt}),iL=eg("sigma",{ScheduledQueryRuns:ro}),iM=eg("tax",{Associations:ex,Calculations:eN,Registrations:t5,Settings:rm,Transactions:rI}),iq=eg("terminal",{Configurations:eL,ConnectionTokens:e$,Locations:td,OnboardingLinks:tO,Readers:tV}),iH=eg("testHelpers",{ConfirmationTokens:eq,Customers:e1,Refunds:t4,TestClocks:rb,Issuing:eg("issuing",{Authorizations:eI,Cards:eB,PersonalizationDesigns:tL,Transactions:rN}),Terminal:eg("terminal",{Readers:tZ}),Treasury:eg("treasury",{InboundTransfers:ta,OutboundPayments:tN,OutboundTransfers:tj,ReceivedCredits:tX,ReceivedDebits:t1})}),i$=eg("treasury",{CreditReversals:eQ,DebitReversals:e8,FinancialAccounts:to,InboundTransfers:tc,OutboundPayments:tk,OutboundTransfers:tB,ReceivedCredits:tQ,ReceivedDebits:t8,TransactionEntries:rP,Transactions:rk}),iK=eg("v2",{Billing:eg("billing",{MeterEventAdjustments:tm,MeterEventSession:tg,MeterEventStream:tb,MeterEvents:tP}),Core:eg("core",{EventDestinations:e7,Events:tt})}),iV="api.stripe.com",iW="/v1/",iZ=["name","version","url","partner_id"],iY=["authenticator","apiVersion","typescript","maxNetworkRetries","httpAgent","httpClient","timeout","host","port","protocol","telemetry","appInfo","stripeAccount","stripeContext"],iX=function(e,t=e=>new es(e,ef.MAX_BUFFERED_REQUEST_METRICS)){function r(n,o={}){if(!(this instanceof r))return new r(n,o);let s=this._getPropsFromConfig(o);this._platformFunctions=e,Object.defineProperty(this,"_emitter",{value:this._platformFunctions.createEmitter(),enumerable:!1,configurable:!1,writable:!1}),this.VERSION=r.PACKAGE_VERSION,this.on=this._emitter.on.bind(this._emitter),this.once=this._emitter.once.bind(this._emitter),this.off=this._emitter.removeListener.bind(this._emitter);let a=s.httpAgent||null;this._api={host:s.host||iV,port:s.port||"443",protocol:s.protocol||"https",basePath:iW,version:s.apiVersion||em,timeout:k("timeout",s.timeout,8e4),maxNetworkRetries:k("maxNetworkRetries",s.maxNetworkRetries,2),agent:a,httpClient:s.httpClient||(a?this._platformFunctions.createNodeHttpClient(a):this._platformFunctions.createDefaultHttpClient()),dev:!1,stripeAccount:s.stripeAccount||null,stripeContext:s.stripeContext||null};let l=s.typescript||!1;l!==r.USER_AGENT.typescript&&(r.USER_AGENT.typescript=l),s.appInfo&&this._setAppInfo(s.appInfo),this._prepResources(),this._setAuthenticator(n,s.authenticator),this.errors=i,this.webhooks=r.webhooks,this._prevRequestMetrics=[],this._enableTelemetry=!1!==s.telemetry,this._requestSender=t(this),this.StripeResource=r.StripeResource}return r.PACKAGE_VERSION="20.0.0",r.API_VERSION=em,r.USER_AGENT=Object.assign({bindings_version:r.PACKAGE_VERSION,lang:"node",publisher:"stripe",uname:null,typescript:!1},"undefined"==typeof process?{}:{lang_version:process.version,platform:process.platform}),r.StripeResource=ef,r.StripeContext=ep,r.resources=o,r.HttpClient=m,r.HttpClientResponse=y,r.CryptoProvider=l,r.webhooks=function(e){let t={DEFAULT_TOLERANCE:300,signature:null,constructEvent(e,r,n,i,o,s){try{if(!this.signature)throw Error("ERR: missing signature helper, unable to verify");this.signature.verifyHeader(e,r,n,i||t.DEFAULT_TOLERANCE,o,s)}catch(e){throw e instanceof c&&(e.message+="\nUse `await constructEventAsync(...)` instead of `constructEvent(...)`"),e}return e instanceof Uint8Array?JSON.parse(new TextDecoder("utf8").decode(e)):JSON.parse(e)},async constructEventAsync(e,r,n,i,o,s){if(!this.signature)throw Error("ERR: missing signature helper, unable to verify");return await this.signature.verifyHeaderAsync(e,r,n,i||t.DEFAULT_TOLERANCE,o,s),e instanceof Uint8Array?JSON.parse(new TextDecoder("utf8").decode(e)):JSON.parse(e)},generateTestHeaderString:function(e){let t=l(e),r=t.signature||t.cryptoProvider.computeHMACSignature(t.payloadString,t.secret);return t.generateHeaderString(r)},generateTestHeaderStringAsync:async function(e){let t=l(e),r=t.signature||await t.cryptoProvider.computeHMACSignatureAsync(t.payloadString,t.secret);return t.generateHeaderString(r)}},r={EXPECTED_SCHEME:"v1",verifyHeader(e,t,r,s,l,c){let{decodedHeader:u,decodedPayload:d,details:h,suspectPayloadType:f}=i(e,t,this.EXPECTED_SCHEME),p=/\s/.test(r),m=(l=l||a()).computeHMACSignature(n(d,h),r);return o(d,u,h,m,s,f,p,c),!0},async verifyHeaderAsync(e,t,r,s,l,c){let{decodedHeader:u,decodedPayload:d,details:h,suspectPayloadType:f}=i(e,t,this.EXPECTED_SCHEME),p=/\s/.test(r);l=l||a();let m=await l.computeHMACSignatureAsync(n(d,h),r);return o(d,u,h,m,s,f,p,c)}};function n(e,t){return`${t.timestamp}.${e}`}function i(e,t,r){var n,i;if(!e)throw new Q(t,e,{message:"No webhook payload was provided."});let o="string"!=typeof e&&!(e instanceof Uint8Array),s=new TextDecoder("utf8"),a=e instanceof Uint8Array?s.decode(e):e;if(Array.isArray(t))throw Error("Unexpected: An array was passed as a header, which should not be possible for the stripe-signature header.");if(null==t||""==t)throw new Q(t,e,{message:"No stripe-signature header value was provided."});let l=t instanceof Uint8Array?s.decode(t):t,c=(n=l,i=r,"string"!=typeof n?null:n.split(",").reduce((e,t)=>{let r=t.split("=");return"t"===r[0]&&(e.timestamp=parseInt(r[1],10)),r[0]===i&&e.signatures.push(r[1]),e},{timestamp:-1,signatures:[]}));if(!c||-1===c.timestamp)throw new Q(l,a,{message:"Unable to extract timestamp and signatures from header"});if(!c.signatures.length)throw new Q(l,a,{message:"No signatures found with expected scheme"});return{decodedPayload:a,decodedHeader:l,details:c,suspectPayloadType:o}}function o(t,r,n,i,o,s,a,l){let c=!!n.signatures.filter(e.secureCompare.bind(e,i)).length,u="\nLearn more about webhook signing and explore webhook integration examples for various frameworks at https://docs.stripe.com/webhooks/signature",d=a?"\n\nNote: The provided signing secret contains whitespace. This often indicates an extra newline or space is in the value":"";if(!c){if(s)throw new Q(r,t,{message:"Webhook payload must be provided as a string or a Buffer (https://nodejs.org/api/buffer.html) instance representing the _raw_ request body.Payload was provided as a parsed JavaScript object instead. \nSignature verification is impossible without access to the original signed material. \n"+u+"\n"+d});throw new Q(r,t,{message:"No signatures found matching the expected signature for payload. Are you passing the raw request body you received from Stripe? \n If a webhook request is being forwarded by a third-party tool, ensure that the exact request body, including JSON formatting and new line style, is preserved.\n"+u+"\n"+d})}let h=Math.floor(("number"==typeof l?l:Date.now())/1e3)-n.timestamp;if(o>0&&h>o)throw new Q(r,t,{message:"Timestamp outside the tolerance zone"});return!0}let s=null;function a(){return s||(s=e.createDefaultCryptoProvider()),s}function l(e){if(!e)throw new $({message:"Options are required"});let t=Math.floor(e.timestamp)||Math.floor(Date.now()/1e3),n=e.scheme||r.EXPECTED_SCHEME,i=e.cryptoProvider||a(),o=`${t}.${e.payload}`;return Object.assign(Object.assign({},e),{timestamp:t,scheme:n,cryptoProvider:i,payloadString:o,generateHeaderString:e=>`t=${t},${n}=${e}`})}return t.signature=r,t}(e),r.errors=i,r.createNodeHttpClient=e.createNodeHttpClient,r.createFetchHttpClient=e.createFetchHttpClient,r.createNodeCryptoProvider=e.createNodeCryptoProvider,r.createSubtleCryptoProvider=e.createSubtleCryptoProvider,r.prototype={_appInfo:void 0,on:null,off:null,once:null,VERSION:null,StripeResource:null,webhooks:null,errors:null,_api:null,_prevRequestMetrics:null,_emitter:null,_enableTelemetry:null,_requestSender:null,_platformFunctions:null,rawRequest(e,t,r,n){return this._requestSender._rawRequest(e,t,r,n)},_setAuthenticator(e,t){if(e&&t)throw Error("Can't specify both apiKey and authenticator");if(!e&&!t)throw Error("Neither apiKey nor config.authenticator provided");this._authenticator=e?z(e):t},_setAppInfo(e){if(e&&"object"!=typeof e)throw Error("AppInfo must be an object.");if(e&&!e.name)throw Error("AppInfo.name is required");e=e||{},this._appInfo=iZ.reduce((t,r)=>("string"==typeof e[r]&&((t=t||{})[r]=e[r]),t),{})},_setApiField(e,t){this._api[e]=t},getApiField(e){return this._api[e]},setClientId(e){this._clientId=e},getClientId(){return this._clientId},getConstant:e=>{switch(e){case"DEFAULT_HOST":return iV;case"DEFAULT_PORT":return"443";case"DEFAULT_BASE_PATH":return iW;case"DEFAULT_API_VERSION":return em;case"DEFAULT_TIMEOUT":return 8e4;case"MAX_NETWORK_RETRY_DELAY_SEC":return 5;case"INITIAL_NETWORK_RETRY_DELAY_SEC":return .5}return r[e]},getMaxNetworkRetries(){return this.getApiField("maxNetworkRetries")},_setApiNumberField(e,t,r){let n=k(e,t,r);this._setApiField(e,n)},getMaxNetworkRetryDelay:()=>5,getInitialNetworkRetryDelay:()=>.5,getClientUserAgent(e){return this.getClientUserAgentSeeded(r.USER_AGENT,e)},getClientUserAgentSeeded(e,t){this._platformFunctions.getUname().then(r=>{var n;let i={};for(let t in e)Object.prototype.hasOwnProperty.call(e,t)&&(i[t]=encodeURIComponent(null!=(n=e[t])?n:"null"));i.uname=encodeURIComponent(r||"UNKNOWN");let o=this.getApiField("httpClient");o&&(i.httplib=encodeURIComponent(o.getClientName())),this._appInfo&&(i.application=this._appInfo),t(JSON.stringify(i))})},getAppInfoAsString(){if(!this._appInfo)return"";let e=this._appInfo.name;return this._appInfo.version&&(e+=`/${this._appInfo.version}`),this._appInfo.url&&(e+=` (${this._appInfo.url})`),e},getTelemetryEnabled(){return this._enableTelemetry},_prepResources(){for(let e in o)Object.prototype.hasOwnProperty.call(o,e)&&(this["OAuth"===e?"oauth":e[0].toLowerCase()+e.substring(1)]=new o[e](this))},_getPropsFromConfig(e){if(!e)return{};let t="string"==typeof e;if(!(e===Object(e)&&!Array.isArray(e))&&!t)throw Error("Config must either be an object or a string");if(t)return{apiVersion:e};if(Object.keys(e).filter(e=>!iY.includes(e)).length>0)throw Error(`Config object may only contain the following: ${iY.join(", ")}`);return e},parseEventNotification(e,t,r,n,i,o){let s=this.webhooks.constructEvent(e,t,r,n,i,o);return s.context&&(s.context=ep.parse(s.context)),s.fetchEvent=()=>this._requestSender._rawRequest("GET",`/v2/core/events/${s.id}`,void 0,{stripeContext:s.context},["fetch_event"]),s.fetchRelatedObject=()=>s.related_object?this._requestSender._rawRequest("GET",s.related_object.url,void 0,{stripeContext:s.context},["fetch_related_object"]):Promise.resolve(null),s}},r}(new class extends M{constructor(){super(),this._exec=ei.exec,this._UNAME_CACHE=null}uuid4(){return s.randomUUID?s.randomUUID():super.uuid4()}getUname(){return this._UNAME_CACHE||(this._UNAME_CACHE=new Promise((e,t)=>{try{this._exec("uname -a",(t,r)=>{if(t)return e(null);e(r)})}catch(t){e(null)}})),this._UNAME_CACHE}secureCompare(e,t){if(!e||!t)throw Error("secureCompare must receive two arguments");if(e.length!==t.length)return!1;if(s.timingSafeEqual){let r=new TextEncoder,n=r.encode(e),i=r.encode(t);return s.timingSafeEqual(n,i)}return super.secureCompare(e,t)}createEmitter(){return new a.EventEmitter}tryBufferData(e){if(!(e.file.data instanceof a.EventEmitter))return Promise.resolve(e);let t=[];return new Promise((r,n)=>{e.file.data.on("data",e=>{t.push(e)}).once("end",()=>{let n,i,o=Object.assign({},e);o.file.data=(n=new Uint8Array(t.reduce((e,t)=>e+t.length,0)),i=0,t.forEach(e=>{n.set(e,i),i+=e.length}),n),r(o)}).on("error",e=>{n(new eo({message:"An error occurred while attempting to process the file for upload.",detail:e}))})})}createNodeHttpClient(e){return new _(e)}createDefaultHttpClient(){return new _}createNodeCryptoProvider(){return new u}createDefaultCryptoProvider(){return this.createNodeCryptoProvider()}})}};
//# sourceMappingURL=256.js.map